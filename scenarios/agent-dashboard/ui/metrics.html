<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metrics - Agent Command Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Share+Tech+Mono&family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- Background effects -->
    <div class="cyber-grid"></div>
    <div class="scan-line"></div>
    
    <div class="command-center">
        <!-- Header with Navigation -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <div class="logo-cube">
                        <div class="cube-face front"></div>
                        <div class="cube-face back"></div>
                        <div class="cube-face left"></div>
                        <div class="cube-face right"></div>
                        <div class="cube-face top"></div>
                        <div class="cube-face bottom"></div>
                    </div>
                </div>
                <div class="logo-text">AGENT COMMAND</div>
            </div>
            
            <nav class="nav-menu">
                <a href="/" class="nav-link">
                    <i data-lucide="layout-dashboard"></i>
                    <span>Dashboard</span>
                </a>
                <a href="/agents.html" class="nav-link">
                    <i data-lucide="bot"></i>
                    <span>Agents</span>
                </a>
                <a href="/logs.html" class="nav-link">
                    <i data-lucide="terminal"></i>
                    <span>Logs</span>
                </a>
                <a href="/metrics.html" class="nav-link active">
                    <i data-lucide="bar-chart"></i>
                    <span>Metrics</span>
                </a>
            </nav>
            
            <div class="system-status">
                <div class="status-indicator">
                    <i data-lucide="shield-check" class="status-icon active"></i>
                    <span>SYSTEM ONLINE</span>
                </div>
                <div class="status-indicator">
                    <i data-lucide="cpu" class="status-icon warning"></i>
                    <span id="agentCount">0 AGENTS ACTIVE</span>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="metrics-header">
                <h1 class="page-title">
                    <i data-lucide="bar-chart"></i>
                    System Metrics
                </h1>
                <div class="metrics-controls">
                    <select id="timeRange" class="filter-select">
                        <option value="1h">Last Hour</option>
                        <option value="6h">Last 6 Hours</option>
                        <option value="24h" selected>Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                    </select>
                    <button id="refreshMetrics" class="action-btn">
                        <i data-lucide="refresh-cw"></i>
                        REFRESH
                    </button>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="metrics-summary">
                <div class="metric-card">
                    <div class="metric-icon">
                        <i data-lucide="activity"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="totalAgents">0</div>
                        <div class="metric-label">Total Agents</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i data-lucide="zap"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="activeAgents">0</div>
                        <div class="metric-label">Active Agents</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i data-lucide="cpu"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="avgCpu">0%</div>
                        <div class="metric-label">Avg CPU Usage</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i data-lucide="hard-drive"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="totalMemory">0 MB</div>
                        <div class="metric-label">Total Memory</div>
                    </div>
                </div>
            </div>

            <!-- Detailed Metrics Grid -->
            <div class="metrics-grid">
                <!-- Resource Distribution -->
                <div class="metric-panel">
                    <h2 class="panel-title">
                        <i data-lucide="pie-chart"></i>
                        Resource Distribution
                    </h2>
                    <div class="panel-content">
                        <div id="resourceChart" class="chart-container">
                            <!-- Chart will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Agent Performance -->
                <div class="metric-panel">
                    <h2 class="panel-title">
                        <i data-lucide="trending-up"></i>
                        Agent Performance
                    </h2>
                    <div class="panel-content">
                        <table class="performance-table">
                            <thead>
                                <tr>
                                    <th>Agent</th>
                                    <th>CPU %</th>
                                    <th>Memory</th>
                                    <th>Tasks</th>
                                    <th>Success %</th>
                                </tr>
                            </thead>
                            <tbody id="performanceTable">
                                <!-- Rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- System Health -->
                <div class="metric-panel">
                    <h2 class="panel-title">
                        <i data-lucide="shield"></i>
                        System Health
                    </h2>
                    <div class="panel-content">
                        <div class="health-indicators">
                            <div class="health-item">
                                <span class="health-label">API Response Time</span>
                                <div class="health-bar">
                                    <div class="health-fill good" style="width: 85%"></div>
                                </div>
                                <span class="health-value">45ms</span>
                            </div>
                            <div class="health-item">
                                <span class="health-label">Agent Availability</span>
                                <div class="health-bar">
                                    <div class="health-fill good" style="width: 95%"></div>
                                </div>
                                <span class="health-value">95%</span>
                            </div>
                            <div class="health-item">
                                <span class="health-label">Error Rate</span>
                                <div class="health-bar">
                                    <div class="health-fill warning" style="width: 15%"></div>
                                </div>
                                <span class="health-value">2.3%</span>
                            </div>
                            <div class="health-item">
                                <span class="health-label">Resource Utilization</span>
                                <div class="health-bar">
                                    <div class="health-fill good" style="width: 65%"></div>
                                </div>
                                <span class="health-value">65%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Events -->
                <div class="metric-panel">
                    <h2 class="panel-title">
                        <i data-lucide="clock"></i>
                        Recent Events
                    </h2>
                    <div class="panel-content">
                        <div class="events-list" id="eventsList">
                            <!-- Events will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="shared/api.js"></script>
    <script src="metrics.js"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>