name: make-it-vegan
description: Test suite for Make It Vegan scenario
version: 1.0.0

setup:
  resources:
    - ollama
    - n8n
    - postgresql
    - redis
  timeout: 300

tests:
  - name: API Health Check
    type: http
    endpoint: http://localhost:${API_PORT}/health
    method: GET
    expected_status: 200
    timeout: 30

  - name: Check Vegan Ingredients
    type: http
    endpoint: http://localhost:${API_PORT}/api/check
    method: POST
    body:
      ingredients: "tofu, soy sauce, rice, vegetables"
    expected_status: 200
    expected_response:
      isVegan: true
    timeout: 30

  - name: Check Non-Vegan Ingredients
    type: http
    endpoint: http://localhost:${API_PORT}/api/check
    method: POST
    body:
      ingredients: "milk, eggs, butter, flour"
    expected_status: 200
    expected_response:
      isVegan: false
    timeout: 30

  - name: Find Vegan Substitute
    type: http
    endpoint: http://localhost:${API_PORT}/api/substitute
    method: POST
    body:
      ingredient: "eggs"
      context: "baking"
    expected_status: 200
    timeout: 30

  - name: UI Accessibility
    type: http
    endpoint: http://localhost:${UI_PORT}
    method: GET
    expected_status: 200
    timeout: 30

  - name: CLI Check Command
    type: cli
    command: make-it-vegan check "soy milk"
    expected_output_contains: "vegan"
    timeout: 30

cleanup:
  stop_services: true
  remove_data: false