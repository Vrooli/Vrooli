# Progress Log

Track development progress here. Each agent session should add an entry.

| Date | Author | Status Snapshot | Notes |
|------|--------|-----------------|-------|
| 2025-11-28 | Generator Agent | Initialization complete | Scenario scaffold, PRD, requirements registry seeded. Ready for P0 implementation. |
| 2025-11-28 | Improver Agent | Core P0 progress (33% coverage) | Full Go API with CRUD for chats, messages, labels; PostgreSQL schema; Inbox UI with chat list, messaging, read/unread, archive, star; 14 API tests; Selector registry for BAS workflows. Completeness: 12→12/100. Next: OpenRouter integration, streaming, multi-layer E2E validation. |
| 2025-11-28 | Improver Agent (Phase 1 Iteration 2) | Security & standards fixes | Fixed CORS wildcard vulnerability (HTTP-002); updated Makefile to match standards template; fixed service.json health endpoints; added 4 E2E playbooks for multi-layer validation; updated requirements with integration phase tests. Security: 1→0 vulnerabilities. Standards violations reduced from 75→50. |
| 2025-12-25 | Improver Agent | OpenRouter integration & P0 progress (40% coverage) | Added OpenRouter chat completion with SSE streaming (api/openrouter.go); model selector UI with dropdown; streaming response display; fixed 4 HIGH standards violations (PRD sections, service.json condition structure, pnpm --ignore-workspace); added usage-stats requirements module. Standards violations: 52→2. Completeness: 24→26/100. Requirements coverage: 33%→40%. Next: Add focused API tests, reduce monolithic test files. |
| 2025-12-25 | Improver Agent | Test restructuring & P0 progress | Split monolithic main_test.go into 5 focused test files: inbox_test.go (312 LOC, 8 tests), chat_test.go (264 LOC, 10 tests), persistence_test.go (379 LOC, 14 tests), labels_test.go (457 LOC, 14 tests), openrouter_test.go (237 LOC, 8 tests). Added tests for /api/v1/models and /api/v1/chats/{id}/complete endpoints. Updated requirements to point to focused test files. Marked LABEL-005 and LABEL-006 as complete with API tests. Fixed database schema conflict by adding scenario-specific PostgreSQL schema (agent_inbox). Scenario now starts and API healthy (http://localhost:16661). Security: 0 vulnerabilities. Standards: 1 medium (Go workspace mode). Requirements coverage: 40%→44%. Next: Install openrouter resource, run integration tests, add NAME-* requirement tests. |
| 2025-12-25 | Claude Opus 4.5 | Tool calling & agent-manager integration | Major architectural update to support the "inbox as dispatcher" pattern. Agent-inbox now acts as a conversational hub that dispatches coding tasks to agent-manager via tool calls. Key changes: (1) Extended database schema with tool_calls table and message fields for tool_call_id, tool_calls JSONB, response_id, finish_reason; (2) Added tools.go with 6 agent-manager tools (spawn_coding_agent, check_agent_status, stop_agent, list_active_agents, get_agent_diff, approve_agent_changes); (3) Updated openrouter.go to handle OpenRouter Responses API with streaming tool call events; (4) Added handleListTools and handleListChatToolCalls API endpoints; (5) Updated UI MessageList to display tool calls with running/completed/failed states; (6) Added activeToolCalls state to useChats hook with streaming event handling; (7) Added agent-manager as scenario dependency in service.json. API compiles and TypeScript passes. Next: Add tests for tool call flow, integrate with running agent-manager. |
| 2025-12-25 | Claude Opus 4.5 | P0-005 Auto-naming & Responses API storage | Implemented auto-naming with Ollama (P0-005): (1) Added ollama.go with handleAutoName endpoint that uses local Ollama (llama3.1:8b) to generate concise chat names from conversation content; (2) Added /api/v1/chats/{id}/auto-name POST endpoint; (3) Added autoNameChat API function and useChats mutation; (4) Auto-naming triggers after first AI response when chat has default "New Chat" name. Updated conversation storage for Responses API pattern: (1) handleGetChat now returns all message fields including tool_call_id, tool_calls, response_id, finish_reason; (2) handleAddMessage now accepts tool role with tool_call_id validation. Added naming_test.go with 6 new tests for auto-naming and tool messages. Installed openrouter resource. Security: 0 vulnerabilities. Standards: 1 medium (Go workspace mode). |
| 2025-12-25 | Claude Opus 4.5 | Control Surface & Graceful Degradation | Applied ecosystem-manager design guides (control-surface-tunable-levers-design.md, failure-topography-and-graceful-degradation.md). **Control Surface:** Added `config/config.go` with centralized, validated configuration for all tunable levers - server timeouts, AI defaults, naming parameters, integration timeouts, and resilience settings. All levers have sane defaults, clear documentation of tradeoffs, and bounded validation. **Graceful Degradation:** Added `resilience/` package with (1) retry.go - exponential backoff retry with permanent error support; (2) circuit_breaker.go - full circuit breaker implementation (closed/open/half-open states) with thread-safety and metrics; (3) fallback.go - typed fallback helpers for graceful degradation. Updated integrations to use config: OllamaClient, OpenRouterClient, AgentManagerClient now inject timeouts from config. Health endpoint upgraded to report dependency status (healthy/degraded/unhealthy) and capability availability. Added 24 new tests for config validation and resilience patterns. All tests pass. |
