{
  "module": "search-functionality",
  "description": "Full-text search across chat messages",
  "requirements": [
    {
      "id": "SEARCH-001",
      "title": "Full-text search",
      "description": "Search across all chat messages with PostgreSQL full-text search",
      "prd_ref": "OT-P1-001",
      "criticality": "P1",
      "status": "complete",
      "validation": [
        "PostgreSQL tsvector indexes on chats.search_vector and messages.search_vector",
        "Triggers auto-update search vectors on insert/update",
        "GET /api/v1/search?q=query endpoint returns ranked results"
      ]
    },
    {
      "id": "SEARCH-002",
      "title": "Search UI",
      "description": "Search bar in inbox header with results highlighting",
      "prd_ref": "OT-P1-001",
      "criticality": "P1",
      "status": "complete",
      "validation": [
        "Search input in ChatList header with placeholder 'Search messages... (Ctrl+K)'",
        "Debounced search (300ms) via useSearch hook",
        "Results show highlighted snippets with <mark> tags"
      ]
    },
    {
      "id": "SEARCH-003",
      "title": "Search results navigation",
      "description": "Click search result to open chat at matching message",
      "prd_ref": "OT-P1-001",
      "criticality": "P1",
      "status": "complete",
      "validation": [
        "onSelectChat receives optional messageId parameter",
        "MessageList scrolls to target message with highlight animation",
        "Highlight fades after 2 seconds"
      ]
    }
  ]
}
