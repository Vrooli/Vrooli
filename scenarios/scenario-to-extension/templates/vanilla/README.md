# {{APP_NAME}} Browser Extension

{{APP_DESCRIPTION}}

Generated by [scenario-to-extension](https://github.com/vrooli/vrooli) for the Vrooli platform.

## üöÄ Quick Start

### Development Setup

1. **Install dependencies**
   ```bash
   npm install
   ```

2. **Build the extension**
   ```bash
   npm run build
   ```

3. **Load in Chrome**
   - Open Chrome and go to `chrome://extensions/`
   - Enable "Developer mode" (top right toggle)
   - Click "Load unpacked" and select the `dist/` folder

4. **Development with hot reload**
   ```bash
   npm run dev
   ```

### Production Build

```bash
npm run pack
```

This creates a `{{PACKAGE_NAME}}-v{{VERSION}}.zip` file ready for distribution.

## üîß Extension Structure

```
{{PACKAGE_NAME}}/
‚îú‚îÄ‚îÄ dist/                    # Built extension files
‚îú‚îÄ‚îÄ icons/                   # Extension icons
‚îú‚îÄ‚îÄ manifest.json           # Extension manifest
‚îú‚îÄ‚îÄ background.js           # Service worker
‚îú‚îÄ‚îÄ content.js             # Content script
‚îú‚îÄ‚îÄ popup.html             # Popup interface
‚îú‚îÄ‚îÄ popup.js              # Popup logic
‚îú‚îÄ‚îÄ build.js              # Build system
‚îú‚îÄ‚îÄ package.json          # Dependencies
‚îî‚îÄ‚îÄ README.md            # This file
```

## üìã Features

### Core Functionality
- ‚úÖ Background service worker for persistent state
- ‚úÖ Content script injection for web page interaction
- ‚úÖ Popup interface for user controls
- ‚úÖ Secure API integration with {{SCENARIO_NAME}}
- ‚úÖ Real-time data synchronization
- ‚úÖ Cross-page state persistence

### Browser Permissions

This extension requests the following permissions:

{{PERMISSIONS_LIST}}

### Host Permissions

The extension can access these websites:

{{HOST_PERMISSIONS_LIST}}

## üîå API Integration

The extension integrates with the {{SCENARIO_NAME}} scenario at:
- **API Endpoint**: {{API_ENDPOINT}}
- **Authentication**: {{AUTH_METHOD}}
- **Real-time Sync**: Every 5 minutes + on-demand

### API Endpoints Used

- `POST /auth/extension` - Extension authentication
- `GET /auth/verify` - Verify authentication status
- `POST /api/v1/extension/action/{action}` - Execute scenario actions
- `POST /api/v1/extension/sync` - Synchronize extension state
- `GET /api/v1/extension/data/{type}` - Fetch scenario data

## üé® Customization

### Adding Custom Actions

1. **Define the action in popup.html:**
   ```html
   <button data-action="my-custom-action" data-action-data='{"param": "value"}'>
       My Action
   </button>
   ```

2. **Handle the action in the scenario API:**
   ```javascript
   // In your scenario's API handler
   app.post('/api/v1/extension/action/my-custom-action', (req, res) => {
       // Handle the action
       res.json({ success: true, message: 'Action completed' });
   });
   ```

### Modifying Content Script Behavior

Edit `content.js` to change how the extension interacts with web pages:

```javascript
// Add custom page processing
async function processPageForScenario(pageData) {
    // Your custom logic here
    if (pageData.domain === 'example.com') {
        // Do something specific for example.com
        await BackgroundMessenger.executeAction('process-example-page', pageData);
    }
}
```

### Styling the Popup

Modify the CSS in `popup.html` or add a separate CSS file:

```css
/* Custom extension styles */
.my-custom-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 16px;
    border-radius: 8px;
    color: white;
}
```

## üß™ Testing

### Manual Testing

1. **Load the extension** in Chrome developer mode
2. **Navigate to a test page** that matches your host permissions
3. **Open the popup** and verify all UI elements work
4. **Check the console** in DevTools for any errors
5. **Test background functionality** using Chrome extension DevTools

### Automated Testing

```bash
npm test
```

This runs basic validation tests on:
- Manifest.json structure
- JavaScript syntax
- Template variable replacement
- API endpoint availability

### Browser Compatibility

| Browser | Status | Notes |
|---------|--------|-------|
| Chrome | ‚úÖ Fully Supported | Primary development target |
| Firefox | üîÑ Needs Testing | Should work with minor modifications |
| Edge | üîÑ Needs Testing | Chromium-based, likely compatible |
| Safari | ‚ùå Not Supported | Requires significant changes |

## üì¶ Distribution

### Chrome Web Store

1. **Create a developer account** at https://developer.chrome.com/webstore
2. **Pack the extension:**
   ```bash
   npm run pack
   ```
3. **Upload the ZIP file** to the Chrome Web Store
4. **Fill out the store listing** with screenshots and description
5. **Submit for review**

### Firefox Add-ons

1. **Modify manifest.json** for Firefox compatibility:
   ```json
   {
     "manifest_version": 2,
     "browser_specific_settings": {
       "gecko": {
         "id": "{{PACKAGE_NAME}}@vrooli.com"
       }
     }
   }
   ```

2. **Submit to** https://addons.mozilla.org/

### Enterprise Distribution

For private distribution within organizations:

1. **Host the CRX file** on your domain
2. **Use Chrome Enterprise policies** to auto-install
3. **Or distribute via G Suite Admin Console**

## üîê Security Considerations

### Data Protection
- All API communication uses HTTPS
- Authentication tokens are stored securely in Chrome's encrypted storage
- No sensitive data is logged to console in production builds

### Privacy
- The extension only accesses websites explicitly listed in host permissions
- User data is processed according to the {{SCENARIO_NAME}} privacy policy
- Analytics and crash reporting can be disabled in extension settings

### Content Security Policy
The extension uses a strict CSP to prevent XSS attacks:
```
script-src 'self'; object-src 'self'; connect-src 'self' {{API_ENDPOINT}} https://*.vrooli.com
```

## üêõ Troubleshooting

### Common Issues

**Extension won't load:**
- Check for syntax errors in manifest.json
- Verify all referenced files exist in the dist/ folder
- Look for errors in Chrome's extension management page

**API calls failing:**
- Verify the scenario is running at {{API_ENDPOINT}}
- Check authentication credentials in extension popup
- Look for CORS issues in browser console

**Content script not working:**
- Verify host permissions match the current website
- Check if content script is properly injected (DevTools ‚Üí Sources)
- Look for JavaScript errors in console

**Popup not opening:**
- Check for JavaScript errors in popup.js
- Verify popup.html syntax is correct
- Try reloading the extension

### Debug Mode

Enable debug mode by setting `DEBUG: true` in the build configuration. This enables:
- Verbose console logging
- Extended error messages
- Debug UI elements in popup

### Getting Help

- **Scenario Documentation**: {{API_ENDPOINT}}/docs
- **Vrooli Community**: https://github.com/vrooli/vrooli/discussions
- **Extension Issues**: Report to the scenario maintainer
- **Browser Extension Docs**: https://developer.chrome.com/extensions

## üìÑ License

{{LICENSE}}

---

**Generated by scenario-to-extension v{{VERSION}}**  
**Part of the [Vrooli](https://vrooli.com) intelligence platform**