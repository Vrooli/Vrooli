{
  "ai_features": {
    "text_generation": {
      "enabled": {{ "true" if "ollama" in resources.required else "false" }},
      "models": {{ '["llama3.1:8b", "qwen2.5-coder:7b"]' if "ollama" in resources.required else "[]" }},
      "max_tokens": 2048,
      "temperature_range": [0.1, 1.0]
    },
    
    "speech_to_text": {
      "enabled": {{ "true" if "whisper" in resources.required else "false" }},
      "supported_formats": {{ '["wav", "mp3", "ogg", "m4a"]' if "whisper" in resources.required else "[]" }},
      "max_audio_duration_seconds": 300
    },
    
    "image_generation": {
      "enabled": {{ "true" if "comfyui" in resources.required else "false" }},
      "supported_formats": {{ '["png", "jpg", "jpeg"]' if "comfyui" in resources.required else "[]" }},
      "max_resolution": {{ '"1024x1024"' if "comfyui" in resources.required else 'null' }}
    },
    
    "document_processing": {
      "enabled": {{ "true" if "unstructured-io" in resources.required else "false" }},
      "supported_formats": {{ '["pdf", "docx", "txt", "html"]' if "unstructured-io" in resources.required else "[]" }},
      "max_file_size_mb": 25
    },
    
    "vision_analysis": {
      "enabled": {{ "true" if "llava:7b" in get_available_models() else "false" }},
      "supported_formats": ["jpg", "jpeg", "png", "gif", "webp"],
      "max_image_size_mb": 10
    }
  },
  
  "automation_features": {
    "workflow_automation": {
      "enabled": {{ "true" if "windmill" in resources.required else "false" }},
      "max_concurrent_workflows": 5,
      "webhook_support": true,
      "scheduling_support": true
    },
    
    "screen_automation": {
      "enabled": {{ "true" if "agent-s2" in resources.required else "false" }},
      "screenshot_support": true,
      "mouse_automation": true,
      "keyboard_automation": true,
      "requires_display": {{ testing.requires_display | default(false) }}
    },
    
    "web_automation": {
      "enabled": {{ "true" if "browserless" in resources.required else "false" }},
      "pdf_generation": true,
      "screenshot_capture": true,
      "scraping_support": true
    },
    
    "professional_ui": {
      "enabled": {{ "true" if "windmill" in resources.required else "false" }},
      "custom_branding": true,
      "dashboard_creation": true,
      "script_execution": true
    },
    
    "real_time_dashboard": {
      "enabled": {{ "true" if "node-red" in resources.required else "false" }},
      "live_monitoring": true,
      "event_processing": true,
      "websocket_support": true
    }
  },
  
  "storage_features": {
    "file_storage": {
      "enabled": {{ "true" if "minio" in resources.required else "false" }},
      "public_access": false,
      "versioning": true,
      "encryption": false
    },
    
    "vector_search": {
      "enabled": {{ "true" if "qdrant" in resources.required else "false" }},
      "embedding_dimensions": 384,
      "similarity_threshold": 0.7,
      "max_results": 100
    },
    
    "time_series_analytics": {
      "enabled": {{ "true" if "questdb" in resources.required else "false" }},
      "real_time_ingestion": true,
      "historical_analysis": true,
      "performance_monitoring": true
    },
    
    "caching": {
      "enabled": {{ "true" if "redis" in resources.required else "false" }},
      "session_storage": true,
      "response_caching": true,
      "pub_sub_messaging": true
    },
    
    "secret_management": {
      "enabled": {{ "true" if "vault" in resources.required else "false" }},
      "dynamic_secrets": true,
      "rotation_support": true,
      "audit_logging": true
    }
  },
  
  "business_features": {
    "analytics_dashboard": {
      "enabled": {{ "true" if testing.requires_ui else "false" }},
      "usage_metrics": true,
      "performance_metrics": true,
      "cost_tracking": true,
      "export_reports": true
    },
    
    "user_management": {
      "enabled": false,  # Enable when auth is implemented
      "multi_tenancy": false,
      "role_based_access": false,
      "session_management": true
    },
    
    "api_access": {
      "enabled": true,
      "rate_limiting": true,
      "api_key_auth": false,  # Enable in production
      "webhook_support": true
    },
    
    "monitoring_alerts": {
      "enabled": true,
      "error_notifications": true,
      "performance_alerts": true,
      "resource_health_alerts": true
    }
  },
  
  "search_features": {
    "web_search": {
      "enabled": {{ "true" if "searxng" in resources.required else "false" }},
      "privacy_focused": true,
      "multiple_engines": true,
      "result_filtering": true
    },
    
    "semantic_search": {
      "enabled": {{ "true" if "qdrant" in resources.required and "ollama" in resources.required else "false" }},
      "auto_embedding": true,
      "similarity_ranking": true,
      "context_aware": true
    }
  },
  
  "integration_features": {
    "external_apis": {
      "enabled": true,
      "timeout_handling": true,
      "retry_logic": true,
      "response_caching": true
    },
    
    "webhooks": {
      "enabled": true,
      "authentication": false,  # Enable in production
      "payload_validation": true,
      "delivery_confirmation": true
    },
    
    "import_export": {
      "enabled": true,
      "data_formats": ["json", "csv", "yaml"],
      "bulk_operations": true,
      "backup_restore": true
    }
  },
  
  "development_features": {
    "debug_mode": {
      "enabled": true,
      "verbose_logging": true,
      "performance_profiling": true,
      "mock_services": false
    },
    
    "testing_utilities": {
      "enabled": true,
      "sample_data": true,
      "load_testing": false,
      "integration_tests": true
    },
    
    "hot_reload": {
      "enabled": true,
      "auto_restart": true,
      "config_watching": true,
      "asset_reloading": true
    }
  },
  
  "experimental_features": {
    "ai_workflow_generation": {
      "enabled": false,
      "auto_optimization": false,
      "learning_from_usage": false
    },
    
    "predictive_scaling": {
      "enabled": false,
      "usage_prediction": false,
      "auto_resource_allocation": false
    },
    
    "advanced_analytics": {
      "enabled": false,
      "behavioral_analysis": false,
      "recommendation_engine": false
    }
  }
}