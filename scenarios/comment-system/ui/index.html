<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comment System Admin Dashboard</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí¨</text></svg>">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="container">
                <h1 class="logo">
                    <span class="icon">üí¨</span>
                    Comment System
                </h1>
                <nav class="nav">
                    <button class="nav-btn active" data-tab="dashboard">Dashboard</button>
                    <button class="nav-btn" data-tab="scenarios">Scenarios</button>
                    <button class="nav-btn" data-tab="analytics">Analytics</button>
                    <button class="nav-btn" data-tab="integration">Integration</button>
                    <button class="nav-btn" data-tab="sdk">SDK</button>
                </nav>
                <div class="header-actions">
                    <button class="btn btn-primary" id="refresh-btn">
                        <span class="icon">üîÑ</span>
                        Refresh
                    </button>
                    <div class="status-indicator" id="connection-status">
                        <span class="status-dot"></span>
                        <span class="status-text">Connecting...</span>
                    </div>
                </div>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard-tab">
                    <div class="dashboard-header">
                        <h2>Universal Comment System Dashboard</h2>
                        <p>Manage comment configurations and monitor activity across all Vrooli scenarios</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="total-scenarios">-</h3>
                                <p class="stat-label">Active Scenarios</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üí¨</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="total-comments">-</h3>
                                <p class="stat-label">Total Comments</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="active-users">-</h3>
                                <p class="stat-label">Active Users</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="comments-today">-</h3>
                                <p class="stat-label">Comments Today</p>
                            </div>
                        </div>
                    </div>

                    <div class="recent-activity">
                        <h3>Recent Activity</h3>
                        <div class="activity-list" id="recent-activity-list">
                            <div class="activity-item loading">
                                <div class="activity-icon">‚è≥</div>
                                <div class="activity-content">
                                    <p>Loading recent activity...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scenarios Tab -->
                <div class="tab-content" id="scenarios-tab">
                    <div class="section-header">
                        <h2>Scenario Configurations</h2>
                        <button class="btn btn-primary" id="add-scenario-btn">
                            <span class="icon">‚ûï</span>
                            Add Scenario
                        </button>
                    </div>

                    <div class="scenarios-grid" id="scenarios-grid">
                        <div class="scenario-card loading">
                            <h3>Loading scenarios...</h3>
                        </div>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div class="tab-content" id="analytics-tab">
                    <div class="section-header">
                        <h2>Comment Analytics</h2>
                        <div class="filters">
                            <select class="filter-select" id="analytics-timeframe">
                                <option value="24h">Last 24 Hours</option>
                                <option value="7d">Last 7 Days</option>
                                <option value="30d">Last 30 Days</option>
                                <option value="90d">Last 90 Days</option>
                            </select>
                        </div>
                    </div>

                    <div class="analytics-content">
                        <div class="chart-placeholder">
                            <div class="chart-icon">üìà</div>
                            <h3>Analytics Coming Soon</h3>
                            <p>Comment trends, engagement metrics, and user activity insights will be available here.</p>
                        </div>
                    </div>
                </div>

                <!-- Integration Tab -->
                <div class="tab-content" id="integration-tab">
                    <div class="section-header">
                        <h2>Integration Guide</h2>
                    </div>

                    <div class="integration-content">
                        <div class="integration-method">
                            <h3>üöÄ Quick Start</h3>
                            <p>Add comments to any scenario in just one line:</p>
                            <div class="code-block">
                                <code>&lt;div data-vrooli-comments="your-scenario-name"&gt;&lt;/div&gt;</code>
                            </div>
                        </div>

                        <div class="integration-method">
                            <h3>üì¶ JavaScript SDK</h3>
                            <p>For custom implementations:</p>
                            <div class="code-block">
<code>&lt;script src="http://localhost:${UI_PORT || '3100'}/sdk/vrooli-comments.js"&gt;&lt;/script&gt;
&lt;script&gt;
VrooliComments.init({
    scenarioId: 'your-scenario-name',
    container: '#comments-container',
    theme: 'default'
});
&lt;/script&gt;</code>
                            </div>
                        </div>

                        <div class="integration-method">
                            <h3>üîß API Integration</h3>
                            <p>Direct REST API access:</p>
                            <div class="code-block">
<code>// Get comments
GET /api/v1/comments/your-scenario

// Create comment  
POST /api/v1/comments/your-scenario
{
    "content": "Great post!",
    "author_token": "user_session_token"
}</code>
                            </div>
                        </div>

                        <div class="integration-method">
                            <h3>‚öôÔ∏è Configuration</h3>
                            <p>Manage scenario settings:</p>
                            <div class="code-block">
<code>// Get configuration
GET /api/v1/config/your-scenario

// Update configuration
POST /api/v1/config/your-scenario
{
    "auth_required": true,
    "allow_anonymous": false,
    "moderation_level": "manual"
}</code>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SDK Tab -->
                <div class="tab-content" id="sdk-tab">
                    <div class="section-header">
                        <h2>JavaScript SDK</h2>
                        <a href="/sdk/vrooli-comments.js" class="btn btn-primary" download>
                            <span class="icon">‚¨áÔ∏è</span>
                            Download SDK
                        </a>
                    </div>

                    <div class="sdk-content">
                        <div class="sdk-demo">
                            <h3>Live Demo</h3>
                            <p>Try the comment system right here:</p>
                            <div class="demo-container">
                                <div id="demo-comments" data-vrooli-comments="demo-scenario"></div>
                            </div>
                        </div>

                        <div class="sdk-docs">
                            <h3>SDK Documentation</h3>
                            
                            <h4>Installation</h4>
                            <div class="code-block">
<code>&lt;script src="http://localhost:${UI_PORT || '3100'}/sdk/vrooli-comments.js"&gt;&lt;/script&gt;</code>
                            </div>

                            <h4>Initialization</h4>
                            <div class="code-block">
<code>VrooliComments.init({
    scenarioId: 'your-scenario',     // Required: scenario identifier
    container: '#comments',          // Required: container selector
    apiUrl: 'http://localhost:8080', // Optional: API base URL
    theme: 'default',                // Optional: theme name
    authToken: 'user_token',         // Optional: user session token
    allowAnonymous: false,           // Optional: allow anonymous comments
    showReplies: true,               // Optional: show reply functionality
    maxDepth: 5,                     // Optional: max reply depth
    sortBy: 'newest',                // Optional: newest, oldest, threaded
    pageSize: 20                     // Optional: comments per page
});</code>
                            </div>

                            <h4>Methods</h4>
                            <div class="code-block">
<code>// Refresh comments
VrooliComments.refresh();

// Add new comment programmatically
VrooliComments.addComment('Hello world!');

// Set user authentication
VrooliComments.setAuth('user_token');

// Update configuration
VrooliComments.configure({theme: 'dark'});</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="scenario-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Configure Scenario</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="scenario-form">
                    <div class="form-group">
                        <label for="scenario-name">Scenario Name</label>
                        <input type="text" id="scenario-name" name="scenario_name" required>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="auth-required" name="auth_required">
                            Require Authentication
                        </label>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="allow-anonymous" name="allow_anonymous">
                            Allow Anonymous Comments
                        </label>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="allow-rich-media" name="allow_rich_media">
                            Allow Rich Media
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="moderation-level">Moderation Level</label>
                        <select id="moderation-level" name="moderation_level">
                            <option value="none">None</option>
                            <option value="manual">Manual</option>
                            <option value="ai_assisted">AI Assisted</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Configuration</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Health check endpoint -->
    <script>
        // Simple health check endpoint for the UI
        if (window.location.pathname === '/health') {
            document.body.innerHTML = JSON.stringify({
                status: 'healthy',
                timestamp: new Date().toISOString(),
                component: 'comment-system-ui'
            });
            document.body.style.fontFamily = 'monospace';
        }
    </script>

    <script src="scripts/main.js"></script>
    <script src="sdk/vrooli-comments.js"></script>
    <script>
        // Initialize demo comments
        document.addEventListener('DOMContentLoaded', function() {
            if (document.getElementById('demo-comments')) {
                VrooliComments.init({
                    scenarioId: 'demo-scenario',
                    container: '#demo-comments',
                    theme: 'default'
                });
            }
        });
    </script>
</body>
</html>