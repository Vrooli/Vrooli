{
  "metadata": {
    "description": "Validates dry-run scenario generation (plan-only mode showing files to be written without actual generation)",
    "requirements": ["TMPL-DRY-RUN"],
    "reset": "none"
  },
  "settings": {
    "executionViewport": {
      "width": 1440,
      "height": 900,
      "preset": "desktop"
    }
  },
  "nodes": [
    {
      "id": "navigate-factory",
      "type": "navigate",
      "data": {
        "label": "Navigate to landing-manager factory UI",
        "destinationType": "scenario",
        "scenario": "landing-manager",
        "scenarioPath": "/",
        "waitUntil": "networkidle0",
        "timeoutMs": 30000
      }
    },
    {
      "id": "wait-for-form",
      "type": "wait",
      "data": {
        "label": "Wait for generation form to load",
        "selector": "@selector/generation-form",
        "timeoutMs": 15000,
        "waitForMs": 500,
        "waitType": "element"
      }
    },
    {
      "id": "fill-name",
      "type": "type",
      "data": {
        "label": "Fill in scenario name",
        "selector": "@selector/generation-name-input",
        "text": "Test Landing",
        "clearFirst": true,
        "timeoutMs": 5000
      }
    },
    {
      "id": "wait-after-name",
      "type": "wait",
      "data": {
        "label": "Wait for slug auto-generation",
        "waitType": "time",
        "waitForMs": 500
      }
    },
    {
      "id": "assert-slug",
      "type": "assert",
      "data": {
        "label": "Assert slug was auto-generated",
        "selector": "@selector/generation-slug-input",
        "assertMode": "has_value",
        "expectedText": "test-landing",
        "timeoutMs": 5000,
        "failureMessage": "Slug should auto-generate from name"
      }
    },
    {
      "id": "click-dry-run",
      "type": "click",
      "data": {
        "label": "Click dry-run button",
        "selector": "@selector/dry-run-button",
        "timeoutMs": 5000
      }
    },
    {
      "id": "wait-for-result",
      "type": "wait",
      "data": {
        "label": "Wait for dry-run result",
        "selector": "@selector/generation-result",
        "timeoutMs": 20000,
        "waitForMs": 1000,
        "waitType": "element"
      }
    },
    {
      "id": "assert-result-message",
      "type": "assert",
      "data": {
        "label": "Assert dry-run success message",
        "selector": "@selector/generation-result-message",
        "assertMode": "contains_text",
        "expectedText": "Dry-run plan generated",
        "timeoutMs": 5000,
        "failureMessage": "Should show dry-run plan generated message"
      }
    },
    {
      "id": "assert-status",
      "type": "assert",
      "data": {
        "label": "Assert generation status is dry-run",
        "selector": "@selector/generation-result-status",
        "assertMode": "contains_text",
        "expectedText": "Status:",
        "timeoutMs": 5000,
        "failureMessage": "Should show generation status"
      }
    }
  ],
  "edges": [
    {
      "id": "edge-nav-wait",
      "source": "navigate-factory",
      "target": "wait-for-form",
      "type": "smoothstep"
    },
    {
      "id": "edge-wait-name",
      "source": "wait-for-form",
      "target": "fill-name",
      "type": "smoothstep"
    },
    {
      "id": "edge-name-wait2",
      "source": "fill-name",
      "target": "wait-after-name",
      "type": "smoothstep"
    },
    {
      "id": "edge-wait2-slug",
      "source": "wait-after-name",
      "target": "assert-slug",
      "type": "smoothstep"
    },
    {
      "id": "edge-slug-dry",
      "source": "assert-slug",
      "target": "click-dry-run",
      "type": "smoothstep"
    },
    {
      "id": "edge-dry-result",
      "source": "click-dry-run",
      "target": "wait-for-result",
      "type": "smoothstep"
    },
    {
      "id": "edge-result-message",
      "source": "wait-for-result",
      "target": "assert-result-message",
      "type": "smoothstep"
    },
    {
      "id": "edge-message-status",
      "source": "assert-result-message",
      "target": "assert-status",
      "type": "smoothstep"
    }
  ]
}
