{
  "_metadata": {
    "description": "Home Automation scenario requirements registry with operational target linkage",
    "domain": "home-automation",
    "last_updated": "2025-11-18",
    "total_targets": 14,
    "p0_targets": 5,
    "p1_targets": 5,
    "p2_targets": 4
  },
  "requirements": [
    {
      "id": "HOME-P0-001",
      "category": "integration.device-control",
      "prd_ref": "Operational Targets > P0 > OT-P0-001",
      "title": "Device control via Home Assistant CLI integration",
      "description": "Implements basic device control through Home Assistant CLI integration with API endpoints for device discovery, control, and state monitoring.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "test/phases/test-unit.sh",
          "phase": "unit",
          "status": "implemented",
          "notes": "Go unit tests verify device control handlers"
        },
        {
          "type": "test",
          "ref": "test/phases/test-cli.bats",
          "phase": "integration",
          "status": "implemented",
          "notes": "CLI tests verify device listing and control commands"
        }
      ]
    },
    {
      "id": "HOME-P0-002",
      "category": "security.authentication",
      "prd_ref": "Operational Targets > P0 > OT-P0-002",
      "title": "User authentication and profile-based permissions",
      "description": "Integrates with scenario-authenticator for user authentication and implements profile-based permission validation for device access control.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "api/main_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Permission validation tests with mock authenticator"
        },
        {
          "type": "test",
          "ref": "test/phases/test-integration.sh",
          "phase": "integration",
          "status": "implemented",
          "notes": "Integration tests verify authenticator API calls"
        }
      ]
    },
    {
      "id": "HOME-P0-003",
      "category": "integration.calendar",
      "prd_ref": "Operational Targets > P0 > OT-P0-003",
      "title": "Calendar-driven automation scheduling",
      "description": "Implements calendar integration for schedule-aware automation triggers and context switching with graceful fallback when calendar unavailable.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "api/main_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Calendar integration tests with fallback mode validation"
        },
        {
          "type": "test",
          "ref": "test/phases/test-lifecycle-2.sh",
          "phase": "integration",
          "status": "implemented",
          "notes": "Lifecycle tests verify calendar service integration"
        }
      ]
    },
    {
      "id": "HOME-P0-004",
      "category": "ai.code-generation",
      "prd_ref": "Operational Targets > P0 > OT-P0-004",
      "title": "AI-powered automation generation",
      "description": "Implements natural language automation creation using resource-claude-code with safety validation and YAML code generation.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "api/main_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Automation generation endpoint tests with safety validation"
        },
        {
          "type": "test",
          "ref": "test/phases/test-api.sh",
          "phase": "integration",
          "status": "implemented",
          "notes": "API tests verify automation generation workflow"
        }
      ]
    },
    {
      "id": "HOME-P0-005",
      "category": "monitoring.health",
      "prd_ref": "Operational Targets > P0 > OT-P0-005",
      "title": "Real-time device status monitoring and health checks",
      "description": "Implements health check endpoints reporting system status and all dependency health including database, device controller, calendar scheduler, and safety validator.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "test/phases/test-health.sh",
          "phase": "integration",
          "status": "implemented",
          "notes": "Health check tests verify all dependency reporting"
        },
        {
          "type": "manual",
          "ref": "API /health endpoint",
          "phase": "integration",
          "status": "implemented",
          "notes": "Manual verification shows healthy status with all dependencies"
        }
      ]
    },
    {
      "id": "HOME-P1-001",
      "category": "features.scenes",
      "prd_ref": "Operational Targets > P1 > OT-P1-001",
      "title": "Scene management with intelligent suggestions",
      "description": "Implements scene creation, activation, and pattern-based intelligent suggestions for common automation scenarios.",
      "status": "planned",
      "validation": []
    },
    {
      "id": "HOME-P1-002",
      "category": "features.energy",
      "prd_ref": "Operational Targets > P1 > OT-P1-002",
      "title": "Energy usage optimization with cost analysis",
      "description": "Implements energy monitoring, usage optimization algorithms, and cost analysis reporting for device automation.",
      "status": "planned",
      "validation": []
    },
    {
      "id": "HOME-P1-003",
      "category": "ui.mobile",
      "prd_ref": "Operational Targets > P1 > OT-P1-003",
      "title": "Mobile-responsive UI with real-time controls",
      "description": "Implements mobile-responsive UI design with real-time device control capabilities and touch-optimized interactions.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "test/phases/test-ui-automation.sh",
          "phase": "ui",
          "status": "implemented",
          "notes": "UI automation tests verify mobile (375x667) and tablet (768x1024) viewports"
        }
      ]
    },
    {
      "id": "HOME-P1-004",
      "category": "features.conflict-resolution",
      "prd_ref": "Operational Targets > P1 > OT-P1-004",
      "title": "Automated conflict resolution between automations",
      "description": "Implements detection and automated resolution of conflicting automation rules to prevent contradictory device commands.",
      "status": "planned",
      "validation": []
    },
    {
      "id": "HOME-P1-005",
      "category": "integration.workflows",
      "prd_ref": "Operational Targets > P1 > OT-P1-005",
      "title": "Integration with shared n8n workflows",
      "description": "Implements integration with shared n8n workflow patterns in initialization/n8n/ for common automation orchestration.",
      "status": "planned",
      "validation": []
    },
    {
      "id": "HOME-P2-001",
      "category": "ai.pattern-recognition",
      "prd_ref": "Operational Targets > P2 > OT-P2-001",
      "title": "Machine learning-based usage pattern recognition",
      "description": "Implements ML algorithms to recognize and predict user behavior patterns for proactive automation suggestions.",
      "status": "planned",
      "validation": []
    },
    {
      "id": "HOME-P2-002",
      "category": "integration.voice",
      "prd_ref": "Operational Targets > P2 > OT-P2-002",
      "title": "Voice control integration",
      "description": "Implements voice command processing through existing audio resources for hands-free device control.",
      "status": "planned",
      "validation": []
    },
    {
      "id": "HOME-P2-003",
      "category": "integration.weather",
      "prd_ref": "Operational Targets > P2 > OT-P2-003",
      "title": "Advanced scheduling with weather integration",
      "description": "Implements weather data integration for predictive automation scheduling based on forecast conditions.",
      "status": "planned",
      "validation": []
    },
    {
      "id": "HOME-P2-004",
      "category": "features.multi-property",
      "prd_ref": "Operational Targets > P2 > OT-P2-004",
      "title": "Multi-home management for property managers",
      "description": "Implements multi-property management capabilities allowing property managers to control multiple homes from single interface.",
      "status": "planned",
      "validation": []
    }
  ]
}
