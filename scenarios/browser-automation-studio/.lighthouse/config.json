{
  "_metadata": {
    "description": "Lighthouse testing configuration for browser-automation-studio",
    "last_updated": "2025-11-05T00:00:00Z",
    "owner": "browser-automation-studio team"
  },
  "enabled": true,
  "pages": [
    {
      "id": "dashboard",
      "path": "/",
      "label": "Dashboard Home",
      "viewport": "desktop",
      "waitForSelector": "[data-testid='projects-grid']",
      "waitForMs": 1000,
      "thresholds": {
        "performance": { "error": 0.75, "warn": 0.85 },
        "accessibility": { "error": 0.90, "warn": 0.95 },
        "best-practices": { "error": 0.85, "warn": 0.90 },
        "seo": { "error": 0.80, "warn": 0.90 }
      },
      "requirements": ["BAS-PERF-DASHBOARD-LOAD", "BAS-A11Y-DASHBOARD"]
    },
    {
      "id": "workflow-builder",
      "path": "/workflow/new",
      "label": "Workflow Builder",
      "viewport": "desktop",
      "waitForSelector": "[data-testid='canvas-container']",
      "waitForMs": 2000,
      "thresholds": {
        "performance": { "error": 0.65, "warn": 0.75 },
        "accessibility": { "error": 0.90, "warn": 0.95 },
        "best-practices": { "error": 0.80, "warn": 0.90 }
      },
      "requirements": ["BAS-PERF-WORKFLOW-INTERACTIVE"],
      "notes": "Lower perf threshold due to heavy canvas/Monaco editor"
    },
    {
      "id": "project-settings",
      "path": "/projects",
      "label": "Project Settings",
      "viewport": "desktop",
      "waitForSelector": "[data-testid='projects-grid']",
      "waitForMs": 1000,
      "thresholds": {
        "performance": { "error": 0.75, "warn": 0.85 },
        "accessibility": { "error": 0.90, "warn": 0.95 },
        "best-practices": { "error": 0.85, "warn": 0.90 }
      },
      "requirements": ["BAS-PERF-PROJECTS-PAGE"]
    },
    {
      "id": "mobile-dashboard",
      "path": "/",
      "label": "Dashboard (Mobile)",
      "viewport": "mobile",
      "waitForSelector": "[data-testid='projects-grid']",
      "waitForMs": 1000,
      "thresholds": {
        "performance": { "error": 0.70, "warn": 0.80 },
        "accessibility": { "error": 0.90, "warn": 0.95 },
        "best-practices": { "error": 0.80, "warn": 0.90 }
      },
      "requirements": ["BAS-A11Y-MOBILE"],
      "notes": "Lower mobile perf threshold due to throttling"
    }
  ],
  "global_options": {
    "lighthouse": {
      "extends": "lighthouse:default",
      "settings": {
        "onlyCategories": ["performance", "accessibility", "best-practices", "seo"],
        "throttlingMethod": "simulate",
        "formFactor": "desktop",
        "screenEmulation": {
          "mobile": false,
          "width": 1440,
          "height": 900,
          "deviceScaleFactor": 1,
          "disabled": false
        }
      }
    },
    "chrome_flags": [
      "--headless",
      "--no-sandbox",
      "--disable-gpu",
      "--disable-dev-shm-usage",
      "--disable-extensions",
      "--disable-software-rasterizer"
    ],
    "timeout_ms": 90000,
    "retries": 2
  },
  "reporting": {
    "output_dir": "test/artifacts/lighthouse",
    "formats": ["json", "html"],
    "keep_reports": 10,
    "fail_on_error": true,
    "fail_on_warn": false
  }
}
