{
  "metadata": {
    "description": "Validates that workflow execution produces telemetry artifacts (screenshots, logs, progress updates)",
    "requirement": "BAS-EXEC-TELEMETRY-STREAM",
    "version": 1
  },
  "settings": {
    "executionViewport": {
      "width": 1440,
      "height": 900,
      "preset": "desktop"
    }
  },
  "nodes": [
    {
      "id": "navigate-dashboard",
      "type": "navigate",
      "position": { "x": 0, "y": 0 },
      "data": {
        "label": "Open BAS dashboard",
        "destinationType": "scenario",
        "scenario": "browser-automation-studio",
        "scenarioPath": "/",
        "waitUntil": "networkidle0",
        "timeoutMs": 45000,
        "waitForMs": 2000
      }
    },
    {
      "id": "wait-for-demo-project",
      "type": "wait",
      "position": { "x": 200, "y": 0 },
      "data": {
        "label": "Wait for demo project card",
        "selector": "[data-testid=\"project-card-86157b4f-e7be-4e31-8e0c-f183e500356d\"]",
        "timeoutMs": 15000,
        "waitForMs": 1000
      }
    },
    {
      "id": "click-demo-project",
      "type": "click",
      "position": { "x": 400, "y": 0 },
      "data": {
        "label": "Open demo project",
        "selector": "[data-testid=\"project-card-86157b4f-e7be-4e31-8e0c-f183e500356d\"]",
        "timeoutMs": 10000,
        "waitForMs": 1000
      }
    },
    {
      "id": "wait-for-demo-workflow",
      "type": "wait",
      "position": { "x": 600, "y": 0 },
      "data": {
        "label": "Wait for demo workflow",
        "selector": "div[data-workflow-header]",
        "timeoutMs": 15000,
        "waitForMs": 1000
      }
    },
    {
      "id": "click-execute-workflow",
      "type": "click",
      "position": { "x": 800, "y": 0 },
      "data": {
        "label": "Execute demo workflow",
        "selector": "[data-testid=\"workflow-execute-button\"]",
        "timeoutMs": 10000,
        "waitForMs": 1500
      }
    },
    {
      "id": "wait-for-execution-viewer",
      "type": "wait",
      "position": { "x": 1000, "y": 0 },
      "data": {
        "label": "Wait for execution viewer",
        "selector": "[data-testid=\"execution-viewer\"]",
        "timeoutMs": 20000,
        "waitForMs": 2000
      }
    },
    {
      "id": "assert-execution-progress",
      "type": "assert",
      "position": { "x": 1200, "y": -60 },
      "data": {
        "label": "Execution progress visible",
        "selector": "[data-testid=\"execution-progress\"], [data-testid=\"execution-status\"]",
        "assertMode": "exists",
        "timeoutMs": 10000,
        "failureMessage": "Execution should display progress indicator"
      }
    },
    {
      "id": "assert-screenshot-artifacts",
      "type": "assert",
      "position": { "x": 1200, "y": 0 },
      "data": {
        "label": "Screenshots appear",
        "selector": "[data-testid=\"execution-screenshot\"], [data-testid=\"timeline-frame\"]",
        "assertMode": "exists",
        "timeoutMs": 30000,
        "failureMessage": "Execution should capture and display screenshots"
      }
    },
    {
      "id": "assert-execution-logs",
      "type": "assert",
      "position": { "x": 1200, "y": 60 },
      "data": {
        "label": "Execution logs visible",
        "selector": "[data-testid=\"execution-logs\"], [data-testid=\"log-entry\"]",
        "assertMode": "exists",
        "timeoutMs": 15000,
        "failureMessage": "Execution should produce log entries"
      }
    },
    {
      "id": "wait-for-completion",
      "type": "wait",
      "position": { "x": 1400, "y": 0 },
      "data": {
        "label": "Wait for execution completion",
        "durationMs": 10000
      }
    },
    {
      "id": "assert-completion-status",
      "type": "assert",
      "position": { "x": 1600, "y": 0 },
      "data": {
        "label": "Execution completed successfully",
        "selector": "[data-testid=\"execution-status-completed\"], [data-testid=\"execution-status-success\"]",
        "assertMode": "exists",
        "timeoutMs": 20000,
        "failureMessage": "Execution should complete with success status"
      }
    }
  ],
  "edges": [
    { "id": "e1", "source": "navigate-dashboard", "target": "wait-for-demo-project", "type": "smoothstep" },
    { "id": "e2", "source": "wait-for-demo-project", "target": "click-demo-project", "type": "smoothstep" },
    { "id": "e3", "source": "click-demo-project", "target": "wait-for-demo-workflow", "type": "smoothstep" },
    { "id": "e4", "source": "wait-for-demo-workflow", "target": "click-execute-workflow", "type": "smoothstep" },
    { "id": "e5", "source": "click-execute-workflow", "target": "wait-for-execution-viewer", "type": "smoothstep" },
    { "id": "e6", "source": "wait-for-execution-viewer", "target": "assert-execution-progress", "type": "smoothstep" },
    { "id": "e7", "source": "assert-execution-progress", "target": "assert-screenshot-artifacts", "type": "smoothstep" },
    { "id": "e8", "source": "assert-screenshot-artifacts", "target": "assert-execution-logs", "type": "smoothstep" },
    { "id": "e9", "source": "assert-execution-logs", "target": "wait-for-completion", "type": "smoothstep" },
    { "id": "e10", "source": "wait-for-completion", "target": "assert-completion-status", "type": "smoothstep" }
  ]
}
