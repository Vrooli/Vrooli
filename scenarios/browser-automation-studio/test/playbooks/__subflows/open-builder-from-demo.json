{
  "metadata": {
    "description": "Ensures the workflow builder is opened from the Demo project",
    "requirement": "BAS-WORKFLOW-DEMO-SEED",
    "fixture_id": "open-builder-from-demo",
    "parameters": [
      {"name": "projectId", "type": "string", "required": true, "default": "@seed/projectId", "description": "Project identifier to load"},
      {"name": "projectName", "type": "string", "required": true, "default": "@seed/projectName", "description": "Project to load before entering the builder"},
      {"name": "projectFolder", "type": "string", "required": true, "default": "@seed/projectFolder", "description": "Folder path for the seeded project"}
    ]
  },
  "nodes": [
    {
      "id": "fixture-call-open-project",
      "type": "workflowCall",
      "data": {
        "label": "Open Demo project",
        "workflowId": "@fixture/open-demo-project(projectId=\"${fixture.projectId}\", projectName=\"${fixture.projectName}\", projectFolder=\"${fixture.projectFolder}\")"
      }
    },
    {
      "id": "fixture-click-new-workflow",
      "type": "click",
      "data": {
        "label": "Click New Workflow",
        "selector": "@selector/workflows.newButton",
        "timeoutMs": 15000,
        "resilience": {
          "successSelector": "@selector/ai.modal.root, @selector/workflowBuilder.canvas.root",
          "successTimeoutMs": 15000
        }
      }
    },
    {
      "id": "fixture-switch-to-manual",
      "type": "click",
      "data": {
        "label": "Switch to manual builder",
        "selector": "@selector/ai.modal.switchToManualButton",
        "timeoutMs": 5000,
        "continueOnError": true,
        "resilience": {
          "successSelector": "@selector/workflowBuilder.canvas.root",
          "successTimeoutMs": 15000
        }
      }
    },
    {
      "id": "fixture-assert-builder",
      "type": "assert",
      "data": {
        "label": "Builder canvas visible",
        "selector": ".react-flow__renderer, .react-flow",
        "assertMode": "exists",
        "timeoutMs": 5000,
        "failureMessage": "Workflow builder should be visible after opening"
      }
    }
  ],
  "edges": [
    {
      "id": "fixture-builder-edge-1",
      "source": "fixture-call-open-project",
      "target": "fixture-click-new-workflow",
      "type": "smoothstep"
    },
    {
      "id": "fixture-builder-edge-2",
      "source": "fixture-click-new-workflow",
      "target": "fixture-switch-to-manual",
      "type": "smoothstep"
    },
    {
      "id": "fixture-builder-edge-3",
      "source": "fixture-switch-to-manual",
      "target": "fixture-assert-builder",
      "type": "smoothstep"
    }
  ]
}
