{
  "edges": [
    {
      "id": "call-open-project-to-navigate-to-executions",
      "source": "call-open-project",
      "target": "navigate-to-executions",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e5",
      "source": "navigate-to-executions",
      "target": "capture-executions-list",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e7",
      "source": "capture-executions-list",
      "target": "find-execution-entry",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e8",
      "source": "find-execution-entry",
      "target": "click-execution",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e9",
      "source": "click-execution",
      "target": "capture-execution-viewer",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e11",
      "source": "capture-execution-viewer",
      "target": "find-export-button",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e12",
      "source": "find-export-button",
      "target": "capture-export-controls",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e13",
      "source": "capture-export-controls",
      "target": "check-replay-artifacts",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e14",
      "source": "check-replay-artifacts",
      "target": "verify-export-flow",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    }
  ],
  "metadata": {
    "description": "Validates execution result export functionality",
    "labels": {
      "reset": "none"
    },
    "version": "1"
  },
  "nodes": [
    {
      "action": {
        "metadata": {
          "label": "Open Demo project via fixture"
        },
        "subflow": {
          "args": {
            "projectFolder": "${@params/projectFolder}",
            "projectName": "${@params/projectName}"
          },
          "workflow_path": "actions/open-demo-project.json"
        },
        "type": "ACTION_TYPE_SUBFLOW"
      },
      "id": "call-open-project"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/projects.tabs.executions"
        },
        "metadata": {
          "label": "Navigate to Executions tab"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "continue_on_error": true,
        "resilience": {
          "success_selector": "@selector/executions.list.root",
          "success_timeout_ms": 10000
        }
      },
      "id": "navigate-to-executions"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture executions list"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "id": "capture-executions-list"
    },
    {
      "action": {
        "assert": {
          "failure_message": "Should have at least one execution",
          "mode": "ASSERTION_MODE_EXISTS",
          "selector": "@selector/executions.list.item",
          "timeout_ms": 5000
        },
        "metadata": {
          "label": "Verify execution entries exist"
        },
        "type": "ACTION_TYPE_ASSERT"
      },
      "id": "find-execution-entry"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/executions.actions.viewButton"
        },
        "metadata": {
          "label": "Open execution details"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "resilience": {
          "success_selector": "@selector/executions.viewer.root"
        }
      },
      "id": "click-execution"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture execution viewer"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "id": "capture-execution-viewer"
    },
    {
      "action": {
        "assert": {
          "failure_message": "Export replay button should be visible in execution viewer",
          "mode": "ASSERTION_MODE_EXISTS",
          "selector": "@selector/executions.actions.exportReplayButton",
          "timeout_ms": 10000
        },
        "metadata": {
          "label": "Export button visible"
        },
        "type": "ACTION_TYPE_ASSERT"
      },
      "id": "find-export-button"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture export controls"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "id": "capture-export-controls"
    },
    {
      "action": {
        "assert": {
          "failure_message": "Replay artifacts should be listed in execution viewer",
          "mode": "ASSERTION_MODE_EXISTS",
          "selector": "@selector/replay.player, @selector/executions.viewer.screenshots",
          "timeout_ms": 10000
        },
        "metadata": {
          "label": "Replay artifacts visible"
        },
        "type": "ACTION_TYPE_ASSERT"
      },
      "id": "check-replay-artifacts"
    },
    {
      "action": {
        "metadata": {
          "label": "Final export flow verification"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "verify-export-flow"
    }
  ],
  "settings": {
    "viewport_height": 1080,
    "viewport_width": 1920
  }
}
