{
  "edges": [
    {
      "id": "e1",
      "source": "navigate-dashboard",
      "target": "wait-dashboard",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e2",
      "source": "wait-dashboard",
      "target": "click-invalid-selector",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e3",
      "source": "click-invalid-selector",
      "target": "wait-after-error",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e6",
      "source": "verify-error-displayed",
      "target": "verify-workflow-continues",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e7",
      "source": "verify-workflow-continues",
      "target": "test-malformed-selector",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e8",
      "source": "test-malformed-selector",
      "target": "wait-after-malformed",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e4-bridge-e5",
      "source": "wait-after-error",
      "target": "verify-error-displayed",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e9-bridge-e10",
      "source": "wait-after-malformed",
      "target": "verify-graceful-recovery",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    }
  ],
  "metadata": {
    "description": "Validates graceful handling of invalid CSS selectors with appropriate error messages",
    "labels": {
      "reset": "none"
    },
    "version": "1"
  },
  "nodes": [
    {
      "action": {
        "metadata": {
          "label": "Open BAS dashboard"
        },
        "navigate": {
          "destination_type": "NAVIGATE_DESTINATION_TYPE_SCENARIO",
          "scenario": "browser-automation-studio",
          "scenario_path": "/",
          "timeout_ms": 45000,
          "wait_until": "NAVIGATE_WAIT_EVENT_NETWORKIDLE"
        },
        "type": "ACTION_TYPE_NAVIGATE"
      },
      "id": "navigate-dashboard"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for dashboard"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 2000
        }
      },
      "id": "wait-dashboard"
    },
    {
      "action": {
        "click": {
          "selector": ".this-element-does-not-exist-at-all"
        },
        "metadata": {
          "label": "Attempt click with invalid selector (should fail gracefully)"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "continue_on_error": true
      },
      "id": "click-invalid-selector"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait after expected error"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 1500
        }
      },
      "id": "wait-after-error"
    },
    {
      "action": {
        "evaluate": {
          "expression": "!!document.querySelector('[class*=\"error\"], [role=\"alert\"], [class*=\"toast\"]')",
          "store_result": "errorDisplayed"
        },
        "metadata": {
          "label": "Check if error message is displayed"
        },
        "type": "ACTION_TYPE_EVALUATE"
      },
      "execution_settings": {
        "continue_on_error": true
      },
      "id": "verify-error-displayed"
    },
    {
      "action": {
        "assert": {
          "failure_message": "Page should still be responsive after error",
          "mode": "ASSERTION_MODE_EXISTS",
          "selector": "body",
          "timeout_ms": 3000
        },
        "metadata": {
          "label": "Workflow should continue (not crash)"
        },
        "type": "ACTION_TYPE_ASSERT"
      },
      "id": "verify-workflow-continues"
    },
    {
      "action": {
        "click": {
          "selector": "[[[invalid---syntax"
        },
        "metadata": {
          "label": "Test malformed selector syntax"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "continue_on_error": true
      },
      "id": "test-malformed-selector"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait after malformed selector"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 1500
        }
      },
      "id": "wait-after-malformed"
    },
    {
      "action": {
        "evaluate": {
          "expression": "true",
          "store_result": "recoveredGracefully"
        },
        "metadata": {
          "label": "System should recover gracefully"
        },
        "type": "ACTION_TYPE_EVALUATE"
      },
      "id": "verify-graceful-recovery"
    }
  ],
  "settings": {
    "viewport_height": 1080,
    "viewport_width": 1920
  }
}
