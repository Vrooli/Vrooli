{
  "metadata": {
    "description": "Loads the demo project and opens the seeded workflow for builder interactions",
    "fixture_id": "open-demo-workflow",
    "requirements": [
      "BAS-WORKFLOW-DEMO-SEED"
    ],
    "parameters": [
      {
        "name": "projectId",
        "type": "string",
        "required": true,
        "default": "@seed/projectId",
        "description": "Project identifier containing the workflow"
      },
      {
        "name": "projectName",
        "type": "string",
        "required": true,
        "default": "@seed/projectName",
        "description": "Project containing the workflow"
      },
      {
        "name": "projectFolder",
        "type": "string",
        "required": true,
        "default": "@seed/projectFolder",
        "description": "Folder path for the seeded project"
      },
      {
        "name": "workflowId",
        "type": "string",
        "required": true,
        "default": "@seed/workflowId",
        "description": "Seed workflow identifier"
      },
      {
        "name": "workflowName",
        "type": "string",
        "required": true,
        "default": "@seed/workflowName",
        "description": "Seed workflow to open"
      }
    ],
    "reset": "none"
  },
  "nodes": [
    {
      "id": "fixture-call-open-project",
      "type": "subflow",
      "data": {
        "label": "Open Demo project",
        "workflowId": "@fixture/open-demo-project(projectId=\"${fixture.projectId}\", projectName=\"${fixture.projectName}\", projectFolder=\"${fixture.projectFolder}\")"
      }
    },
    {
      "id": "fixture-wait-for-workflows",
      "type": "wait",
      "data": {
        "label": "Wait for workflows to load",
        "selector": "@selector/workflows.card",
        "timeoutMs": 15000,
        "waitForMs": 1000,
        "waitType": "element"
      }
    },
    {
      "id": "fixture-assert-seed-workflow",
      "type": "assert",
      "data": {
        "label": "Verify seed workflow exists",
        "selector": "@selector/workflows.cardById(id=\"${fixture.workflowId}\")",
        "assertMode": "exists",
        "timeoutMs": 10000,
        "failureMessage": "Seed workflow with ID ${fixture.workflowId} should exist. Ensure seed script ran successfully."
      }
    },
    {
      "id": "fixture-click-demo-workflow",
      "type": "click",
      "data": {
        "label": "Open seeded workflow",
        "selector": "@selector/workflows.cardById(id=\"${fixture.workflowId}\")",
        "timeoutMs": 10000,
        "waitForMs": 1000
      }
    },
    {
      "id": "fixture-wait-for-builder",
      "type": "wait",
      "data": {
        "label": "Wait for builder to initialize",
        "durationMs": 2000,
        "waitType": "duration"
      }
    },
    {
      "id": "fixture-assert-builder-loaded",
      "type": "assert",
      "data": {
        "label": "Workflow builder fully initialized and interactive",
        "selector": "@selector/workflowBuilder.reactFlowReady",
        "assertMode": "exists",
        "timeoutMs": 15000,
        "failureMessage": "Workflow builder should be fully initialized and ready for automation. This indicates React Flow has completed its initialization, viewport calculations, and fitView animation."
      }
    },
    {
      "id": "fixture-assert-nodes",
      "type": "assert",
      "data": {
        "label": "Seeded nodes are visible",
        "selector": ".react-flow__node",
        "assertMode": "exists",
        "timeoutMs": 10000,
        "failureMessage": "Seeded workflow should render nodes"
      }
    }
  ],
  "edges": [
    {
      "id": "fixture-open-project",
      "source": "fixture-call-open-project",
      "target": "fixture-wait-for-workflows",
      "type": "smoothstep"
    },
    {
      "id": "fixture-edge-1",
      "source": "fixture-wait-for-workflows",
      "target": "fixture-assert-seed-workflow",
      "type": "smoothstep"
    },
    {
      "id": "fixture-edge-2",
      "source": "fixture-assert-seed-workflow",
      "target": "fixture-click-demo-workflow",
      "type": "smoothstep"
    },
    {
      "id": "fixture-edge-3",
      "source": "fixture-click-demo-workflow",
      "target": "fixture-wait-for-builder",
      "type": "smoothstep"
    },
    {
      "id": "fixture-edge-4",
      "source": "fixture-wait-for-builder",
      "target": "fixture-assert-builder-loaded",
      "type": "smoothstep"
    },
    {
      "id": "fixture-builder-ready",
      "source": "fixture-assert-builder-loaded",
      "target": "fixture-assert-nodes",
      "type": "smoothstep"
    }
  ]
}