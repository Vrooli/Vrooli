{
  "metadata": {
    "name": "open-demo-project",
    "description": "Navigates to the BAS dashboard and opens the seeded demo project",
    "labels": {
      "fixture_id": "open-demo-project",
      "reset": "none",
      "requirements_json": "[\"BAS-WORKFLOW-DEMO-SEED\"]",
      "parameters_json": "[{\"name\":\"projectId\",\"type\":\"string\",\"required\":true,\"default\":\"@seed/projectId\",\"description\":\"Project identifier created by the seed script\"},{\"name\":\"projectName\",\"type\":\"string\",\"required\":true,\"default\":\"@seed/projectName\",\"description\":\"Project name created by the seed script\"},{\"name\":\"projectFolder\",\"type\":\"string\",\"required\":true,\"default\":\"@seed/projectFolder\",\"description\":\"Seed project folder path\"}]"
    }
  },
  "settings": {},
  "nodes": [
    {
      "id": "fixture-seed-state",
      "action": {
        "type": "ACTION_TYPE_SUBFLOW",
        "subflow": {
          "workflow_path": "actions/load-seed-state.json",
          "args": {
            "projectId": { "string_value": "${@params/projectId}" },
            "projectName": { "string_value": "${@params/projectName}" },
            "projectFolder": { "string_value": "${@params/projectFolder}" },
            "workflowId": { "string_value": "${@params/workflowId}" },
            "workflowName": { "string_value": "${@params/workflowName}" }
          }
        },
        "metadata": { "label": "Load seed metadata" }
      }
    },
    {
      "id": "fixture-navigate-dashboard",
      "action": {
        "type": "ACTION_TYPE_NAVIGATE",
        "navigate": {
          "url": "",
          "destination_type": "NAVIGATE_DESTINATION_TYPE_SCENARIO",
          "scenario": "browser-automation-studio",
          "scenario_path": "/",
          "wait_until": "NAVIGATE_WAIT_EVENT_NETWORKIDLE",
          "timeout_ms": 45000
        },
        "metadata": { "label": "Open BAS dashboard" }
      },
      "execution_settings": {
        "wait_after_ms": 2000
      }
    },
    {
      "id": "fixture-dismiss-tutorial",
      "action": {
        "type": "ACTION_TYPE_SUBFLOW",
        "subflow": {
          "workflow_path": "actions/dismiss-tutorial.json"
        },
        "metadata": { "label": "Dismiss onboarding tutorial if present" }
      }
    },
    {
      "id": "fixture-click-projects-tab",
      "action": {
        "type": "ACTION_TYPE_CLICK",
        "click": { "selector": "@selector/dashboard.tabs.projects" },
        "metadata": { "label": "Navigate to Projects tab" }
      },
      "execution_settings": {
        "timeout_ms": 5000,
        "wait_after_ms": 500
      }
    },
    {
      "id": "fixture-wait-for-projects",
      "action": {
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/dashboard.newProjectButton",
          "state": "WAIT_STATE_VISIBLE",
          "timeout_ms": 15000
        },
        "metadata": { "label": "Wait for Projects tab to load" }
      },
      "execution_settings": {
        "wait_after_ms": 1000
      }
    },
    {
      "id": "fixture-assert-seed-project",
      "action": {
        "type": "ACTION_TYPE_ASSERT",
        "assert": {
          "selector": "@selector/projects.cardById(id=\"${@params/projectId}\")",
          "mode": "ASSERTION_MODE_EXISTS",
          "timeout_ms": 10000,
          "failure_message": "Seed project with ID ${@params/projectId} should exist. Ensure seed script ran successfully."
        },
        "metadata": { "label": "Verify seed project exists" }
      }
    },
    {
      "id": "fixture-click-demo",
      "action": {
        "type": "ACTION_TYPE_CLICK",
        "click": { "selector": "@selector/projects.cardById(id=\"${@params/projectId}\")" },
        "metadata": { "label": "Select demo project" }
      },
      "execution_settings": {
        "timeout_ms": 10000,
        "resilience": {
          "success_selector": "h1",
          "success_timeout_ms": 10000
        }
      }
    },
    {
      "id": "fixture-assert-demo-heading",
      "action": {
        "type": "ACTION_TYPE_ASSERT",
        "assert": {
          "selector": "h1",
          "mode": "ASSERTION_MODE_EXISTS",
          "timeout_ms": 5000,
          "failure_message": "Project header should be visible"
        },
        "metadata": { "label": "Verify project header" }
      }
    },
    {
      "id": "fixture-wait-for-project-tabs",
      "action": {
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/workflows.tab",
          "timeout_ms": 15000
        },
        "metadata": { "label": "Wait for project tabs" }
      },
      "execution_settings": {
        "wait_after_ms": 500
      }
    }
  ],
  "edges": [
    {
      "id": "fixture-edge-0",
      "source": "fixture-seed-state",
      "target": "fixture-navigate-dashboard",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "fixture-edge-1",
      "source": "fixture-navigate-dashboard",
      "target": "fixture-dismiss-tutorial",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "fixture-edge-1b",
      "source": "fixture-dismiss-tutorial",
      "target": "fixture-click-projects-tab",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "fixture-edge-1c",
      "source": "fixture-click-projects-tab",
      "target": "fixture-wait-for-projects",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "fixture-edge-1a",
      "source": "fixture-wait-for-projects",
      "target": "fixture-assert-seed-project",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "fixture-edge-1b",
      "source": "fixture-assert-seed-project",
      "target": "fixture-click-demo",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "fixture-edge-2",
      "source": "fixture-click-demo",
      "target": "fixture-assert-demo-heading",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "fixture-edge-3",
      "source": "fixture-assert-demo-heading",
      "target": "fixture-wait-for-project-tabs",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    }
  ]
}
