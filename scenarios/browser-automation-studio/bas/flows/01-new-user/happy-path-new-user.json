{
  "edges": [
    {
      "id": "e1",
      "source": "navigate-dashboard",
      "target": "capture-dashboard",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e2",
      "source": "capture-dashboard",
      "target": "wait-for-dashboard",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e3",
      "source": "wait-for-dashboard",
      "target": "click-new-project",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e4",
      "source": "click-new-project",
      "target": "wait-for-project-modal",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e5",
      "source": "wait-for-project-modal",
      "target": "generate-project-name",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e6",
      "source": "generate-project-name",
      "target": "fill-project-name",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e7",
      "source": "fill-project-name",
      "target": "expand-advanced-options",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e7b",
      "source": "expand-advanced-options",
      "target": "fill-project-description",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e8",
      "source": "fill-project-description",
      "target": "submit-project",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e9",
      "source": "submit-project",
      "target": "wait-for-project-detail",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e10",
      "source": "wait-for-project-detail",
      "target": "capture-project-created",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e11",
      "source": "capture-project-created",
      "target": "click-new-workflow",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e12",
      "source": "click-new-workflow",
      "target": "wait-for-workflow-modal",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e13",
      "source": "wait-for-workflow-modal",
      "target": "click-manual-builder",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e14",
      "source": "click-manual-builder",
      "target": "wait-for-canvas",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e15",
      "source": "wait-for-canvas",
      "target": "capture-empty-canvas",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e16",
      "source": "capture-empty-canvas",
      "target": "drag-navigate-node",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e17",
      "source": "drag-navigate-node",
      "target": "wait-after-drag",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e18",
      "source": "wait-after-drag",
      "target": "click-navigate-node",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e19",
      "source": "click-navigate-node",
      "target": "wait-for-properties-panel",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e20",
      "source": "wait-for-properties-panel",
      "target": "fill-navigate-url",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e21",
      "source": "fill-navigate-url",
      "target": "drag-screenshot-node",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e22",
      "source": "drag-screenshot-node",
      "target": "wait-after-screenshot-drag",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e23",
      "source": "wait-after-screenshot-drag",
      "target": "capture-workflow-built",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e24",
      "source": "capture-workflow-built",
      "target": "save-workflow",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e25",
      "source": "save-workflow",
      "target": "wait-for-save",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e26",
      "source": "wait-for-save",
      "target": "click-execute-button",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e27",
      "source": "click-execute-button",
      "target": "wait-for-execution-start",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e28",
      "source": "wait-for-execution-start",
      "target": "capture-execution-in-progress",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e29",
      "source": "capture-execution-in-progress",
      "target": "wait-for-execution-complete",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e30",
      "source": "wait-for-execution-complete",
      "target": "navigate-to-project",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e31",
      "source": "navigate-to-project",
      "target": "click-executions-tab",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e32",
      "source": "click-executions-tab",
      "target": "wait-for-executions-list",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e33",
      "source": "wait-for-executions-list",
      "target": "assert-execution-exists",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e34",
      "source": "assert-execution-exists",
      "target": "capture-execution-history",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e35",
      "source": "capture-execution-history",
      "target": "click-first-execution",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e36",
      "source": "click-first-execution",
      "target": "wait-for-execution-viewer",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e37",
      "source": "wait-for-execution-viewer",
      "target": "assert-replay-tab-exists",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e38",
      "source": "assert-replay-tab-exists",
      "target": "click-replay-tab",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e39",
      "source": "click-replay-tab",
      "target": "wait-for-replay-player",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e40",
      "source": "wait-for-replay-player",
      "target": "assert-replay-screenshot-exists",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    },
    {
      "id": "e41",
      "source": "assert-replay-screenshot-exists",
      "target": "capture-final-replay",
      "type": "WORKFLOW_EDGE_TYPE_SMOOTHSTEP"
    }
  ],
  "metadata": {
    "description": "Complete new user journey: Create project → Create workflow → Execute → View results. This validates the primary use case and marketing demo flow.",
    "labels": {
      "reset": "full"
    },
    "version": "1"
  },
  "nodes": [
    {
      "action": {
        "metadata": {
          "label": "Open BAS Dashboard"
        },
        "navigate": {
          "destination_type": "NAVIGATE_DESTINATION_TYPE_SCENARIO",
          "scenario": "browser-automation-studio",
          "scenario_path": "/",
          "timeout_ms": 45000,
          "wait_until": "NAVIGATE_WAIT_EVENT_NETWORKIDLE"
        },
        "type": "ACTION_TYPE_NAVIGATE"
      },
      "execution_settings": {
        "wait_after_ms": 2000
      },
      "id": "navigate-dashboard"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture initial dashboard state"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "capture-dashboard"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for projects grid to load"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/projects.grid",
          "timeout_ms": 10000
        }
      },
      "execution_settings": {
        "wait_after_ms": 1000
      },
      "id": "wait-for-dashboard"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/dashboard.newProjectButton"
        },
        "metadata": {
          "label": "Click New Project button"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 1500
      },
      "id": "click-new-project"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for project creation modal"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/dialogs.project.root",
          "timeout_ms": 10000
        }
      },
      "execution_settings": {
        "wait_after_ms": 1000
      },
      "id": "wait-for-project-modal"
    },
    {
      "action": {
        "evaluate": {
          "expression": "`E2E Test Project ${Date.now()}`",
          "store_result": "projectName"
        },
        "metadata": {
          "label": "Generate unique project name"
        },
        "type": "ACTION_TYPE_EVALUATE"
      },
      "id": "generate-project-name"
    },
    {
      "action": {
        "input": {
          "clear_first": true,
          "selector": "@selector/dialogs.project.nameInput",
          "value": "${@store/projectName}"
        },
        "metadata": {
          "label": "Enter project name"
        },
        "type": "ACTION_TYPE_INPUT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "fill-project-name"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/dialogs.project.advancedOptionsToggle"
        },
        "metadata": {
          "label": "Expand advanced options"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 300
      },
      "id": "expand-advanced-options"
    },
    {
      "action": {
        "input": {
          "clear_first": true,
          "selector": "@selector/dialogs.project.descriptionInput",
          "value": "End-to-end test validating new user onboarding flow"
        },
        "metadata": {
          "label": "Enter project description"
        },
        "type": "ACTION_TYPE_INPUT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "fill-project-description"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/dialogs.project.submitButton"
        },
        "metadata": {
          "label": "Submit project creation form"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 2000
      },
      "id": "submit-project"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for project detail page to load"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/workflows.newButton",
          "timeout_ms": 10000
        }
      },
      "execution_settings": {
        "wait_after_ms": 1500
      },
      "id": "wait-for-project-detail"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture project detail page"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "capture-project-created"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/workflows.newButton"
        },
        "metadata": {
          "label": "Click New Workflow button"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 1500
      },
      "id": "click-new-workflow"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for AI prompt modal to appear"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 2000
        }
      },
      "id": "wait-for-workflow-modal"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/ai.modal.switchToManualButton"
        },
        "metadata": {
          "label": "Switch to manual builder (skip AI for deterministic test)"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "continue_on_error": true,
        "wait_after_ms": 2000
      },
      "id": "click-manual-builder"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for workflow builder canvas"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/workflowBuilder.code.modeButton",
          "timeout_ms": 15000
        }
      },
      "execution_settings": {
        "wait_after_ms": 2000
      },
      "id": "wait-for-canvas"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture empty workflow canvas"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "capture-empty-canvas"
    },
    {
      "action": {
        "drag_drop": {
          "source_selector": "@selector/nodePalette.cards.navigate",
          "target_selector": ".react-flow__pane",
          "timeout_ms": 10000
        },
        "metadata": {
          "label": "Add Navigate node to canvas"
        },
        "type": "ACTION_TYPE_DRAG_DROP"
      },
      "execution_settings": {
        "wait_after_ms": 3000
      },
      "id": "drag-navigate-node"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for React Flow layout to stabilize"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 3000
        }
      },
      "id": "wait-after-drag"
    },
    {
      "action": {
        "click": {
          "selector": ".react-flow__node[data-node-type=\"navigate\"]"
        },
        "metadata": {
          "label": "Select Navigate node for configuration"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "continue_on_error": true,
        "wait_after_ms": 2000
      },
      "id": "click-navigate-node"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for properties panel to open"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 2000
        }
      },
      "id": "wait-for-properties-panel"
    },
    {
      "action": {
        "input": {
          "clear_first": true,
          "selector": "@selector/nodeProperties.urlInput",
          "value": "https://example.com"
        },
        "metadata": {
          "label": "Set navigate URL to example.com"
        },
        "type": "ACTION_TYPE_INPUT"
      },
      "execution_settings": {
        "continue_on_error": true,
        "wait_after_ms": 500
      },
      "id": "fill-navigate-url"
    },
    {
      "action": {
        "drag_drop": {
          "source_selector": "@selector/nodePalette.cards.screenshot",
          "target_selector": ".react-flow__pane",
          "timeout_ms": 10000
        },
        "metadata": {
          "label": "Add Screenshot node to canvas"
        },
        "type": "ACTION_TYPE_DRAG_DROP"
      },
      "execution_settings": {
        "wait_after_ms": 3000
      },
      "id": "drag-screenshot-node"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for React Flow layout to stabilize"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 3000
        }
      },
      "id": "wait-after-screenshot-drag"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture completed workflow"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "capture-workflow-built"
    },
    {
      "action": {
        "keyboard": {
          "keys": [
            "s"
          ],
          "modifiers": [
            "KEYBOARD_MODIFIER_CTRL"
          ]
        },
        "metadata": {
          "label": "Save workflow (Ctrl+S)"
        },
        "type": "ACTION_TYPE_KEYBOARD"
      },
      "execution_settings": {
        "continue_on_error": true,
        "wait_after_ms": 2000
      },
      "id": "save-workflow"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for autosave to complete"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 2000
        }
      },
      "id": "wait-for-save"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/header.buttons.execute"
        },
        "metadata": {
          "label": "Execute workflow from header"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 2000
      },
      "id": "click-execute-button"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for execution to start"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 3000
        }
      },
      "id": "wait-for-execution-start"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture execution in progress"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "capture-execution-in-progress"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for execution to complete (max 30s)"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "duration_ms": 30000
        }
      },
      "id": "wait-for-execution-complete"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/breadcrumbs.project"
        },
        "metadata": {
          "label": "Navigate back to project detail"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "continue_on_error": true,
        "wait_after_ms": 2000
      },
      "id": "navigate-to-project"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/projects.tabs.executions"
        },
        "metadata": {
          "label": "Switch to Executions tab"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 2000
      },
      "id": "click-executions-tab"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for executions list to load"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/executions.list.card:not([data-dedupe=\"wait\"])",
          "timeout_ms": 10000
        }
      },
      "execution_settings": {
        "wait_after_ms": 1000
      },
      "id": "wait-for-executions-list"
    },
    {
      "action": {
        "assert": {
          "failure_message": "Execution should appear in history after workflow run",
          "mode": "ASSERTION_MODE_EXISTS",
          "selector": "@selector/executions.list.card:not([data-dedupe=\"assert\"])",
          "timeout_ms": 5000
        },
        "metadata": {
          "label": "Verify execution appears in history"
        },
        "type": "ACTION_TYPE_ASSERT"
      },
      "id": "assert-execution-exists"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture execution history"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "capture-execution-history"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/executions.list.card:first-of-type"
        },
        "metadata": {
          "label": "Open first execution details"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 2000
      },
      "id": "click-first-execution"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for execution viewer to load"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/executions.viewer.root",
          "timeout_ms": 10000
        }
      },
      "execution_settings": {
        "wait_after_ms": 1500
      },
      "id": "wait-for-execution-viewer"
    },
    {
      "action": {
        "assert": {
          "failure_message": "Replay tab should be visible in execution viewer",
          "mode": "ASSERTION_MODE_EXISTS",
          "selector": "@selector/executions.tabs.replay",
          "timeout_ms": 5000
        },
        "metadata": {
          "label": "Verify Replay tab is available"
        },
        "type": "ACTION_TYPE_ASSERT"
      },
      "id": "assert-replay-tab-exists"
    },
    {
      "action": {
        "click": {
          "selector": "@selector/executions.tabs.replay /*dup-1*/"
        },
        "metadata": {
          "label": "Open Replay tab"
        },
        "type": "ACTION_TYPE_CLICK"
      },
      "execution_settings": {
        "wait_after_ms": 2000
      },
      "id": "click-replay-tab"
    },
    {
      "action": {
        "metadata": {
          "label": "Wait for replay player to load"
        },
        "type": "ACTION_TYPE_WAIT",
        "wait": {
          "selector": "@selector/replay.player, @selector/replay.timeline",
          "timeout_ms": 10000
        }
      },
      "execution_settings": {
        "wait_after_ms": 1000
      },
      "id": "wait-for-replay-player"
    },
    {
      "action": {
        "assert": {
          "failure_message": "Replay should display execution screenshots",
          "mode": "ASSERTION_MODE_EXISTS",
          "selector": "@selector/replay.screenshot",
          "timeout_ms": 10000
        },
        "metadata": {
          "label": "Verify replay screenshots are displayed"
        },
        "type": "ACTION_TYPE_ASSERT"
      },
      "id": "assert-replay-screenshot-exists"
    },
    {
      "action": {
        "metadata": {
          "label": "Capture final replay view - SUCCESS!"
        },
        "screenshot": {
          "full_page": true
        },
        "type": "ACTION_TYPE_SCREENSHOT"
      },
      "execution_settings": {
        "wait_after_ms": 500
      },
      "id": "capture-final-replay"
    }
  ],
  "settings": {
    "viewport_height": 900,
    "viewport_width": 1440
  }
}
