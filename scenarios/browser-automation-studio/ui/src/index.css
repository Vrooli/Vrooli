@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Dark theme (default) - RGB values for Tailwind opacity support */
  :root,
  [data-theme="dark"] {
    --flow-bg: 13 14 20;
    --flow-bg-secondary: 17 19 24;
    --flow-node: 26 29 41;
    --flow-node-hover: 37 40 55;
    --flow-edge: 74 85 104;
    --flow-accent: 59 130 246;
    --flow-accent-hover: 37 99 235;
    --flow-text: 243 244 246;
    --flow-text-secondary: 156 163 175;
    --flow-text-muted: 107 114 128;
    --flow-border: 55 65 81;
    --flow-border-light: 75 85 99;
    --flow-success: 34 197 94;
    --flow-warning: 245 158 11;
    --flow-error: 239 68 68;
    --flow-surface: 31 41 55;
    --flow-surface-hover: 55 65 81;
    --scrollbar-bg: 13 14 20;
    --scrollbar-thumb: 55 65 81;
    --scrollbar-thumb-hover: 75 85 99;

    /* Theme-aware gray scale (maps to Tailwind's gray-*) */
    --gray-50: 249 250 251;
    --gray-100: 243 244 246;
    --gray-200: 229 231 235;
    --gray-300: 209 213 219;
    --gray-400: 156 163 175;
    --gray-500: 107 114 128;
    --gray-600: 75 85 99;
    --gray-700: 55 65 81;
    --gray-800: 31 41 55;
    --gray-900: 17 24 39;
    --gray-950: 3 7 18;

    /* White stays white for text in dark mode */
    --color-white: 255 255 255;
    /* Black stays black for overlays in dark mode */
    --color-black: 0 0 0;
  }

  /* Light theme - RGB values for Tailwind opacity support */
  /* Uses subtle purple tint for brand cohesion and warmth */
  [data-theme="light"] {
    --flow-bg: 249 248 252;
    --flow-bg-secondary: 244 242 249;
    /* Node surfaces should go light in light mode */
    --flow-node: 255 255 255;
    --flow-node-hover: 242 244 248;
    --flow-edge: 148 146 168;
    --flow-accent: 99 102 241;
    --flow-accent-hover: 79 70 229;
    --flow-text: 30 27 46;
    --flow-text-secondary: 71 69 96;
    --flow-text-muted: 113 111 138;
    --flow-border: 214 211 228;
    --flow-border-light: 232 230 242;
    --flow-success: 22 163 74;
    --flow-warning: 217 119 6;
    --flow-error: 220 38 38;
    --flow-surface: 244 246 252;
    --flow-surface-hover: 238 241 249;
    --scrollbar-bg: 249 248 252;
    --scrollbar-thumb: 214 211 228;
    --scrollbar-thumb-hover: 168 164 192;

    /* Light theme: invert gray scale semantically
       Dark backgrounds become light, light text becomes dark */
    --gray-50: 3 7 18;
    --gray-100: 17 24 39;
    --gray-200: 31 41 55;
    --gray-300: 55 65 81;
    --gray-400: 75 85 99;
    --gray-500: 107 114 128;
    --gray-600: 156 163 175;
    --gray-700: 203 213 225;
    --gray-800: 226 232 240;
    --gray-900: 241 245 249;
    --gray-950: 248 250 252;

    /* White becomes dark for text in light mode */
    --color-white: 15 23 42;
    /* Black stays black for overlays (or slightly lighter for better aesthetics) */
    --color-black: 0 0 0;
  }

  /* High contrast mode */
  [data-high-contrast="true"] {
    --flow-text: 255 255 255;
    --flow-text-secondary: 229 231 235;
    --flow-text-muted: 209 213 219;
    --flow-border: 107 114 128;
    --flow-accent: 96 165 250;
  }

  [data-theme="light"][data-high-contrast="true"] {
    --flow-text: 0 0 0;
    --flow-text-secondary: 31 41 55;
    --flow-text-muted: 55 65 81;
    --flow-border: 55 65 81;
    --flow-accent: 29 78 216;
  }

  /* Font size scaling */
  :root,
  [data-font-size="medium"] {
    --font-size-base: 1rem;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --spacing-scale: 1;
  }

  [data-font-size="small"] {
    --font-size-base: 0.875rem;
    --font-size-xs: 0.625rem;
    --font-size-sm: 0.75rem;
    --font-size-lg: 1rem;
    --font-size-xl: 1.125rem;
    --font-size-2xl: 1.25rem;
    --spacing-scale: 0.9;
  }

  [data-font-size="large"] {
    --font-size-base: 1.125rem;
    --font-size-xs: 0.875rem;
    --font-size-sm: 1rem;
    --font-size-lg: 1.25rem;
    --font-size-xl: 1.5rem;
    --font-size-2xl: 1.75rem;
    --spacing-scale: 1.1;
  }

  /* Font family */
  [data-font-family="mono"] {
    --font-family-base: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
  }

  [data-font-family="sans"] {
    --font-family-base: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }

  [data-font-family="system"] {
    --font-family-base: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }

  /* Reduced motion */
  [data-reduced-motion="true"],
  [data-reduced-motion="true"] * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Compact mode - reduces spacing throughout the UI */
  :root {
    /* Base spacing values in rem that scale with compact mode */
    --space-1: 0.25rem;  /* 4px */
    --space-2: 0.5rem;   /* 8px */
    --space-3: 0.75rem;  /* 12px */
    --space-4: 1rem;     /* 16px */
    --space-5: 1.25rem;  /* 20px */
    --space-6: 1.5rem;   /* 24px */
    --space-8: 2rem;     /* 32px */
    /* Component-specific spacing */
    --card-padding: var(--space-4);
    --section-gap: var(--space-6);
    --item-gap: var(--space-3);
  }

  [data-compact="true"] {
    --spacing-scale: 0.85;
    /* Tighter spacing for compact mode */
    --space-1: 0.1875rem;  /* 3px */
    --space-2: 0.375rem;   /* 6px */
    --space-3: 0.5rem;     /* 8px */
    --space-4: 0.75rem;    /* 12px */
    --space-5: 1rem;       /* 16px */
    --space-6: 1.25rem;    /* 20px */
    --space-8: 1.5rem;     /* 24px */
    /* Component-specific spacing */
    --card-padding: var(--space-3);
    --section-gap: var(--space-4);
    --item-gap: var(--space-2);
  }

  * {
    border-color: rgb(var(--flow-border));
  }

  body {
    background-color: rgb(var(--flow-bg));
    color: rgb(var(--flow-text));
    font-family: var(--font-family-base, ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace);
    font-size: var(--font-size-base);
  }

  /* Light mode subtle dot pattern for texture */
  [data-theme="light"] body {
    background-image: radial-gradient(
      circle at 1px 1px,
      rgb(147 51 234 / 0.03) 1px,
      transparent 0
    );
    background-size: 24px 24px;
  }

  /* Ensure dark mode has no pattern (clean look) */
  [data-theme="dark"] body {
    background-image: none;
  }
}

@layer components {
  .workflow-node {
    @apply bg-flow-node border border-gray-700 rounded-lg min-w-[200px] shadow-lg hover:shadow-xl transition-all hover:border-flow-accent;
    padding: var(--space-3);
  }

  .workflow-node.selected {
    @apply border-flow-accent shadow-xl shadow-blue-500/20;
  }

  .node-handle {
    @apply w-3 h-3 bg-flow-accent border-2 border-flow-bg rounded-full;
  }

  .terminal-output {
    @apply bg-terminal-bg text-terminal-text rounded-lg font-mono text-sm overflow-auto;
    padding: var(--space-4);
    max-height: 400px;
    white-space: pre-wrap;
    word-break: break-word;
  }

  .screenshot-viewer {
    @apply bg-gray-900 rounded-lg overflow-hidden;
  }

  .workflow-toolbar {
    @apply bg-flow-node/90 backdrop-blur-sm border border-gray-700 rounded-lg flex;
    padding: var(--space-2);
    gap: var(--space-2);
  }

  .toolbar-button {
    @apply rounded-md bg-flow-bg hover:bg-flow-node-hover transition-colors text-gray-400 hover:text-white;
    padding: var(--space-2);
  }

  .toolbar-button.active {
    @apply bg-flow-accent text-white;
  }

  .folder-tree {
    @apply bg-flow-node rounded-lg;
    padding: var(--space-4);
  }

  .folder-item {
    @apply flex items-center rounded hover:bg-flow-node-hover cursor-pointer transition-colors;
    gap: var(--space-2);
    padding: var(--space-1) var(--space-2);
  }

  .folder-item.selected {
    @apply bg-flow-accent/20 text-flow-accent;
  }
}

.react-flow__node.selected {
  outline: none !important;
}

.react-flow__edge.selected .react-flow__edge-path {
  stroke: var(--flow-accent) !important;
  stroke-width: 2 !important;
}

.react-flow__edge-path {
  stroke: var(--flow-edge);
  stroke-width: 1.5;
}

.react-flow__controls {
  @apply bg-flow-node border border-gray-700 rounded-lg;
}

.react-flow__controls-button {
  @apply bg-flow-bg border-gray-700 text-gray-400 hover:bg-flow-node-hover hover:text-white;
}

.react-flow__minimap {
  @apply bg-flow-node border border-gray-700 rounded-lg;
}

.react-flow__minimap-mask {
  fill: var(--flow-accent);
  opacity: 0.2;
}

.split-pane-divider {
  @apply bg-gray-800 hover:bg-gray-700 transition-colors;
  width: 3px !important;
  cursor: col-resize;
}

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background-color: rgb(var(--scrollbar-bg));
}

::-webkit-scrollbar-thumb {
  background-color: rgb(var(--scrollbar-thumb));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: rgb(var(--scrollbar-thumb-hover));
}

@keyframes cursor-click-pulse {
  0% {
    transform: scale(0.3);
    opacity: 0.7;
  }
  60% {
    transform: scale(1);
    opacity: 0.3;
  }
  100% {
    transform: scale(1.25);
    opacity: 0;
  }
}

.cursor-click-pulse {
  animation: cursor-click-pulse 0.6s ease-out forwards;
}

@keyframes cursor-click-ripple {
  0% {
    transform: scale(0.9);
    opacity: 0.5;
  }
  70% {
    transform: scale(1.4);
    opacity: 0.18;
  }
  100% {
    transform: scale(1.6);
    opacity: 0;
  }
}

.cursor-click-ripple {
  animation: cursor-click-ripple 0.75s ease-out forwards;
}

/* Enhanced micro-interactions */
@layer utilities {
  /* Smooth transitions for interactive elements */
  .transition-micro {
    @apply transition-all duration-150 ease-out;
  }

  /* Focus ring for accessibility */
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-flow-accent/60 focus-visible:ring-offset-2 focus-visible:ring-offset-flow-bg;
  }

  /* Card hover effect */
  .hover-card {
    @apply hover:border-flow-accent/50 hover:shadow-lg hover:shadow-blue-500/10 transition-all duration-200;
  }

  /* Button press effect */
  .btn-press {
    @apply active:scale-[0.98] transition-transform duration-75;
  }
}

/* Improved button states */
@layer components {
  .btn-primary {
    @apply bg-flow-accent hover:bg-blue-600 active:bg-blue-700 text-white rounded-lg font-medium transition-all duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-flow-accent/60 focus-visible:ring-offset-2 focus-visible:ring-offset-flow-bg disabled:opacity-50 disabled:cursor-not-allowed;
    padding: var(--space-2) var(--space-4);
  }

  .btn-secondary {
    @apply bg-flow-node hover:bg-flow-node-hover active:bg-gray-700 text-gray-200 rounded-lg font-medium border border-gray-700 transition-all duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-flow-accent/60 focus-visible:ring-offset-2 focus-visible:ring-offset-flow-bg disabled:opacity-50 disabled:cursor-not-allowed;
    padding: var(--space-2) var(--space-4);
  }

  .btn-ghost {
    @apply hover:bg-gray-800 active:bg-gray-700 text-gray-400 hover:text-white rounded-lg transition-all duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-flow-accent/60 disabled:opacity-50 disabled:cursor-not-allowed;
    padding: var(--space-2) var(--space-3);
  }

  /* Input focus states */
  .input-field {
    @apply bg-flow-node border border-gray-700 rounded-lg text-white placeholder-gray-500 transition-all duration-150 focus:outline-none focus:border-flow-accent focus:ring-2 focus:ring-flow-accent/30 disabled:opacity-50 disabled:cursor-not-allowed;
    padding: var(--space-2) var(--space-3);
  }

  /* Card styles */
  .card {
    @apply bg-flow-node border border-gray-700 rounded-lg transition-all duration-200;
    padding: var(--card-padding);
  }

  .card-interactive {
    @apply card cursor-pointer hover:border-flow-accent/50 hover:shadow-lg hover:shadow-blue-500/10;
  }

  /* Gradient cards - theme-aware */
  .card-gradient-purple {
    background: linear-gradient(to bottom right,
      rgb(88 28 135 / 0.3),    /* purple-900/30 */
      rgb(30 58 138 / 0.2),    /* blue-900/20 */
      rgb(17 24 39)            /* gray-900 dark */
    );
  }

  .card-gradient-green {
    background: linear-gradient(to right,
      rgb(20 83 45 / 0.2),     /* green-900/20 */
      rgb(6 78 59 / 0.15),     /* emerald-900/15 */
      rgb(17 24 39)            /* gray-900 dark */
    );
  }

  /* Light mode gradient overrides - uses purple-tinted base colors */
  [data-theme="light"] .card-gradient-purple {
    background: linear-gradient(to bottom right,
      rgb(147 51 234 / 0.1),   /* purple-600/10 - visible purple tint */
      rgb(99 102 241 / 0.06),  /* indigo-500/6 - brand accent tint */
      rgb(253 252 255)         /* purple-tinted white base */
    );
    box-shadow: 0 1px 3px rgb(147 51 234 / 0.08);
  }

  [data-theme="light"] .card-gradient-green {
    background: linear-gradient(to right,
      rgb(34 197 94 / 0.1),    /* green-500/10 - visible green tint */
      rgb(16 185 129 / 0.06),  /* emerald-500/6 - subtle emerald tint */
      rgb(253 252 255)         /* purple-tinted white base */
    );
    box-shadow: 0 1px 3px rgb(34 197 94 / 0.08);
  }

  /* Light mode card elevation - adds subtle depth */
  [data-theme="light"] .bg-flow-surface {
    box-shadow: 0 1px 3px rgb(99 102 241 / 0.06),
                0 1px 2px rgb(0 0 0 / 0.04);
  }

  [data-theme="light"] .bg-flow-node {
    box-shadow: 0 1px 2px rgb(99 102 241 / 0.05);
  }
}

/* Animation keyframes */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

.animate-fade-in-up {
  animation: fade-in-up 0.3s ease-out;
}

.animate-scale-in {
  animation: scale-in 0.2s ease-out;
}

/* Skeleton wave animation */
@keyframes skeleton-wave {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.skeleton-wave {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.05),
    transparent
  );
  background-size: 200px 100%;
  animation: skeleton-wave 1.5s ease-in-out infinite;
}

/* ============================================
   WELCOME HERO STYLES
   ============================================ */

/* Hero gradient text */
.hero-gradient-text {
  background: linear-gradient(
    135deg,
    rgb(96 165 250) 0%,      /* blue-400 */
    rgb(139 92 246) 50%,     /* violet-500 */
    rgb(59 130 246) 100%     /* blue-500 */
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  background-size: 200% 200%;
  animation: gradient-shift 8s ease-in-out infinite;
}

@keyframes gradient-shift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

/* Light mode gradient text */
[data-theme="light"] .hero-gradient-text {
  background: linear-gradient(
    135deg,
    rgb(37 99 235) 0%,       /* blue-600 */
    rgb(124 58 237) 50%,     /* violet-600 */
    rgb(79 70 229) 100%      /* indigo-600 */
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* Hero animated background - dot grid */
.hero-background {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.hero-background::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(
    circle at 1px 1px,
    rgb(59 130 246 / 0.15) 1px,
    transparent 0
  );
  background-size: 40px 40px;
  mask-image: radial-gradient(
    ellipse 80% 50% at 50% 0%,
    black 0%,
    transparent 100%
  );
  -webkit-mask-image: radial-gradient(
    ellipse 80% 50% at 50% 0%,
    black 0%,
    transparent 100%
  );
}

.hero-background::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse 60% 40% at 50% 0%,
    rgb(59 130 246 / 0.08) 0%,
    transparent 70%
  );
}

/* Light mode hero background */
[data-theme="light"] .hero-background::before {
  background-image: radial-gradient(
    circle at 1px 1px,
    rgb(99 102 241 / 0.2) 1px,
    transparent 0
  );
}

[data-theme="light"] .hero-background::after {
  background: radial-gradient(
    ellipse 60% 40% at 50% 0%,
    rgb(99 102 241 / 0.1) 0%,
    transparent 70%
  );
}

/* Hero primary button with glow */
.hero-button-primary {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.875rem 1.75rem;
  font-weight: 600;
  font-size: 1rem;
  color: white;
  background: linear-gradient(
    135deg,
    rgb(59 130 246) 0%,
    rgb(99 102 241) 100%
  );
  border-radius: 0.75rem;
  border: none;
  cursor: pointer;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow:
    0 4px 15px rgb(59 130 246 / 0.3),
    0 0 0 1px rgb(59 130 246 / 0.1);
}

.hero-button-primary:hover {
  transform: translateY(-2px);
  box-shadow:
    0 8px 25px rgb(59 130 246 / 0.4),
    0 0 0 1px rgb(59 130 246 / 0.2);
}

.hero-button-primary:active {
  transform: translateY(0);
}

.hero-button-glow {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transform: translateX(-100%);
  transition: transform 0.5s ease;
}

.hero-button-primary:hover .hero-button-glow {
  transform: translateX(100%);
}

/* Hero secondary button */
.hero-button-secondary {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.875rem 1.75rem;
  font-weight: 600;
  font-size: 1rem;
  color: rgb(var(--flow-text));
  background: rgb(var(--flow-surface));
  border-radius: 0.75rem;
  border: 1px solid rgb(var(--flow-border));
  cursor: pointer;
  transition: all 0.3s ease;
}

.hero-button-secondary:hover {
  background: rgb(var(--flow-surface-hover));
  border-color: rgb(var(--flow-accent));
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgb(0 0 0 / 0.1);
}

.hero-button-secondary:active {
  transform: translateY(0);
}

/* Radial gradient utility */
.bg-gradient-radial {
  background: radial-gradient(var(--tw-gradient-stops));
}

/* Slow pulse animations */
@keyframes pulse-slow {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

@keyframes pulse-slower {
  0%, 100% {
    opacity: 0.4;
    transform: scale(1);
  }
  50% {
    opacity: 0.6;
    transform: scale(1.1);
  }
}

.animate-pulse-slow {
  animation: pulse-slow 3s ease-in-out infinite;
}

.animate-pulse-slower {
  animation: pulse-slower 4s ease-in-out infinite;
}

/* Draw line animation for workflow preview */
@keyframes draw-line {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-draw-line {
  animation: draw-line 0.4s ease-out both;
}

/* Workflow preview node entrance */
.workflow-preview-node {
  animation: fade-in-up 0.5s ease-out both;
}

.workflow-connection {
  animation: draw-line 0.3s ease-out both;
}

/* Feature card styles */
.feature-card {
  animation: fade-in-up 0.5s ease-out both;
}

/* Enhanced fade-in-up with fill mode for staggered animations */
.animate-fade-in-up {
  animation: fade-in-up 0.5s ease-out both;
}

/* Stats counter animation */
@keyframes count-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Floating animation for decorative elements */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* Shimmer effect for loading states */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.animate-shimmer {
  background: linear-gradient(
    90deg,
    rgb(var(--flow-node)) 0%,
    rgb(var(--flow-node-hover)) 50%,
    rgb(var(--flow-node)) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 2s ease-in-out infinite;
}

/* Glow ring animation */
@keyframes glow-ring {
  0%, 100% {
    box-shadow:
      0 0 20px rgb(59 130 246 / 0.3),
      0 0 40px rgb(59 130 246 / 0.1);
  }
  50% {
    box-shadow:
      0 0 30px rgb(59 130 246 / 0.4),
      0 0 60px rgb(59 130 246 / 0.2);
  }
}

.animate-glow-ring {
  animation: glow-ring 3s ease-in-out infinite;
}

/* Border gradient animation */
@keyframes border-flow {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.border-gradient-animated {
  position: relative;
  background: rgb(var(--flow-node));
  border-radius: 0.75rem;
}

.border-gradient-animated::before {
  content: '';
  position: absolute;
  inset: -1px;
  background: linear-gradient(
    90deg,
    rgb(59 130 246),
    rgb(139 92 246),
    rgb(59 130 246)
  );
  background-size: 200% 100%;
  border-radius: inherit;
  z-index: -1;
  animation: border-flow 3s ease-in-out infinite;
}

/* Scale up animation on hover */
.hover-scale-up {
  transition: transform 0.3s ease;
}

.hover-scale-up:hover {
  transform: scale(1.02);
}

/* Staggered children animations */
.stagger-children > * {
  animation: fade-in-up 0.5s ease-out both;
}

.stagger-children > *:nth-child(1) { animation-delay: 0ms; }
.stagger-children > *:nth-child(2) { animation-delay: 100ms; }
.stagger-children > *:nth-child(3) { animation-delay: 200ms; }
.stagger-children > *:nth-child(4) { animation-delay: 300ms; }
.stagger-children > *:nth-child(5) { animation-delay: 400ms; }
.stagger-children > *:nth-child(6) { animation-delay: 500ms; }

/* ============================================
   FEATURE SHOWCASE ANIMATIONS
   ============================================ */

/* Scale-in animation for generated nodes */
@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scale-in 0.3s ease-out both;
}

/* Slide-in from right for recording actions */
@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out both;
}

/* Progress bar fill animation for navigation dots */
@keyframes progress-bar {
  from {
    transform: scaleX(0);
  }
  to {
    transform: scaleX(1);
  }
}

.animate-progress-bar {
  animation: progress-bar linear both;
}

/* Scale utility for transitions */
.scale-98 {
  transform: scale(0.98);
}

/* Feature card active/highlighted state */
.feature-card-active {
  position: relative;
}

.feature-card-active::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: 0.875rem;
  padding: 1px;
  background: linear-gradient(
    135deg,
    rgb(var(--flow-accent)) 0%,
    rgb(139 92 246) 50%,
    rgb(var(--flow-accent)) 100%
  );
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.feature-card-active.is-active::before {
  opacity: 1;
}

.feature-card-active.is-active > div {
  border-color: transparent;
  box-shadow:
    0 0 20px rgb(var(--flow-accent) / 0.15),
    0 4px 20px rgb(0 0 0 / 0.1);
}

/* Purple accent for AI-Powered card */
.feature-card-active.accent-purple.is-active::before {
  background: linear-gradient(
    135deg,
    rgb(168 85 247) 0%,
    rgb(236 72 153) 50%,
    rgb(168 85 247) 100%
  );
}

.feature-card-active.accent-purple.is-active > div {
  box-shadow:
    0 0 20px rgb(168 85 247 / 0.2),
    0 4px 20px rgb(0 0 0 / 0.1);
}

/* Red accent for Record Mode card */
.feature-card-active.accent-red.is-active::before {
  background: linear-gradient(
    135deg,
    rgb(239 68 68) 0%,
    rgb(249 115 22) 50%,
    rgb(239 68 68) 100%
  );
}

.feature-card-active.accent-red.is-active > div {
  box-shadow:
    0 0 20px rgb(239 68 68 / 0.2),
    0 4px 20px rgb(0 0 0 / 0.1);
}

/* Blue accent for Visual Builder card */
.feature-card-active.accent-blue.is-active::before {
  background: linear-gradient(
    135deg,
    rgb(59 130 246) 0%,
    rgb(6 182 212) 50%,
    rgb(59 130 246) 100%
  );
}

.feature-card-active.accent-blue.is-active > div {
  box-shadow:
    0 0 20px rgb(59 130 246 / 0.2),
    0 4px 20px rgb(0 0 0 / 0.1);
}

/* Green accent for Test & Monitor card */
.feature-card-active.accent-green.is-active::before {
  background: linear-gradient(
    135deg,
    rgb(34 197 94) 0%,
    rgb(16 185 129) 50%,
    rgb(34 197 94) 100%
  );
}

.feature-card-active.accent-green.is-active > div {
  box-shadow:
    0 0 20px rgb(34 197 94 / 0.2),
    0 4px 20px rgb(0 0 0 / 0.1);
}

/* Typing cursor blink */
@keyframes cursor-blink {
  0%, 50% {
    opacity: 1;
  }
  51%, 100% {
    opacity: 0;
  }
}

.animate-cursor-blink {
  animation: cursor-blink 1s step-end infinite;
}
