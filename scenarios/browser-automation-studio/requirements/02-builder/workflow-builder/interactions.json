{
  "_metadata": {
    "description": "Workflow builder canvas interaction requirements",
    "last_validated_at": "2025-11-15T00:00:00.000Z",
    "auto_sync_enabled": true,
    "schema_version": "1.0.0"
  },
  "requirements": [
    {
      "id": "BAS-BUILDER-ADD-NODE",
      "category": "workflow.builder",
      "prd_ref": "Workflow Builder > Canvas Interactions",
      "title": "Add node from palette to canvas via drag-and-drop",
      "description": "Users can drag node types from the palette and drop them onto the workflow canvas to add new workflow steps",
      "status": "complete",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/builder-add-node-from-palette.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates drag-and-drop from node palette to canvas with proper positioning"
        }
      ]
    },
    {
      "id": "BAS-BUILDER-CREATE-CONNECTION",
      "category": "workflow.builder",
      "prd_ref": "Workflow Builder > Canvas Interactions",
      "title": "Create connections between workflow nodes",
      "description": "Users can connect workflow nodes by dragging from one node's output handle to another node's input handle, establishing execution order",
      "status": "complete",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/builder-create-connection.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates edge creation between nodes using React Flow connection handles"
        }
      ]
    },
    {
      "id": "BAS-BUILDER-DELETE-NODE",
      "category": "workflow.builder",
      "prd_ref": "Workflow Builder > Canvas Interactions",
      "title": "Delete nodes using keyboard shortcuts",
      "description": "Users can select workflow nodes and delete them using keyboard shortcuts (Delete/Backspace), with connected edges automatically removed",
      "status": "complete",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/builder-delete-node-keyboard.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates node deletion via keyboard with cleanup of connected edges"
        }
      ]
    },
    {
      "id": "BAS-BUILDER-NODE-CONFIG",
      "category": "workflow.builder",
      "prd_ref": "Workflow Builder > Node Configuration",
      "title": "Edit node properties via configuration panel",
      "description": "Users can click on a workflow node to open its property panel and modify configuration fields (selectors, timeouts, labels, etc.) with changes reflected immediately",
      "status": "complete",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/node-properties-edit.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates node property panel opens, fields are editable, and changes persist"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/node-config-navigate.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates Navigate node property configuration including URL editing and persistence"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/node-config-click.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates Click node selector configuration and persistence"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/node-config-wait.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates Wait node configuration with dynamic field visibility based on wait type"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/node-config-assert.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates Assert node configuration with mode-specific conditional fields"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/node-config-variable-flow.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates SetVariable and UseVariable node configuration for data flow (camelCase regression test)"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/02-canvas/node-config-dragdrop.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates DragDrop node configuration (regression test for camelCase compiler bug fix)"
        }
      ]
    }
  ]
}
