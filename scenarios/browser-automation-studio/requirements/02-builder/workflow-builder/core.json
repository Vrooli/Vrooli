{
  "_metadata": {
    "description": "Workflow builder canvas and persistence requirements",
    "last_validated_at": "2025-11-04T00:00:00.000Z",
    "auto_sync_enabled": true,
    "schema_version": "1.0.0",
    "last_synced_at": "2025-11-21T14:01:14.534Z"
  },
  "requirements": [
    {
      "id": "BAS-WORKFLOW-PERSIST-CRUD",
      "category": "workflow.builder",
      "prd_ref": "Functional Requirements > Must Have > Visual workflow builder",
      "title": "Workflows persist nodes, edges, and metadata",
      "description": "Validates compiler, database, and API layers so workflows round-trip with folder hierarchy and normalized metadata required for execution planning.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "test",
          "ref": "api/browserless/compiler/compiler_test.go",
          "phase": "unit",
          "status": "failing",
          "notes": "Ensures ordering, cycle detection, and unsupported node handling.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "api/browserless/runtime/session_test.go",
          "phase": "unit",
          "status": "failing",
          "notes": "Exercises Browserless session payloads without external dependencies.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "api/database/repository_test.go",
          "phase": "unit",
          "status": "failing",
          "notes": "Confirms workflow persistence and retrieval with folder hierarchy metadata.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "test/phases/test-unit.sh",
          "phase": "unit",
          "status": "failing",
          "notes": "Unit phase aggregates Go + Node coverage with thresholds enforced.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "ui/src/stores/projectStore.test.ts",
          "phase": "unit",
          "status": "failing",
          "notes": "Auto-added from vitest evidence",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "ui/src/stores/workflowStore.test.ts",
          "phase": "unit",
          "status": "failing",
          "notes": "Auto-added from vitest evidence",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "ui/src/components/__tests__/WorkflowBuilder.test.tsx",
          "phase": "unit",
          "status": "failing",
          "notes": "Auto-added from vitest evidence",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        }
      ],
      "_sync_metadata": {
        "last_updated": "2025-11-21T09:00:43-05:00",
        "updated_by": "auto-sync",
        "test_coverage_count": 0,
        "all_tests_passing": false,
        "phase_results": [
          "coverage/phase-results/business.json",
          "coverage/phase-results/unit.json"
        ],
        "tests_run": [
          "test/run-tests.sh"
        ]
      }
    },
    {
      "id": "BAS-WORKFLOW-DEMO-SEED",
      "category": "workflow.builder",
      "prd_ref": "Functional Requirements > Must Have > Visual workflow builder",
      "title": "Demo project and workflow seed remain available after boot",
      "description": "Guarantees the bundled demo project loads for first-time operators, providing an executable workflow that exercises the canvas and executor pipeline.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/02-builder/01-projects/demo-sanity.json",
          "phase": "integration",
          "status": "failing",
          "notes": "BAS workflow ensuring demo seed parity via JSON playbook (pending export).",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T09:00:41-05:00",
            "test_duration_ms": 480000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/integration.json",
            "source_phase": "integration",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        }
      ],
      "_sync_metadata": {
        "last_updated": "2025-11-21T09:00:41-05:00",
        "updated_by": "auto-sync",
        "test_coverage_count": 0,
        "all_tests_passing": false,
        "phase_results": [
          "coverage/phase-results/integration.json"
        ],
        "tests_run": [
          "test/run-tests.sh"
        ]
      }
    }
  ]
}
