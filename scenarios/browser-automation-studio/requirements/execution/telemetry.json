{
  "_metadata": {
    "description": "Execution telemetry and observability requirements",
    "last_validated_at": "2025-11-04T00:00:00.000Z",
    "auto_sync_enabled": true,
    "schema_version": "1.0.0",
    "last_synced_at": "2025-11-08T02:42:57.421Z"
  },
  "requirements": [
    {
      "id": "BAS-EXEC-TELEMETRY-STREAM",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Real-time screenshot display",
      "title": "Telemetry stream includes screenshots, console, and network events",
      "description": "Confirms the execution service emits complete telemetry payloads within latency targets and the UI processors consume heartbeat and assertion events correctly.",
      "status": "complete",
      "criticality": "P0",
      "validation": [
        {
          "type": "test",
          "ref": "api/browserless/client_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Exercises telemetry persistence, retries, and artifact metadata."
        },
        {
          "type": "test",
          "ref": "api/browserless/runtime/session_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Validates Browserless session payloads and error handling."
        },
        {
          "type": "test",
          "ref": "ui/tests/executionEventProcessor.heartbeat.test.mjs",
          "phase": "unit",
          "status": "implemented",
          "notes": "Ensures heartbeat events update progress state in the UI store."
        },
        {
          "type": "test",
          "ref": "ui/tests/executionEventProcessor.assertion.test.mjs",
          "phase": "unit",
          "status": "implemented",
          "notes": "Confirms assertion payloads render readable log entries."
        },
        {
          "type": "test",
          "ref": "test/phases/test-unit.sh",
          "phase": "unit",
          "status": "implemented",
          "notes": "Unit phase captures Node + Go telemetry coverage with enforced thresholds."
        },
        {
          "type": "test",
          "ref": "ui/src/stores/executionStore.test.ts",
          "phase": "unit",
          "status": "implemented",
          "notes": "Auto-added from vitest evidence"
        },
        {
          "type": "test",
          "ref": "ui/src/components/__tests__/ExecutionViewer.test.tsx",
          "phase": "unit",
          "status": "implemented",
          "notes": "Auto-added from vitest evidence"
        }
      ]
    },
    {
      "id": "BAS-EXEC-TELEMETRY-AUTOMATION",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Real-time screenshot display",
      "title": "Telemetry smoke automation validates live streaming",
      "description": "Runs an end-to-end workflow that asserts screenshots, highlight metadata, console, and network events are captured and export packages are generated.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/executions/telemetry-smoke.json",
          "phase": "integration",
          "status": "failing",
          "notes": "BAS workflow validating telemetry stream (JSON export pending)."
        },
        {
          "type": "test",
          "ref": "test/phases/test-integration.sh",
          "phase": "integration",
          "status": "failing",
          "notes": "Integration phase invokes the telemetry smoke automation through run_workflow_yaml."
        }
      ]
    },
    {
      "id": "BAS-EXEC-HEARTBEAT-DETECTION",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Real-time screenshot display",
      "title": "Heartbeat stalls trigger operator alerts",
      "description": "Ensures the CLI and automation surface stalled heartbeat warnings when telemetry pauses beyond the configured threshold.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/executions/heartbeat-stall.json",
          "phase": "integration",
          "status": "failing",
          "notes": "BAS workflow validating heartbeat stall detection once exported."
        },
        {
          "type": "test",
          "ref": "test/phases/test-integration.sh",
          "phase": "integration",
          "status": "failing",
          "notes": "Integration phase records requirement state after running heartbeat automation."
        },
        {
          "type": "test",
          "ref": "ui/src/stores/executionStore.test.ts",
          "phase": "unit",
          "status": "implemented",
          "notes": "Auto-added from vitest evidence"
        }
      ]
    },
    {
      "id": "BAS-EXEC-CLI-WATCH",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Execute workflows via API and CLI",
      "title": "CLI execution watch surfaces telemetry and heartbeat state",
      "description": "Confirms the CLI reflects progress, warning, and recovery events while tailing live executions.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "manual",
          "ref": "cli/browser-automation-studio",
          "phase": "integration",
          "status": "failing",
          "notes": "CLI emits heartbeat lag/stall notices during manual verification sessions."
        },
        {
          "type": "automation",
          "ref": "test/playbooks/executions/telemetry-smoke.json",
          "phase": "integration",
          "status": "failing",
          "notes": "Extend smoke workflow to assert CLI output once scripted checks are in place."
        }
      ]
    }
  ]
}
