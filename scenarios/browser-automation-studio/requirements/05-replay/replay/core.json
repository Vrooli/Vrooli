{
  "_metadata": {
    "description": "Replay and artifact persistence requirements",
    "last_validated_at": "2025-11-04T00:00:00.000Z",
    "auto_sync_enabled": true,
    "schema_version": "1.0.0",
    "last_synced_at": "2025-11-20T14:01:07.073Z"
  },
  "requirements": [
    {
      "id": "BAS-REPLAY-TIMELINE-PERSISTENCE",
      "category": "replay.persistence",
      "prd_ref": "Functional Requirements > Should Have > Replay & marketing renderer",
      "title": "Timeline artifacts persist normalized execution events",
      "description": "Ensures execution artifacts are normalized, stored, and queryable so the replay UI and marketing renderer consume consistent payloads.",
      "status": "in_progress",
      "criticality": "P1",
      "validation": [
        {
          "type": "test",
          "ref": "api/services/timeline_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Validates timeline persistence, retrieval, and query filters.",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T12:56:37-05:00",
            "test_duration_ms": 42000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        },
        {
          "type": "test",
          "ref": "test/phases/test-unit.sh",
          "phase": "unit",
          "status": "implemented",
          "notes": "Unit phase captures timeline service coverage thresholds.",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T12:56:37-05:00",
            "test_duration_ms": 42000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/05-replay/01-automation/render-check.json",
          "phase": "integration",
          "status": "failing",
          "notes": "E2E validation that replay artifacts are persisted and accessible for rendering",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T23:07:35-05:00",
            "test_duration_ms": 540000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/integration.json",
            "source_phase": "integration",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        }
      ],
      "_sync_metadata": {
        "last_updated": "2025-11-19T23:07:35-05:00",
        "updated_by": "auto-sync",
        "test_coverage_count": 2,
        "all_tests_passing": false,
        "phase_results": [
          "coverage/phase-results/business.json",
          "coverage/phase-results/integration.json",
          "coverage/phase-results/unit.json"
        ],
        "tests_run": [
          "test/run-tests.sh integration"
        ]
      }
    },
    {
      "id": "BAS-REPLAY-EXPORT-BUNDLE",
      "category": "replay.export",
      "prd_ref": "Functional Requirements > Should Have > Replay & marketing renderer",
      "title": "Replay exports portable bundles for marketing and sharing",
      "description": "Confirms the export endpoint generates self-contained bundles (screenshots, timeline JSON, metadata) that work offline.",
      "status": "in_progress",
      "criticality": "P1",
      "validation": [
        {
          "type": "test",
          "ref": "api/services/exporter.go",
          "phase": "unit",
          "status": "failing",
          "notes": "Exporter generates ReplayMovieSpec with execution metadata.",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T23:07:35-05:00",
            "test_duration_ms": 540000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        },
        {
          "type": "test",
          "ref": "api/services/exporter_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Unit tests validate export bundle generation and metadata.",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T12:56:37-05:00",
            "test_duration_ms": 42000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        },
        {
          "type": "test",
          "ref": "api/services/replay_renderer.go",
          "phase": "unit",
          "status": "failing",
          "notes": "ReplayRenderer generates video/gif from replay specs via Browserless (tested in unit phase).",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T23:07:35-05:00",
            "test_duration_ms": 540000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/05-replay/01-automation/render-check.json",
          "phase": "integration",
          "status": "failing",
          "notes": "End-to-end validation of replay export and rendering workflow.",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T23:07:35-05:00",
            "test_duration_ms": 540000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/integration.json",
            "source_phase": "integration",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/05-replay/02-ui/execution-result-export.json",
          "phase": "integration",
          "status": "failing",
          "notes": "Validates execution result export functionality and replay artifact availability in the UI",
          "_sync_metadata": {
            "last_test_run": "2025-11-19T23:07:35-05:00",
            "test_duration_ms": 540000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/integration.json",
            "source_phase": "integration",
            "tests_run": [
              "test/run-tests.sh integration"
            ]
          }
        }
      ],
      "_sync_metadata": {
        "last_updated": "2025-11-19T23:07:35-05:00",
        "updated_by": "auto-sync",
        "test_coverage_count": 1,
        "all_tests_passing": false,
        "phase_results": [
          "coverage/phase-results/business.json",
          "coverage/phase-results/integration.json",
          "coverage/phase-results/unit.json"
        ],
        "tests_run": [
          "test/run-tests.sh integration"
        ]
      }
    }
  ]
}
