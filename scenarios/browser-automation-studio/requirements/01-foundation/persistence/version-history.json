{
  "_metadata": {
    "description": "Autosave and version history requirements",
    "last_validated_at": "2025-11-04T00:00:00.000Z",
    "auto_sync_enabled": true,
    "schema_version": "1.0.0",
    "last_synced_at": "2025-11-21T14:01:14.532Z"
  },
  "requirements": [
    {
      "id": "BAS-VERSION-AUTOSAVE",
      "category": "persistence",
      "prd_ref": "Autosave & Version History",
      "title": "Autosave prevents data loss and manages conflicts",
      "description": "Debounced autosave writes workflow drafts, prevents overwrites when conflicts exist, and surfaces state to the UI header.",
      "status": "complete",
      "criticality": "P0",
      "validation": [
        {
          "type": "test",
          "ref": "ui/src/stores/workflowStore.test.ts",
          "phase": "unit",
          "status": "implemented",
          "notes": "Covers autosave, debounce saves, conflict suppression, and history refresh logic.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "test/phases/test-unit.sh",
          "phase": "unit",
          "status": "implemented",
          "notes": "Unit phase captures autosave coverage thresholds.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "manual",
          "ref": "ui/src/components/Header.tsx",
          "phase": "unit",
          "status": "implemented",
          "notes": "Header renders save state, conflict actions, and version history entry points.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T09:00:43-05:00",
            "test_duration_ms": 2000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        }
      ],
      "_sync_metadata": {
        "last_updated": "2025-11-21T09:00:43-05:00",
        "updated_by": "auto-sync",
        "test_coverage_count": 3,
        "all_tests_passing": true,
        "phase_results": [
          "coverage/phase-results/business.json",
          "coverage/phase-results/unit.json"
        ],
        "tests_run": [
          "test/run-tests.sh"
        ]
      }
    },
    {
      "id": "BAS-VERSION-RESTORE",
      "category": "persistence",
      "prd_ref": "Autosave & Version History",
      "title": "Version history exposes restore flows across API, UI, and CLI",
      "description": "Ensures version listing, diffing, and restore endpoints are available and parity exists between CLI and UI flows.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "test",
          "ref": "api/handlers/handlers_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestListWorkflowVersionsHandlerSuccess, TestGetWorkflowVersionHandlerSuccess, TestRestoreWorkflowVersionConflict validate API endpoints.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "api/services/workflow_service_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestListWorkflowVersionsSummaries, TestRestoreWorkflowVersionAppliesHistoricDefinition validate service layer.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "test",
          "ref": "api/database/repository_extended_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestWorkflowVersionOperations validates version CRUD operations at repository layer.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T08:52:41-05:00",
            "test_duration_ms": 34000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/unit.json",
            "source_phase": "unit",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/01-foundation/02-workflows/workflow-version-restore.json",
          "phase": "integration",
          "status": "failing",
          "notes": "UI workflow validates version history modal, version listing, and restore functionality",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T09:00:41-05:00",
            "test_duration_ms": 480000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/integration.json",
            "source_phase": "integration",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        },
        {
          "type": "manual",
          "ref": "cli/browser-automation-studio",
          "phase": "integration",
          "status": "failing",
          "notes": "CLI restore commands documented and verified during operator workflows.",
          "_sync_metadata": {
            "last_test_run": "2025-11-21T09:00:41-05:00",
            "test_duration_ms": 480000,
            "auto_updated": true,
            "test_names": [],
            "phase_result": "coverage/phase-results/integration.json",
            "source_phase": "integration",
            "tests_run": [
              "test/run-tests.sh"
            ]
          }
        }
      ],
      "_sync_metadata": {
        "last_updated": "2025-11-21T09:00:43-05:00",
        "updated_by": "auto-sync",
        "test_coverage_count": 3,
        "all_tests_passing": false,
        "phase_results": [
          "coverage/phase-results/business.json",
          "coverage/phase-results/integration.json",
          "coverage/phase-results/unit.json"
        ],
        "tests_run": [
          "test/run-tests.sh"
        ]
      }
    }
  ]
}
