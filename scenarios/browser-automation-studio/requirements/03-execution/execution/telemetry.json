{
  "_metadata": {
    "description": "Execution telemetry and observability requirements",
    "last_validated_at": "2025-11-04T00:00:00.000Z",
    "auto_sync_enabled": true,
    "schema_version": "1.0.0",
    "last_synced_at": "2025-11-19T05:43:59.824Z"
  },
  "requirements": [
    {
      "id": "BAS-EXEC-TELEMETRY-STREAM",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Real-time screenshot display",
      "title": "Telemetry stream includes screenshots, console, and network events",
      "description": "Confirms the execution service emits complete telemetry payloads within latency targets and the UI processors consume heartbeat and assertion events correctly.",
      "status": "complete",
      "criticality": "P0",
      "validation": [
        {
          "type": "test",
          "ref": "api/browserless/client_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Exercises telemetry persistence, retries, and artifact metadata."
        },
        {
          "type": "test",
          "ref": "api/browserless/runtime/session_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "Validates Browserless session payloads and error handling."
        },
        {
          "type": "test",
          "ref": "test/phases/test-unit.sh",
          "phase": "unit",
          "status": "implemented",
          "notes": "Unit phase captures Node + Go telemetry coverage with enforced thresholds."
        },
        {
          "type": "test",
          "ref": "ui/src/stores/executionStore.test.ts",
          "phase": "unit",
          "status": "implemented",
          "notes": "Tests heartbeat events and execution state management"
        },
        {
          "type": "test",
          "ref": "ui/src/components/__tests__/ExecutionViewer.test.tsx",
          "phase": "unit",
          "status": "implemented",
          "notes": "Auto-added from vitest evidence"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/automation/telemetry-smoke.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "E2E validation of telemetry stream with screenshots, console, and network events"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/ui/execution-progress-tracking.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates real-time execution progress tracking UI with indicators and state transitions"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/ui/execution-telemetry-display.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Validates real-time telemetry display including screenshots, console, network tabs, and heartbeat timestamps"
        }
      ]
    },
    {
      "id": "BAS-EXEC-TELEMETRY-AUTOMATION",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Real-time screenshot display",
      "title": "Telemetry smoke automation validates live streaming",
      "description": "Runs an end-to-end workflow that asserts screenshots, highlight metadata, console, and network events are captured and export packages are generated.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/automation/telemetry-smoke.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "BAS workflow validating telemetry stream (JSON export pending)."
        },
        {
          "type": "test",
          "ref": "test/phases/test-integration.sh",
          "phase": "integration",
          "status": "failing",
          "notes": "Integration phase invokes the telemetry smoke automation through run_workflow_yaml."
        },
        {
          "type": "test",
          "ref": "ui/src/components/ProjectDetail.test.tsx",
          "phase": "unit",
          "status": "implemented",
          "notes": "Auto-added from vitest evidence"
        }
      ]
    },
    {
      "id": "BAS-EXEC-HEARTBEAT-DETECTION",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Real-time screenshot display",
      "title": "Heartbeat stalls trigger operator alerts",
      "description": "Ensures the CLI and automation surface stalled heartbeat warnings when telemetry pauses beyond the configured threshold.",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/automation/heartbeat-stall.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "BAS workflow validating heartbeat stall detection once exported."
        },
        {
          "type": "test",
          "ref": "test/phases/test-integration.sh",
          "phase": "integration",
          "status": "failing",
          "notes": "Integration phase records requirement state after running heartbeat automation."
        },
        {
          "type": "test",
          "ref": "ui/src/stores/executionStore.test.ts",
          "phase": "unit",
          "status": "implemented",
          "notes": "Auto-added from vitest evidence"
        }
      ]
    },
    {
      "id": "BAS-EXEC-CLI-WATCH",
      "category": "execution.telemetry",
      "prd_ref": "Functional Requirements > Must Have > Execute workflows via API and CLI",
      "title": "CLI execution watch surfaces telemetry and heartbeat state",
      "description": "Confirms the CLI reflects progress, warning, and recovery events while tailing live executions.",
      "status": "complete",
      "criticality": "P0",
      "validation": [
        {
          "type": "manual",
          "ref": "cli/browser-automation-studio",
          "phase": "integration",
          "status": "implemented",
          "notes": "CLI emits heartbeat lag/stall notices during manual verification sessions."
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/automation/telemetry-smoke.json",
          "phase": "integration",
          "status": "implemented",
          "notes": "Extend smoke workflow to assert CLI output once scripted checks are in place."
        }
      ]
    },
    {
      "id": "BAS-EXEC-STOP-CONTROL",
      "category": "execution.control",
      "prd_ref": "Execution Management > Control",
      "title": "Stop/cancel running workflow executions",
      "description": "Users can stop or cancel a running workflow execution from the UI, with the execution status updated to 'cancelled' and resources properly cleaned up",
      "status": "in_progress",
      "criticality": "P0",
      "validation": [
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/ui/execution-stop-control.json",
          "phase": "integration",
          "status": "failing",
          "notes": "Validates stop button appears for running executions and successfully cancels them"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/replay/ui/execution-result-export.json",
          "phase": "integration",
          "status": "failing",
          "notes": "Validates execution result export and replay artifacts availability"
        },
        {
          "type": "automation",
          "ref": "test/playbooks/capabilities/execution/ui/execution-progress-tracking.json",
          "phase": "integration",
          "status": "failing",
          "notes": "Validates execution progress tracking with state transitions and completion indicators"
        }
      ]
    }
  ]
}
