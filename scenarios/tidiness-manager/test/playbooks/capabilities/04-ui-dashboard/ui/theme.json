{
  "metadata": {
    "description": "[REQ:TM-UI-006] Verify dark theme is applied consistently",
    "requirements": ["TM-UI-006"],
    "phase": "business",
    "surface": "ui",
    "capability": "04-ui-dashboard",
    "reset": "none",
    "version": 1
  },
  "settings": {
    "executionViewport": {
      "width": 1440,
      "height": 900,
      "preset": "desktop"
    }
  },
  "nodes": [
    {
      "id": "navigate-dashboard",
      "type": "navigate",
      "data": {
        "label": "Navigate to dashboard",
        "destinationType": "url",
        "url": "http://localhost:{{UI_PORT}}/dashboard"
      }
    },
    {
      "id": "wait-for-page",
      "type": "wait",
      "data": {
        "label": "Wait for page to load",
        "waitType": "duration",
        "durationMs": 1000,
        "timeoutMs": 3000
      }
    },
    {
      "id": "evaluate-theme",
      "type": "evaluate",
      "data": {
        "label": "Check background color is dark",
        "expression": "window.getComputedStyle(document.body).backgroundColor"
      }
    },
    {
      "id": "assert-table-exists",
      "type": "assert",
      "data": {
        "label": "Verify table exists in dark theme",
        "selector": "@selector/scenarioTable",
        "assertMode": "exists",
        "failureMessage": "Table should be visible in dark theme"
      }
    },
    {
      "id": "capture-theme",
      "type": "screenshot",
      "data": {
        "label": "Capture dark theme state",
        "fullPage": true,
        "waitForMs": 500
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "navigate-dashboard",
      "target": "wait-for-page",
      "type": "smoothstep"
    },
    {
      "id": "e2",
      "source": "wait-for-page",
      "target": "evaluate-theme",
      "type": "smoothstep"
    },
    {
      "id": "e3",
      "source": "evaluate-theme",
      "target": "assert-table-exists",
      "type": "smoothstep"
    },
    {
      "id": "e4",
      "source": "assert-table-exists",
      "target": "capture-theme",
      "type": "smoothstep"
    }
  ]
}
