{
  "$schema": "../../../../.vrooli/schemas/resource-urls.schema.json",
  "version": "1.0.0",
  "environment": "development",
  "base_config": {
    "protocol": "http",
    "host": "localhost"
  },

  "resources": {
    "postgres": {
      "host": "localhost",
      "port": "${POSTGRES_PORT}",
      "protocol": "postgresql",
      "database": "postgres",
      "username": "postgres", 
      "password": "${POSTGRES_PASSWORD}",
      "connection_string": "postgresql://postgres:${POSTGRES_PASSWORD}@localhost:${POSTGRES_PORT}/postgres",
      "admin_url": "http://localhost:5050",
      "health_check": {
        "type": "tcp",
        "endpoint": "localhost:${POSTGRES_PORT}",
        "timeout_ms": 5000
      }
    },


    "vrooli_claude": {
      "type": "vrooli_resource",
      "command": "vrooli resource claude",
      "available": true,
      "version_command": "vrooli resource claude --version",
      "test_command": "echo 'test' | vrooli resource claude chat",
      "rate_limits": {
        "requests_per_minute": 20,
        "requests_per_hour": 200,
        "burst_allowance": 5
      },
      "health_check": {
        "type": "command",
        "command": "vrooli resource claude --version",
        "timeout_ms": 10000,
        "success_pattern": "claude"
      }
    },

    "ollama": {
      "host": "localhost", 
      "port": "${OLLAMA_PORT}",
      "protocol": "http",
      "base_url": "http://localhost:${OLLAMA_PORT}",
      "api": {
        "base": "/api",
        "endpoints": {
          "generate": "/api/generate",
          "chat": "/api/chat",
          "embeddings": "/api/embeddings",
          "models": "/api/tags"
        }
      },
      "models": {
        "default": "phi3.5:3.8b",
        "available": [
          "phi3.5:3.8b",
          "llama3.2",
          "mistral"
        ]
      },
      "health_check": {
        "type": "http",
        "endpoint": "http://localhost:${OLLAMA_PORT}/api/tags",
        "timeout_ms": 10000
      }
    },

    "redis": {
      "host": "localhost",
      "port": "${REDIS_PORT}",
      "protocol": "redis",
      "database": 0,
      "password": "${REDIS_PASSWORD}",
      "connection_string": "redis://:${REDIS_PASSWORD}@localhost:${REDIS_PORT}/0",
      "admin_url": null,
      "config": {
        "key_prefix": "scenario-gen:",
        "default_ttl": 3600,
        "max_connections": 10
      },
      "health_check": {
        "type": "redis",
        "command": "PING",
        "timeout_ms": 5000
      }
    },

    "api_server": {
      "host": "localhost",
      "port": "${API_PORT}",
      "protocol": "http",
      "base_url": "http://localhost:${API_PORT}",
      "api": {
        "base": "/api",
        "endpoints": {
          "health": "/health",
          "scenarios": "/api/scenarios",
          "generate": "/api/generate",
          "backlog": "/api/backlog",
          "templates": "/api/templates"
        }
      },
      "health_check": {
        "type": "http",
        "endpoint": "http://localhost:${API_PORT}/health",
        "timeout_ms": 5000
      }
    }
  },

  "service_dependencies": {
    "scenario_generation": {
      "required": ["postgres", "vrooli_claude"],
      "optional": ["redis", "ollama"]
    },
    "template_system": {
      "required": ["postgres"],
      "optional": ["redis"]
    },
    "dashboard": {
      "required": ["postgres"],
      "optional": ["redis"]
    },
    "analytics": {
      "required": ["postgres"],
      "optional": ["redis"]
    }
  },

  "health_monitoring": {
    "check_interval_ms": 30000,
    "timeout_ms": 10000,
    "retry_attempts": 3,
    "alert_thresholds": {
      "response_time_ms": 5000,
      "failure_rate_percent": 10,
      "consecutive_failures": 3
    }
  },

  "load_balancing": {
    "enabled": false,
    "strategy": "round_robin",
    "health_check_path": "/health"
  },

  "circuit_breaker": {
    "enabled": true,
    "failure_threshold": 5,
    "recovery_timeout_ms": 60000,
    "half_open_max_calls": 3
  }
}