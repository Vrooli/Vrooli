{
  "_metadata": {
    "module_name": "Configuration",
    "description": "Scoring configuration management",
    "prd_ref": "OT-P0-002, OT-P0-003, OT-P1-008",
    "priority": "P0"
  },
  "requirements": [
    {
      "id": "SCS-CFG-001",
      "title": "Component toggle API",
      "description": "Enable/disable individual scoring components and penalties via configuration",
      "prd_ref": "OT-P0-002",
      "criticality": "P0",
      "status": "in_progress",
      "validation": [
        {
          "type": "test",
          "ref": "api/pkg/config/config_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestDefaultConfig, TestWeightNormalize verify component toggling"
        },
        {
          "type": "automation",
          "ref": "bas/cases/configuration/api/config-retrieval.json",
          "phase": "integration",
          "status": "failing",
          "notes": "E2E tests for GET /api/v1/config endpoint"
        }
      ]
    },
    {
      "id": "SCS-CFG-002",
      "title": "Per-scenario overrides",
      "description": "Support scenario-specific configuration that overrides global defaults",
      "prd_ref": "OT-P0-002",
      "criticality": "P0",
      "status": "in_progress",
      "validation": [
        {
          "type": "test",
          "ref": "api/pkg/config/config_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestConfigMerge, TestLoaderScenarioOverride, TestLoaderGetEffectiveConfig verify per-scenario overrides"
        },
        {
          "type": "automation",
          "ref": "bas/cases/configuration/api/scenario-config.json",
          "phase": "integration",
          "status": "failing",
          "notes": "E2E tests for scenario-specific config endpoints"
        }
      ]
    },
    {
      "id": "SCS-CFG-003",
      "title": "Configuration presets system",
      "description": "Pre-defined configurations (e.g., Skip E2E, Code Quality Only, Full Scoring)",
      "prd_ref": "OT-P0-002",
      "criticality": "P1",
      "status": "in_progress",
      "validation": [
        {
          "type": "test",
          "ref": "api/pkg/config/config_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestPresetsExist, TestCodeQualityOnlyPreset, TestListPresetInfo, TestStrictPresetHasTighterThresholds verify presets"
        },
        {
          "type": "automation",
          "ref": "bas/cases/configuration/api/presets.json",
          "phase": "integration",
          "status": "failing",
          "notes": "E2E tests for preset listing and application"
        }
      ]
    },
    {
      "id": "SCS-CFG-004",
      "title": "Configuration persistence",
      "description": "Save and load configuration from JSON files",
      "prd_ref": "OT-P0-002",
      "criticality": "P0",
      "status": "in_progress",
      "validation": [
        {
          "type": "test",
          "ref": "api/pkg/config/config_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestLoaderLoadGlobalDefault, TestLoaderSaveAndLoadGlobal, TestLoaderDeleteScenarioOverride, TestValidateConfig verify persistence"
        },
        {
          "type": "automation",
          "ref": "bas/cases/configuration/api/config-retrieval.json",
          "phase": "integration",
          "status": "failing",
          "notes": "E2E tests for config persistence via API"
        }
      ]
    }
  ]
}
