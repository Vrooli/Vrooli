{
  "module_id": "mini-vrooli-bundling",
  "title": "Mini Vrooli Bundle",
  "priority": "P0",
  "description": "Build a deployable tarball containing only the required Vrooli core + dependencies.",
  "requirements": [
    {
      "id": "STC-P0-002",
      "category": "bundling",
      "prd_ref": "OT-P0-002",
      "title": "Deterministic mini-Vrooli tarball",
      "description": "Given a manifest, produce a tarball that includes required scenarios/resources (from analyzer), always includes packages/, always includes vrooli-autoheal, and excludes unrelated content.",
      "status": "in_progress",
      "tags": [
        "bundling",
        "tarball",
        "stripper"
      ],
      "validation": [
        {
          "type": "test",
          "phase": "unit",
          "status": "implemented",
          "ref": "api/bundling_rules_test.go",
          "notes": "Bundle include/exclude rules + deterministic archive writer."
        },
        {
          "type": "test",
          "phase": "unit",
          "status": "implemented",
          "ref": "api/bundle_build_contract_test.go",
          "notes": "API endpoint builds a tarball artifact from a manifest."
        },
        {
          "type": "test",
          "phase": "unit",
          "status": "implemented",
          "ref": "cli/main_test.go",
          "notes": "CLI can request /api/v1/bundle/build."
        }
      ]
    },
    {
      "id": "STC-P0-008",
      "category": "bundling",
      "prd_ref": "OT-P0-002",
      "title": "Tarball is reproducible and self-contained",
      "description": "The produced tarball can be scpâ€™d to a fresh VPS and unpacked without missing files (packages/, required scenarios/resources present, no references back to the original repo path).",
      "status": "in_progress",
      "tags": [
        "bundling",
        "reproducibility"
      ],
      "validation": [
        {
          "type": "test",
          "phase": "unit",
          "status": "implemented",
          "ref": "api/bundling_rules_test.go",
          "notes": "Asserts deterministic bytes and relative tar entry names."
        }
      ]
    }
  ]
}
