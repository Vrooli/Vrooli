# Swarm Manager Configuration Settings

# System Limits
max_concurrent_tasks: 5          # Maximum tasks running simultaneously
min_backlog_size: 10            # Generate new tasks when backlog drops below this
task_scan_interval: 300          # Seconds between task folder scans

# YOLO Mode - Auto-approve AI-generated tasks
yolo_mode: false                 # Set to true for full autonomy

# Resource Limits
max_cpu_percent: 70              # Maximum CPU usage percentage
max_memory_percent: 70           # Maximum memory usage percentage
max_claude_calls_per_hour: 100  # Rate limit for Claude API calls

# Claude Code Configuration
claude_config:
  max_turns: 30                  # Maximum conversation turns
  timeout: 1800                  # Timeout in seconds (30 minutes)
  ultra_think: true              # Use ultra-think prefix for prompts
  
# Scenario Registry - Available scenarios and their CLIs
available_scenarios:
  - name: scenario-generator-v1
    cli: scenario-generator-v1
    purpose: "Create new scenarios from requirements"
    
  - name: resource-experimenter
    cli: resource-experimenter
    purpose: "Test resource combinations on scenarios"
    
  - name: app-debugger
    cli: app-debugger
    purpose: "Debug and fix broken applications"
    
  - name: app-issue-tracker
    cli: app-issue-tracker
    purpose: "Track and resolve reported issues"
    
  - name: system-monitor
    cli: system-monitor
    purpose: "Monitor system health and investigate anomalies"
    
  - name: core-debugger
    cli: core-debugger
    purpose: "Monitor and fix core Vrooli infrastructure (CLI, orchestrator, setup)"
    
  - name: task-planner
    cli: task-planner
    purpose: "Plan and implement complex multi-step tasks"
    
  - name: claude-code
    cli: resource-claude-code
    purpose: "General development and coding tasks"

# Problem Scanning Configuration
problem_scanning:
  enabled: true                    # Enable automatic problem scanning
  scan_interval: 300               # Seconds between problem scans (5 minutes)
  auto_create_tasks: true          # Auto-create tasks for high/critical problems
  scan_paths:                      # Default paths to scan for problem files
    - ${VROOLI_ROOT}/PROBLEMS.md           # Global issues
    - ${VROOLI_ROOT}/resources/*/PROBLEMS.md  # Resource issues
    - ${VROOLI_ROOT}/scenarios/*/PROBLEMS.md  # Scenario issues
    - ${VROOLI_ROOT}/resources/*/TROUBLESHOOTING.md  # Resource troubleshooting
    - ${VROOLI_ROOT}/scenarios/*/TROUBLESHOOTING.md  # Scenario troubleshooting
  severity_thresholds:
    auto_task_creation: high       # Minimum severity for auto task creation
    alert_notification: critical   # Minimum severity for alerts
  max_scan_depth: 3               # Maximum directory depth for scanning
  max_files_per_scan: 50          # Limit files to prevent excessive scanning

# Task Type Mappings
task_type_scenarios:
  core-infrastructure: core-debugger  # Core Vrooli issues (highest priority)
  core-fix: core-debugger
  cli-issue: core-debugger
  orchestrator-issue: core-debugger
  setup-failure: core-debugger
  scenario: scenario-generator-v1
  experiment: resource-experimenter
  bug-fix: app-debugger
  app-debug: app-debugger  # Clarified for app-level issues
  issue: app-issue-tracker
  monitoring: system-monitor
  system-performance: system-monitor
  planning: task-planner
  feature: claude-code
  optimization: claude-code
  integration: claude-code
  documentation: claude-code
  testing: claude-code
  problem-resolution: app-debugger  # App-level problems
  core-problem: core-debugger  # Core infrastructure problems

# Priority Modifiers - Applied to calculated priority scores
priority_modifiers:
  core_infrastructure_issue: 10.0   # Core issues block everything, get 10x priority
  has_workaround_available: 0.5     # If workaround exists, reduce priority by 50%
  user_reported: 2.0                # User-reported issues get 2x priority
  critical_severity: 5.0             # Critical severity gets 5x priority
  high_severity: 2.5                # High severity gets 2.5x priority
  affects_multiple_scenarios: 3.0   # Issues affecting multiple scenarios get 3x priority
  repeated_failure: 1.5              # Tasks that failed before get 1.5x priority
  
# Health Check Configuration
health_check_before_dispatch:
  enabled: true                      # Check core health before dispatching tasks
  block_on_critical: true            # Don't dispatch if core is critical
  warn_on_degraded: true             # Log warning if core is degraded
  check_interval: 60                 # Seconds between health checks
  components_to_check:
    - cli                           # Vrooli CLI
    - orchestrator                  # Scenario orchestrator
    - resource-manager              # Resource lifecycle manager
    - setup                         # Setup scripts