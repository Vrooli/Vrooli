{
  "_metadata": {
    "description": "Draft lifecycle management (create, read, update, delete, publish) requirements",
    "domain": "drafts",
    "last_updated": "2025-11-14"
  },
  "requirements": [
    {
      "id": "PCT-DRAFT-CREATE",
      "category": "drafts.api",
      "prd_ref": "API Endpoints > POST /api/v1/drafts",
      "title": "Create new draft from template or existing PRD",
      "description": "Verifies POST /api/v1/drafts creates draft in database and filesystem with proper metadata.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "api/drafts_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestHandleCreateDraft with validation and filesystem sync"
        }
      ]
    },
    {
      "id": "PCT-DRAFT-SAVE",
      "category": "drafts.api",
      "prd_ref": "API Endpoints > PUT /api/v1/drafts/{id}",
      "title": "Draft content persists to database and filesystem atomically",
      "description": "Ensures PUT /api/v1/drafts/{id} updates both database record and draft file with proper error handling.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "api/drafts_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestHandleUpdateDraft with database and filesystem validation"
        }
      ]
    },
    {
      "id": "PCT-DRAFT-DELETE",
      "category": "drafts.api",
      "prd_ref": "API Endpoints > DELETE /api/v1/drafts/{id}",
      "title": "Draft deletion removes database record and filesystem entry",
      "description": "Validates DELETE /api/v1/drafts/{id} cleans up both database and filesystem with confirmation.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "api/drafts_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestHandleDeleteDraft with cleanup verification"
        }
      ]
    },
    {
      "id": "PCT-DRAFT-PUBLISH",
      "category": "drafts.api",
      "prd_ref": "Functional Requirements > Must Have > Publishing action that replaces PRD.md and clears draft",
      "title": "Publishing atomically updates PRD.md and clears draft",
      "description": "Confirms POST /api/v1/drafts/{id}/publish writes PRD.md with backup and removes draft safely.",
      "status": "complete",
      "validation": [
        {
          "type": "test",
          "ref": "api/publish_test.go",
          "phase": "unit",
          "status": "implemented",
          "notes": "TestHandlePublishDraft validates atomic publish operation"
        }
      ]
    },
    {
      "id": "PCT-DRAFT-EDIT",
      "category": "drafts.ui",
      "prd_ref": "Draft Management > Edit with markdown editor",
      "title": "Draft editor supports split-pane editing with live preview",
      "description": "Confirms DraftEditorPane renders edit/split/preview modes with textarea and markdown rendering.",
      "status": "complete",
      "validation": [
        {
          "type": "manual",
          "ref": "ui/src/components/drafts/DraftEditorPane.tsx",
          "phase": "integration",
          "status": "implemented",
          "notes": "Editor modes functional, preview renders markdown correctly"
        }
      ]
    }
  ]
}
