name: retro-game-launcher
description: Test suite for AI-powered retro game creation platform
version: 1.0.0

setup:
  - name: Initialize database
    type: postgres
    action: execute_schema
    file: initialization/storage/postgres/schema.sql
  
  - name: Load game templates
    type: configuration
    action: load_json
    file: initialization/configuration/game-templates.json
  
  - name: Deploy generation workflow
    type: n8n
    action: import_workflow
    file: initialization/automation/n8n/game-generation-workflow.json
  
  - name: Setup asset storage
    type: minio
    action: create_bucket
    bucket: game-assets

tests:
  - name: Game generation
    description: Test AI game generation from prompt
    steps:
      - action: generate_game
        prompt: "Create a simple snake game"
      - assert: game_created
        has_code: true
      - assert: code_valid
        language: javascript
  
  - name: Game remix
    description: Test game remixing functionality
    steps:
      - action: create_base_game
        prompt: "Space shooter"
      - action: remix_game
        strategy: speed_change
      - assert: remix_created
        parent_exists: true
      - assert: code_different
        from_parent: true
  
  - name: Asset generation
    description: Test sprite and audio generation
    steps:
      - action: generate_assets
        game_type: platformer
      - assert: assets_created
        types: [sprite, sound]
      - assert: asset_format
        sprites: base64
  
  - name: High score tracking
    description: Test score persistence
    steps:
      - action: submit_score
        game_id: test_game
        score: 1000
      - assert: score_saved
      - assert: leaderboard_updated
        position: 1
  
  - name: Rate limiting
    description: Test generation rate limits
    steps:
      - action: generate_multiple
        count: 11
        user: test_user
      - assert: rate_limited
        after_count: 10

validation:
  resources:
    - ollama: responsive
    - judge0: code_execution_ready
    - postgres: schema_loaded
    - redis: cache_functional
    - minio: bucket_accessible
  
  ui:
    - endpoint: /
      status: 200
    - endpoint: /api/generate
      status: 200
    - endpoint: /api/games
      status: 200
    - endpoint: /api/remix
      status: 200