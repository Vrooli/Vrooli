export class FishCompletionGenerator {
    generate(commandName: string): string {
        return `# Fish completion for ${commandName}
# This file is generated by '${commandName} completion install'

function __${commandName}_complete
    set -l cmd (commandline -o)
    set -l completions (${commandName} --generate-completions $cmd 2>/dev/null)
    
    if test -n "$completions"
        for completion in $completions
            if string match -q "*:*" "$completion"
                # Split completion and description
                set -l parts (string split ":" "$completion" -m 1)
                printf "%s\\t%s\\n" $parts[1] $parts[2]
            else
                # Just the completion
                printf "%s\\n" "$completion"
            end
        end
    else
        # Fallback to file completion
        __fish_complete_path
    end
end

# Register the completion function
complete -c ${commandName} -f -a "(__${commandName}_complete)"
`;
    }
}
