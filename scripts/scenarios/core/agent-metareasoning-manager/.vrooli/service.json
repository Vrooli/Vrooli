{
  "$schema": "../../../../.vrooli/schemas/service.schema.json",
  "version": "1.0.0",
  "inheritance": {
    "extends": "../../../../../.vrooli/service.json",
    "merge": {
      "strategy": "merge",
      "arrays": "concat"
    }
  },
  "service": {
    "name": "agent-metareasoning-manager",
    "displayName": "Agent Metareasoning Manager",
    "description": "Dashboard for managing metareasoning tools (prompts, workflows) that enhance agent decision-making",
    "version": "1.0.0",
    "type": "vrooli-enhancement",
    "category": "vrooli-helpers",
    "tags": [
      "metareasoning",
      "decision-support",
      "ai-enhancement",
      "reasoning-patterns",
      "windmill-ui",
      "prompt-management",
      "workflow-orchestration"
    ]
  },
  "repository": {
    "mirrors": []
  },
  "resources": {
    "storage": {
      "postgres": {
        "type": "postgresql",
        "enabled": true,
        "version": "16",
        "required": true,
        "initialization": {
          "data": [
            {
              "type": "schema",
              "file": "initialization/storage/postgres/schema.sql"
            },
            {
              "type": "seed",
              "file": "initialization/storage/postgres/seed.sql"
            }
          ]
        }
      },
      "redis": {
        "type": "redis",
        "enabled": true,
        "required": true
      },
      "vault": {
        "type": "vault",
        "enabled": false,
        "required": false
      }
    },
    "automation": {
      "n8n": {
        "type": "n8n",
        "enabled": true,
        "required": true,
        "initialization": {
          "workflows": [
            {
              "file": "initialization/automation/n8n/pros-cons-analyzer.json"
            },
            {
              "file": "initialization/automation/n8n/swot-analysis.json"
            },
            {
              "file": "initialization/automation/n8n/risk-assessment.json"
            },
            {
              "file": "initialization/automation/n8n/self-review.json"
            },
            {
              "file": "initialization/automation/n8n/reasoning-chain.json"
            }
          ]
        }
      },
      "windmill": {
        "type": "windmill",
        "enabled": true,
        "required": true,
        "initialization": {
          "apps": [
            {
              "file": "initialization/automation/windmill/metareasoning-orchestrator.json"
            },
            {
              "file": "initialization/automation/windmill/prompt-tester.json"
            }
          ]
        }
      }
    },
    "ai": {
      "ollama": {
        "type": "ollama",
        "enabled": true,
        "required": true,
        "models": [
          "llama3.2",
          "mistral",
          "codellama"
        ]
      }
    }
  },
  "lifecycle": {
    "version": "1.0.0",
    "setup": {
      "steps": [
        {
          "name": "inject-resource-data",
          "run": "scripts/scenarios/injection/runtime-engine.sh scripts/scenarios/core/agent-metareasoning-manager/.vrooli/service.json",
          "description": "Inject SQL schemas, workflows, and configurations"
        },
        {
          "name": "show-access-urls",
          "run": "echo 'ðŸš€ Agent Metareasoning Manager initialized\\n  Dashboard: http://localhost:${RESOURCE_PORTS[windmill]}\\n  n8n workflows: http://localhost:${RESOURCE_PORTS[n8n]}'",
          "description": "Display service access URLs"
        }
      ]
    }
  }
}