{
  "version": "1.0.0",
  "name": "resource-experimenter",
  "description": "Fully automated resource discovery and testing platform that generates complete standalone applications with their own resource providers and scenarios",
  "type": "scenario",
  "category": "vrooli-helpers",
  "resources": {
    "storage": {
      "postgres": {
        "enabled": true,
        "config": {
          "database": "resource_experiments",
          "schema": "public",
          "initialization": {
            "scripts": ["initialization/storage/postgres/schema.sql", "initialization/storage/postgres/seed.sql"]
          }
        }
      },
      "redis": {
        "enabled": true,
        "config": {
          "database": 1,
          "keyPrefix": "experiment:",
          "persistence": true
        }
      },
      "minio": {
        "enabled": true,
        "config": {
          "buckets": ["generated-apps", "resource-artifacts", "test-reports"],
          "public_buckets": ["generated-apps"],
          "initialization": {
            "scripts": ["initialization/storage/minio/buckets.json"]
          }
        }
      },
      "qdrant": {
        "enabled": true,
        "config": {
          "collections": ["resources", "test-results", "compatibility"],
          "initialization": {
            "scripts": ["initialization/storage/qdrant/collections.json"]
          }
        }
      }
    },
    "automation": {
      "windmill": {
        "enabled": true,
        "config": {
          "workspace": "experiments",
          "apps": [
            "initialization/automation/windmill/experiment-dashboard.json",
            "initialization/automation/windmill/resource-catalog.json",
            "initialization/automation/windmill/app-viewer.json"
          ]
        }
      },
      "n8n": {
        "enabled": true,
        "config": {
          "workflows": [
            "initialization/automation/n8n/resource-discovery.json",
            "initialization/automation/n8n/experiment-orchestrator.json",
            "initialization/automation/n8n/app-generator.json",
            "initialization/automation/n8n/test-runner.json",
            "initialization/automation/n8n/publish-results.json"
          ]
        }
      }
    },
    "agents": {
      "browserless": {
        "enabled": true,
        "config": {
          "timeout": 30000,
          "maxConcurrent": 5
        }
      }
    },
    "ai": {
      "ollama": {
        "enabled": true,
        "config": {
          "models": ["llama3.2", "codellama"],
          "analysis": {
            "model": "llama3.2",
            "temperature": 0.3
          }
        }
      },
      "claude-code": {
        "enabled": true,
        "config": {
          "model": "claude-3-sonnet-20240229",
          "maxTokens": 8192,
          "temperature": 0.4,
          "purpose": "resource_integration_analysis"
        }
      }
    },
    "execution": {
      "judge0": {
        "enabled": true,
        "config": {
          "languages": ["bash", "python", "javascript", "typescript"],
          "timeout": 60000
        }
      }
    },
    "monitoring": {
      "prometheus": {
        "enabled": false,
        "note": "Can be enabled for resource metrics collection"
      },
      "grafana": {
        "enabled": false,
        "note": "Can be enabled for visualization"
      }
    }
  },
  "experimental": {
    "sandbox_mode": true,
    "docker_access": true,
    "network_isolation": false,
    "resource_limits": {
      "max_containers": 10,
      "max_memory_gb": 16,
      "max_cpu_cores": 8,
      "max_storage_gb": 100
    },
    "discovery_sources": [
      "https://github.com/awesome-selfhosted/awesome-selfhosted",
      "https://hub.docker.com",
      "https://artifacthub.io",
      "https://bitnami.com/stacks"
    ]
  },
  "deployment": {
    "ports": {
      "api": 8091,
      "windmill": 8001,
      "n8n": 5679,
      "minio": 9000,
      "qdrant": 6333,
      "experiment_range_start": 9000,
      "experiment_range_end": 9999
    },
    "volumes": [
      "./sandbox:/app/sandbox",
      "./generated-apps:/app/generated-apps",
      "./templates:/app/templates",
      "/var/run/docker.sock:/var/run/docker.sock"
    ],
    "environment": {
      "NODE_ENV": "development",
      "LOG_LEVEL": "debug",
      "EXPERIMENT_MODE": "true",
      "DOCKER_HOST": "unix:///var/run/docker.sock",
      "SANDBOX_PATH": "/app/sandbox",
      "GENERATED_APPS_PATH": "/app/generated-apps",
      "TEMPLATES_PATH": "/app/templates",
      "AUTO_CLEANUP": "true",
      "CLEANUP_INTERVAL": "3600",
      "MAX_CONCURRENT_EXPERIMENTS": "10",
      "BATS_TEST_TIMEOUT": "300"
    }
  },
  "lifecycle": {
    "setup": {
      "description": "Initialize experiment platform",
      "steps": [
        {
          "name": "validate-environment",
          "run": "deployment/validate.sh"
        },
        {
          "name": "setup-storage",
          "run": "deployment/setup-storage.sh"
        },
        {
          "name": "setup-templates",
          "run": "deployment/setup-templates.sh"
        },
        {
          "name": "configure-docker",
          "run": "deployment/configure-docker.sh"
        }
      ]
    },
    "start": {
      "description": "Start experiment platform",
      "steps": [
        {
          "name": "cleanup-old-experiments",
          "run": "deployment/cleanup.sh"
        },
        {
          "name": "start-services",
          "run": "deployment/startup.sh"
        },
        {
          "name": "initialize-workflows",
          "run": "deployment/init-workflows.sh"
        }
      ]
    },
    "experiment": {
      "description": "Run full resource experiment pipeline",
      "steps": [
        {
          "name": "run-experiment",
          "run": "sandbox/experiment-runner.sh"
        }
      ]
    },
    "generate-app": {
      "description": "Generate standalone app for a tested resource",
      "steps": [
        {
          "name": "package-app",
          "run": "sandbox/app-packager.sh"
        }
      ]
    }
  }
}