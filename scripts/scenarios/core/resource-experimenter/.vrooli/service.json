{
  "$schema": "../../../../.vrooli/schemas/service.schema.json",
  "version": "1.0.0",
  "service": {
    "parent": "vrooli",
    "name": "resource-experimenter",
    "displayName": "Resource Experimenter",
    "description": "Fully automated resource discovery and testing platform that generates complete standalone applications with their own resource providers and scenarios",
    "version": "1.0.0",
    "type": "business-application",
    "category": "vrooli-helpers",
    "tags": [
      "resource-discovery",
      "automation",
      "testing",
      "generator"
    ],
    "maintainers": [
      {
        "name": "Vrooli Team",
        "email": "team@vrooli.com",
        "url": "https://github.com/Vrooli"
      }
    ],
    "license": "GPL-3.0",
    "homepage": "https://github.com/Vrooli/Vrooli"
  },
  "resources": {
    "storage": {
      "postgres": {
        "enabled": true,
        "config": {
          "database": "resource_experiments",
          "schema": "public",
          "initialization": {
            "schema": "initialization/storage/postgres/schema.sql",
            "seed": "initialization/storage/postgres/seed.sql"
          }
        }
      },
      "redis": {
        "enabled": true,
        "config": {
          "database": 1,
          "keyPrefix": "experiment:",
          "persistence": true
        }
      },
      "minio": {
        "enabled": true,
        "config": {
          "buckets": [
            "generated-apps",
            "resource-artifacts",
            "test-reports"
          ],
          "public_buckets": [
            "generated-apps"
          ],
          "initialization": {
            "buckets": "initialization/storage/minio/buckets.json"
          }
        }
      },
      "qdrant": {
        "enabled": true,
        "config": {
          "collections": [
            "resources",
            "test-results",
            "compatibility"
          ],
          "initialization": {
            "collections": "initialization/storage/qdrant/collections.json"
          }
        }
      }
    },
    "automation": {
      "windmill": {
        "enabled": true,
        "config": {
          "workspace": "experiments",
          "apps": [
            "initialization/automation/windmill/experiment-dashboard.json",
            "initialization/automation/windmill/resource-catalog.json",
            "initialization/automation/windmill/app-viewer.json"
          ]
        }
      },
      "n8n": {
        "enabled": true,
        "config": {
          "workflows": [
            "initialization/automation/n8n/resource-discovery.json",
            "initialization/automation/n8n/experiment-orchestrator.json",
            "initialization/automation/n8n/app-generator.json",
            "initialization/automation/n8n/test-runner.json",
            "initialization/automation/n8n/publish-results.json"
          ]
        }
      }
    },
    "agents": {
      "browserless": {
        "enabled": true,
        "config": {
          "timeout": 30000,
          "maxConcurrent": 5
        }
      }
    },
    "ai": {
      "ollama": {
        "enabled": true,
        "config": {
          "models": [
            "llama3.2",
            "codellama"
          ],
          "analysis": {
            "model": "llama3.2",
            "temperature": 0.3
          }
        }
      },
      "claude-code": {
        "enabled": true,
        "config": {
          "model": "claude-3-sonnet-20240229",
          "maxTokens": 8192,
          "temperature": 0.4,
          "purpose": "resource_integration_analysis"
        }
      }
    },
    "execution": {
      "judge0": {
        "enabled": true,
        "config": {
          "languages": [
            "bash",
            "python",
            "javascript",
            "typescript"
          ],
          "timeout": 60000
        }
      }
    },
    "monitoring": {
      "prometheus": {
        "enabled": false,
        "note": "Can be enabled for resource metrics collection"
      },
      "grafana": {
        "enabled": false,
        "note": "Can be enabled for visualization"
      }
    }
  },
  "experimental": {
    "sandbox_mode": true,
    "docker_access": true,
    "network_isolation": false,
    "resource_limits": {
      "max_containers": 10,
      "max_memory_gb": 16,
      "max_cpu_cores": 8,
      "max_storage_gb": 100
    },
    "discovery_sources": [
      "https://github.com/awesome-selfhosted/awesome-selfhosted",
      "https://hub.docker.com",
      "https://artifacthub.io",
      "https://bitnami.com/stacks"
    ]
  },
  "deployment": {
    "ports": {
      "api": 8091,
      "windmill": 8001,
      "n8n": 5679,
      "minio": 9000,
      "qdrant": 6333,
      "experiment_range_start": 9000,
      "experiment_range_end": 9999
    },
    "volumes": [
      "./sandbox:/app/sandbox",
      "./generated-apps:/app/generated-apps",
      "./templates:/app/templates",
      "/var/run/docker.sock:/var/run/docker.sock"
    ],
    "environment": {
      "NODE_ENV": "development",
      "LOG_LEVEL": "debug",
      "EXPERIMENT_MODE": "true",
      "DOCKER_HOST": "unix:///var/run/docker.sock",
      "SANDBOX_PATH": "/app/sandbox",
      "GENERATED_APPS_PATH": "/app/generated-apps",
      "TEMPLATES_PATH": "/app/templates",
      "AUTO_CLEANUP": "true",
      "CLEANUP_INTERVAL": "3600",
      "MAX_CONCURRENT_EXPERIMENTS": "10",
      "BATS_TEST_TIMEOUT": "300"
    }
  },
  "lifecycle": {
    "version": "1.0.0",
    "setup": {
      "description": "Initialize Resource Experimenter environment with Docker orchestration and experiment templates",
      "steps": [
        {
          "name": "inject-resource-data",
          "run": "scripts/resources/injection/engine.sh scripts/scenarios/core/resource-experimenter/.vrooli/service.json",
          "description": "Inject SQL schemas, workflows, and configurations"
        },
        {
          "name": "configure-docker",
          "run": "deployment/configure-docker.sh",
          "description": "Configure Docker daemon for container orchestration and resource management"
        },
        {
          "name": "validate-environment",
          "run": "deployment/validate.sh",
          "description": "Validate system requirements and Docker configuration"
        },
        {
          "name": "setup-experiment-templates",
          "run": "deployment/setup-templates.sh",
          "description": "Initialize resource provider and scenario templates"
        },
        {
          "name": "start-core-services",
          "run": "deployment/startup.sh",
          "description": "Start PostgreSQL, Redis, MinIO, Qdrant, Ollama, n8n, and Windmill"
        },
        {
          "name": "show-access-urls",
          "run": "echo '‚úÖ Resource Experimenter initialized\\n  üéØ Windmill Dashboard: http://localhost:8000\\n  üîß n8n Workflows: http://localhost:5678\\n  üìä MinIO Console: http://localhost:9001\\n  üîç Qdrant API: http://localhost:6333\\n  ü§ñ Ollama API: http://localhost:11434\\n  üì¶ Experiment Sandbox: ./sandbox/\\n  üèóÔ∏è  Generated Apps: ./generated-apps/'",
          "description": "Display service access URLs and directories"
        }
      ]
    }
  }
}