{
  "app_templates": {
    "structure": {
      "root_files": [
        {
          "name": "README.md",
          "template": "app_readme",
          "required": true,
          "description": "Main documentation and getting started guide"
        },
        {
          "name": "package.json", 
          "template": "package_json",
          "required": true,
          "description": "Node.js package metadata and dependencies"
        },
        {
          "name": "docker-compose.yml",
          "template": "docker_compose",
          "required": true,
          "description": "Container orchestration configuration"
        },
        {
          "name": ".env.example",
          "template": "env_example",
          "required": true,
          "description": "Environment variables template"
        },
        {
          "name": ".gitignore",
          "template": "gitignore",
          "required": true,
          "description": "Git ignore patterns"
        },
        {
          "name": "LICENSE",
          "template": "license",
          "required": false,
          "description": "Software license"
        }
      ],
      "directories": [
        {
          "path": ".vrooli",
          "description": "Vrooli service configuration",
          "files": [
            {
              "name": "service.json",
              "template": "root_service_json",
              "required": true
            }
          ]
        },
        {
          "path": "scripts",
          "description": "Management and utility scripts",
          "files": [
            {
              "name": "manage.sh",
              "template": "root_manage_sh",
              "required": true,
              "executable": true
            }
          ],
          "subdirectories": [
            {
              "path": "resources/{{resource_type}}/{{resource_name}}",
              "description": "Resource provider implementation",
              "template": "resource_provider"
            },
            {
              "path": "scenarios/{{resource_name}}-demo", 
              "description": "Demo scenario for the resource",
              "template": "demo_scenario"
            }
          ]
        },
        {
          "path": "docs",
          "description": "Documentation files",
          "files": [
            {
              "name": "INSTALLATION.md",
              "template": "installation_guide",
              "required": true
            },
            {
              "name": "USAGE.md",
              "template": "usage_guide", 
              "required": true
            },
            {
              "name": "API.md",
              "template": "api_documentation",
              "required": false
            },
            {
              "name": "TROUBLESHOOTING.md",
              "template": "troubleshooting_guide",
              "required": true
            },
            {
              "name": "CONTRIBUTING.md",
              "template": "contributing_guide",
              "required": false
            }
          ]
        }
      ]
    },
    "templates": {
      "app_readme": {
        "content": "# {{display_name}}\n\n{{description}}\n\n## Features\n\n- ✅ Ready-to-deploy {{resource_type}} resource integration\n- ✅ Complete provider scripts following Vrooli patterns\n- ✅ Comprehensive test suite with bats\n- ✅ Docker-based deployment\n- ✅ Health checks and monitoring\n- ✅ Demo scenario included\n\n## Quick Start\n\n```bash\n# Install and start the service\n./scripts/manage.sh install\n\n# Check status\n./scripts/manage.sh status\n\n# View service information\n./scripts/manage.sh info\n\n# Stop the service\n./scripts/manage.sh stop\n```\n\n## Resource Details\n\n- **Resource Name**: {{resource_name}}\n- **Resource Type**: {{resource_type}}\n- **Docker Image**: {{docker_image}}\n- **Default Port**: {{default_port}}\n- **Generated**: {{generated_at}}\n\n## Documentation\n\n- [Installation Guide](docs/INSTALLATION.md)\n- [Usage Guide](docs/USAGE.md)\n- [Troubleshooting](docs/TROUBLESHOOTING.md)\n{{#has_api}}\n- [API Documentation](docs/API.md)\n{{/has_api}}\n\n## Test Results\n\n{{#test_results}}\n- **Total Tests**: {{total_tests}}\n- **Passed**: {{passed_tests}}\n- **Failed**: {{failed_tests}}\n- **Success Rate**: {{success_rate}}%\n{{/test_results}}\n\n## Generated by Resource Experimenter\n\nThis application was automatically generated by [Vrooli's Resource Experimenter](https://github.com/Vrooli/Vrooli), which discovers, tests, and packages resources into ready-to-deploy applications.\n\n---\n\n**License**: MIT (unless otherwise specified)\n**Generated**: {{generated_at}}\n**Version**: {{version}}"
      },
      "package_json": {
        "content": "{\n  \"name\": \"{{app_name}}\",\n  \"version\": \"{{version}}\",\n  \"description\": \"{{description}}\",\n  \"main\": \"scripts/manage.sh\",\n  \"scripts\": {\n    \"start\": \"./scripts/manage.sh start\",\n    \"stop\": \"./scripts/manage.sh stop\",\n    \"restart\": \"./scripts/manage.sh restart\",\n    \"status\": \"./scripts/manage.sh status\",\n    \"install\": \"./scripts/manage.sh install\",\n    \"uninstall\": \"./scripts/manage.sh uninstall\",\n    \"test\": \"cd scripts/resources/{{resource_type}}/{{resource_name}} && bats manage.bats\",\n    \"health\": \"./scripts/manage.sh health\",\n    \"logs\": \"./scripts/manage.sh logs\",\n    \"info\": \"./scripts/manage.sh info\"\n  },\n  \"keywords\": [\n    \"{{resource_type}}\",\n    \"{{resource_name}}\",\n    \"vrooli\",\n    \"docker\",\n    \"self-hosted\",\n    \"automation\"\n  ],\n  \"author\": \"Resource Experimenter\",\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"generated-by-resource-experimenter\"\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/Vrooli/Vrooli/issues\"\n  },\n  \"homepage\": \"https://vrooli.com\",\n  \"engines\": {\n    \"node\": \">=16.0.0\"\n  },\n  \"vrooli\": {\n    \"resource_name\": \"{{resource_name}}\",\n    \"resource_type\": \"{{resource_type}}\",\n    \"generated_by\": \"resource-experimenter\",\n    \"generated_at\": \"{{generated_at}}\",\n    \"experiment_id\": \"{{experiment_id}}\",\n    \"test_results\": {\n      \"total_tests\": {{total_tests}},\n      \"passed_tests\": {{passed_tests}},\n      \"failed_tests\": {{failed_tests}}\n    }\n  }\n}"
      },
      "docker_compose": {
        "content": "version: '3.8'\n\nservices:\n  {{resource_name}}:\n    image: {{docker_image}}\n    container_name: vrooli-{{resource_name}}\n    restart: unless-stopped\n    ports:\n      - \"${{{RESOURCE_NAME}}_PORT:-{{default_port}}}:{{internal_port}}\"\n    environment:\n{{#environment_variables}}\n      - {{name}}={{value}}\n{{/environment_variables}}\n    volumes:\n{{#volumes}}\n      - {{volume}}\n{{/volumes}}\n    networks:\n      - vrooli-network\n{{#health_check}}\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"{{health_check_url}}\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n{{/health_check}}\n    labels:\n      - \"vrooli.service={{resource_name}}\"\n      - \"vrooli.category={{resource_type}}\"\n      - \"vrooli.managed=true\"\n      - \"vrooli.generated_by=resource-experimenter\"\n\nnetworks:\n  vrooli-network:\n    external: true\n    name: vrooli-network\n\n{{#has_volumes}}\nvolumes:\n{{#named_volumes}}\n  {{volume_name}}:\n{{/named_volumes}}\n{{/has_volumes}}"
      },
      "env_example": {
        "content": "# {{display_name}} Environment Configuration\n# Copy this file to .env and customize as needed\n\n# Basic Configuration\n{{RESOURCE_NAME}}_PORT={{default_port}}\n{{RESOURCE_NAME}}_HOST=127.0.0.1\n\n# Docker Configuration\n{{RESOURCE_NAME}}_IMAGE={{docker_image}}\n{{RESOURCE_NAME}}_TAG=latest\n{{RESOURCE_NAME}}_CONTAINER_NAME=vrooli-{{resource_name}}\n\n# Data Directories\n{{RESOURCE_NAME}}_DATA_DIR=${HOME}/.vrooli/data/{{resource_name}}\n{{RESOURCE_NAME}}_CONFIG_DIR=${HOME}/.vrooli/config/{{resource_name}}\n{{RESOURCE_NAME}}_LOGS_DIR=${HOME}/.vrooli/logs/{{resource_name}}\n\n# Resource Limits\n{{RESOURCE_NAME}}_MEMORY_LIMIT={{memory_limit}}\n{{RESOURCE_NAME}}_CPU_LIMIT={{cpu_limit}}\n\n# Network\nDOCKER_NETWORK=vrooli-network\n\n# Feature Flags\n{{RESOURCE_NAME}}_ENABLE_AUTH={{enable_auth}}\n{{RESOURCE_NAME}}_ENABLE_SSL={{enable_ssl}}\n{{RESOURCE_NAME}}_ENABLE_METRICS={{enable_metrics}}\n\n{{#has_auth}}\n# Authentication (Change these!)\n{{RESOURCE_NAME}}_DEFAULT_USERNAME=admin\n{{RESOURCE_NAME}}_DEFAULT_PASSWORD=changeme123\n{{/has_auth}}\n\n# Logging\n{{RESOURCE_NAME}}_LOG_LEVEL=info\n{{RESOURCE_NAME}}_LOG_FORMAT=json\n\n# Health Check\n{{RESOURCE_NAME}}_HEALTH_CHECK_TIMEOUT=30\n{{RESOURCE_NAME}}_HEALTH_CHECK_RETRIES=5\n\n# Backup\n{{RESOURCE_NAME}}_BACKUP_ENABLED=true\n{{RESOURCE_NAME}}_BACKUP_INTERVAL=24h\n{{RESOURCE_NAME}}_BACKUP_RETENTION=7"
      },
      "gitignore": {
        "content": "# Generated by Resource Experimenter\n\n# Environment files\n.env\n.env.local\n.env.*.local\n\n# Data directories\ndata/\nlogs/\nconfig/*.conf\nconfig/*.ini\nconfig/*.yaml\nconfig/*.yml\n!config/*.example.*\n\n# Backup files\n*.backup.*\n*.bak\n\n# Temporary files\n*.tmp\n*.temp\n*.log\n*.pid\n*.lock\n\n# Docker\n.docker/\ndocker-compose.override.yml\n\n# Node.js\nnode_modules/\nnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\n\n# IDE\n.vscode/\n.idea/\n*.swp\n*.swo\n*~\n\n# OS\n.DS_Store\n.DS_Store?\nThumbs.db\n\n# Test results\ntest-results/\n*.test.log\nbats-*.xml\n\n# Generated files\ngenerated/\ndist/\nbuild/"
      },
      "license": {
        "content": "MIT License\n\nCopyright (c) {{current_year}} Resource Experimenter\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSoftware."
      },
      "root_service_json": {
        "content": "{\n  \"version\": \"{{version}}\",\n  \"name\": \"{{app_name}}\",\n  \"description\": \"{{description}}\",\n  \"type\": \"application\",\n  \"category\": \"{{resource_type}}\",\n  \"generated_by\": \"resource-experimenter\",\n  \"generated_at\": \"{{generated_at}}\",\n  \"resources\": {\n    \"{{resource_type}}\": {\n      \"{{resource_name}}\": {\n        \"enabled\": true,\n        \"config\": {\n          \"port\": {{default_port}},\n          \"image\": \"{{docker_image}}\",\n          \"tag\": \"{{docker_tag}}\"\n        }\n      }\n    }\n  },\n  \"scenarios\": {\n    \"{{resource_name}}-demo\": {\n      \"enabled\": true,\n      \"description\": \"Demo scenario for {{resource_name}}\"\n    }\n  },\n  \"deployment\": {\n    \"ports\": {\n      \"{{resource_name}}\": {{default_port}}\n    },\n    \"environment\": {\n      \"NODE_ENV\": \"production\",\n      \"LOG_LEVEL\": \"info\"\n    }\n  },\n  \"lifecycle\": {\n    \"setup\": {\n      \"description\": \"Initialize {{resource_name}} application\",\n      \"steps\": [\n        {\n          \"name\": \"install-resource\",\n          \"run\": \"scripts/resources/{{resource_type}}/{{resource_name}}/manage.sh install\"\n        }\n      ]\n    },\n    \"start\": {\n      \"description\": \"Start {{resource_name}} service\",\n      \"steps\": [\n        {\n          \"name\": \"start-resource\",\n          \"run\": \"scripts/resources/{{resource_type}}/{{resource_name}}/manage.sh start\"\n        }\n      ]\n    },\n    \"stop\": {\n      \"description\": \"Stop {{resource_name}} service\",\n      \"steps\": [\n        {\n          \"name\": \"stop-resource\",\n          \"run\": \"scripts/resources/{{resource_type}}/{{resource_name}}/manage.sh stop\"\n        }\n      ]\n    }\n  }\n}"
      },
      "root_manage_sh": {
        "content": "#!/usr/bin/env bash\n# {{display_name}} Management Script\n# Generated by Resource Experimenter\n\nset -euo pipefail\n\n# Script metadata\nreadonly SCRIPT_NAME=\"{{app_name}}\"\nreadonly SCRIPT_VERSION=\"{{version}}\"\nreadonly SCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"\nreadonly ROOT_DIR=\"$(dirname \"${SCRIPT_DIR}\")\"\n\n# Resource paths\nreadonly RESOURCE_SCRIPT=\"${SCRIPT_DIR}/resources/{{resource_type}}/{{resource_name}}/manage.sh\"\n\n# Main function dispatcher\nmain() {\n    local action=\"${1:-}\"\n    shift || true\n\n    # Check if resource script exists\n    if [[ ! -f \"${RESOURCE_SCRIPT}\" ]]; then\n        echo \"Error: Resource script not found: ${RESOURCE_SCRIPT}\"\n        exit 1\n    fi\n\n    # Delegate to resource script\n    \"${RESOURCE_SCRIPT}\" \"${action}\" \"$@\"\n}\n\n# Usage information\nusage() {\n    cat << EOF\n{{display_name}} - {{description}}\n\nSYNOPSIS\n    ${SCRIPT_NAME} <command> [options]\n\nCOMMANDS\n    install     Install and configure {{resource_name}}\n    uninstall   Remove {{resource_name}} and cleanup\n    start       Start the {{resource_name}} service\n    stop        Stop the {{resource_name}} service\n    restart     Restart the {{resource_name}} service\n    status      Show service status\n    info        Show service information\n    logs        Show service logs\n    health      Check service health\n    config      Show current configuration\n    help        Show this help message\n\nEXAMPLES\n    ${SCRIPT_NAME} install\n    ${SCRIPT_NAME} start\n    ${SCRIPT_NAME} status\n    ${SCRIPT_NAME} logs --tail 50\n\nFor more information, see docs/USAGE.md\nEOF\n}\n\n# Handle help and usage\ncase \"${1:-}\" in\n    \"help\"|\"-h\"|\"--help\"|\"\")\n        usage\n        exit 0\n        ;;\n    *)\n        main \"$@\"\n        ;;\nesac"
      }
    }
  },
  "generation_settings": {
    "template_engine": "mustache",
    "variable_substitution": {
      "app_name": "{{app_name}}",
      "display_name": "{{display_name}}",
      "description": "{{description}}",
      "resource_name": "{{resource_name}}",
      "resource_type": "{{resource_type}}",
      "docker_image": "{{docker_image}}",
      "docker_tag": "{{docker_tag}}",
      "default_port": "{{default_port}}",
      "internal_port": "{{internal_port}}",
      "version": "{{version}}",
      "generated_at": "{{generated_at}}",
      "experiment_id": "{{experiment_id}}",
      "current_year": "{{current_year}}"
    },
    "conditionals": {
      "has_auth": "{{#has_auth}}",
      "has_api": "{{#has_api}}",
      "has_health_check": "{{#has_health_check}}",
      "has_volumes": "{{#has_volumes}}"
    },
    "iterations": {
      "environment_variables": "{{#environment_variables}}",
      "volumes": "{{#volumes}}",
      "test_results": "{{#test_results}}"
    }
  },
  "validation": {
    "required_files": [
      "README.md",
      "package.json",
      "docker-compose.yml",
      ".env.example",
      ".vrooli/service.json",
      "scripts/manage.sh"
    ],
    "required_directories": [
      ".vrooli",
      "scripts",
      "scripts/resources",
      "scripts/scenarios",
      "docs"
    ],
    "file_size_limits": {
      "README.md": "50KB",
      "package.json": "10KB",
      "docker-compose.yml": "20KB"
    },
    "permissions": {
      "scripts/manage.sh": "755",
      "scripts/resources/**/*.sh": "755"
    }
  }
}