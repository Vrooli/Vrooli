{
  "value": {
    "type": "tabscomponent",
    "tabs": [
      {
        "id": "getting_started",
        "value": "Getting Started"
      },
      {
        "id": "dashboard_guide",
        "value": "Dashboard Guide"
      },
      {
        "id": "configuration",
        "value": "Configuration"
      },
      {
        "id": "troubleshooting",
        "value": "Troubleshooting"
      },
      {
        "id": "api_reference",
        "value": "API Reference"
      }
    ],
    "configuration": {
      "getting_started": {
        "type": "containercomponent",
        "components": [
          {
            "id": "intro_section",
            "type": "textcomponent",
            "configuration": {
              "text": "# ðŸš€ Welcome to Resource Monitoring Platform\n\n## What is this platform?\n\nThe Resource Monitoring Platform is a comprehensive infrastructure monitoring solution designed specifically for Vrooli's local resource ecosystem. It automatically discovers, monitors, and manages your 20+ local resources with real-time health checks, intelligent alerting, and powerful management capabilities.\n\n## Key Features\n\n- **ðŸ” Auto-Discovery**: Automatically finds and registers running resources\n- **â±ï¸ Real-time Monitoring**: Health checks every 30 seconds with sub-second dashboard updates\n- **ðŸ“± Smart Alerting**: SMS for critical issues, email for warnings, with intelligent throttling\n- **ðŸŽ›ï¸ Management Interface**: One-click restart, stop, and monitoring actions\n- **ðŸ“Š Historical Analysis**: QuestDB-powered metrics for trend analysis and capacity planning\n- **ðŸ”’ Secure**: Vault-integrated credential management with role-based access",
              "style": {
                "padding": "20px",
                "backgroundColor": "#f7fafc",
                "borderRadius": "8px",
                "marginBottom": "25px"
              }
            }
          },
          {
            "id": "architecture_section",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ—ï¸ System Architecture\n\n```\nResources â†’ Node-RED (collect) â†’ QuestDB (store) â†’ Windmill (display)\n           â†“\n       n8n (monitor) â†’ Vault (creds) â†’ SMS/Email (alerts)\n           â†“\n       Redis (throttle)\n```\n\n### Core Components\n\n1. **PostgreSQL** - Resource registry and configuration storage\n2. **QuestDB** - High-performance time-series metrics storage\n3. **n8n** - Workflow automation for monitoring and alerting\n4. **Node-RED** - Real-time metrics collection engine\n5. **Windmill** - Interactive management dashboard (this interface)\n6. **Vault** - Secure credential storage for notifications\n7. **Redis** - Alert throttling and real-time status cache",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "25px"
              }
            }
          },
          {
            "id": "quick_start",
            "type": "textcomponent",
            "configuration": {
              "text": "## âš¡ Quick Start Guide\n\n### Step 1: Verify System Status\n1. Go to the **Overview** tab to see current system health\n2. Check that core services (PostgreSQL, Redis, QuestDB, Vault, n8n) are running\n3. Look for any critical alerts that need immediate attention\n\n### Step 2: Run Resource Discovery\n1. Navigate to **Resources** â†’ **Discover Resources** button\n2. Or use **Configuration** â†’ **Discovery** tab â†’ **Run Discovery Now**\n3. Wait for discovery to complete (usually 30-60 seconds)\n4. Verify that your expected resources appear in the Resources grid\n\n### Step 3: Configure Alerts\n1. Go to **Configuration** â†’ **Notifications** tab\n2. Set up Vault secrets for SMS (Twilio) and Email (SMTP)\n3. Test notifications using the **Send Test** buttons\n4. Customize alert rules in **Configuration** â†’ **Alert Rules**\n\n### Step 4: Customize Thresholds\n1. Visit **Configuration** â†’ **Thresholds** tab\n2. Adjust response time and availability thresholds based on your requirements\n3. Set appropriate monitoring intervals and retention periods\n4. Save configuration and verify changes take effect\n\n### Step 5: Monitor and Manage\n1. Use the **Resources** tab for day-to-day resource management\n2. Check **Metrics** tab for performance trends and analysis\n3. Review **Alerts** tab for alert history and patterns\n4. Use **Actions** tab for bulk operations and system maintenance",
              "style": {
                "padding": "15px",
                "backgroundColor": "#f0fff4",
                "border": "1px solid #68d391",
                "borderRadius": "8px",
                "marginBottom": "25px"
              }
            }
          },
          {
            "id": "first_steps",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸŽ¯ What to Do First\n\n### Immediate Actions (First 15 minutes)\n\n1. **âœ… Verify Core Services**\n   - Confirm PostgreSQL, Redis, QuestDB, Vault, and n8n are running\n   - Check system health in the Overview tab\n\n2. **ðŸ” Run Initial Discovery**\n   - Click \"Discover Resources\" to find all running services\n   - Review discovered resources for accuracy\n\n3. **ðŸ”’ Setup Notifications (Critical)**\n   - Configure Vault secrets for SMS and email alerts\n   - Test both notification channels\n\n### Within First Hour\n\n4. **âš™ï¸ Customize Thresholds**\n   - Adjust response time and availability thresholds\n   - Set monitoring intervals appropriate for your environment\n\n5. **ðŸ“‹ Review Alert Rules**\n   - Understand default alert conditions\n   - Customize rules based on your operational requirements\n\n6. **ðŸ“Š Explore Metrics**\n   - Check historical data collection\n   - Verify metrics are being stored properly\n\n### Ongoing Maintenance\n\n7. **ðŸ”„ Regular Reviews**\n   - Weekly review of alert patterns\n   - Monthly threshold adjustments\n   - Quarterly resource discovery updates",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px"
              }
            }
          }
        ]
      },
      "dashboard_guide": {
        "type": "containercomponent",
        "components": [
          {
            "id": "overview_tab_guide",
            "type": "textcomponent",
            "configuration": {
              "text": "# ðŸ“Š Dashboard Guide\n\n## Overview Tab\n\nThe Overview tab provides a high-level view of your infrastructure health:\n\n### Health Summary Cards\n- **ðŸŸ¢ Healthy Resources**: Number of resources operating normally\n- **ðŸŸ¡ Degraded Resources**: Resources with performance issues but still functional\n- **ðŸ”´ Down Resources**: Critical resources that are not responding\n- **ðŸ“Š Average Availability**: Overall system availability percentage\n\n### Recent Alerts Timeline\nShows the most recent alerts from the last 24 hours with:\n- **Timestamp**: When the alert occurred\n- **Resource**: Which resource triggered the alert\n- **Severity**: Critical, Warning, or Info level\n- **Message**: Description of the issue\n\n### Key Metrics\n- Auto-refreshes every 30 seconds\n- Click any metric card for detailed breakdown\n- Hover over charts for specific data points",
              "style": {
                "padding": "15px",
                "backgroundColor": "#f7fafc",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "resources_tab_guide",
            "type": "textcomponent",
            "configuration": {
              "text": "## Resources Tab\n\n### Resource Status Grid\nEach resource card displays:\n- **Status Indicator**: ðŸŸ¢ Healthy, ðŸŸ¡ Degraded, ðŸ”´ Down\n- **Resource Name**: Display name and service identifier\n- **Type**: Category (AI, Storage, Automation, etc.)\n- **Port**: Network port number\n- **Last Seen**: Most recent successful health check\n\n### Action Buttons\n- **ðŸ”„ Restart**: Restart the service (requires confirmation)\n- **â¹ï¸ Stop**: Stop the service (dangerous - requires confirmation)\n- **ðŸ“‹ View Logs**: Display recent log entries in a popup\n\n### Management Actions\n- **ðŸ”„ Refresh**: Manually refresh resource status\n- **ðŸ” Discover Resources**: Trigger new resource discovery scan\n\n### Status Colors and Meanings\n- **Green Border**: Resource is healthy and responding normally\n- **Yellow Border**: Resource is degraded (slow response or minor issues)\n- **Red Border**: Resource is down or not responding",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "alerts_tab_guide",
            "type": "textcomponent",
            "configuration": {
              "text": "## Alerts Tab\n\n### Alert Statistics\n- **Today**: Total alerts triggered today\n- **Critical**: Number of critical-severity alerts\n- **Resolved**: Alerts that have been resolved\n\n### Alert History Table\nComprehensive view of all alerts with columns:\n- **Time**: When the alert was triggered\n- **Resource**: Which resource caused the alert\n- **Severity**: Alert importance level (Critical/Warning/Info)\n- **Message**: Detailed description of the issue\n- **Notified**: Whether notifications were sent\n- **Status**: Open or Resolved\n\n### Filtering Options\n- **All**: Show all alerts\n- **Critical**: Show only critical alerts\n- **Unresolved**: Show only open alerts\n\n### Alert Severity Levels\n- **ðŸ”´ Critical**: Immediate action required, SMS + Email sent\n- **ðŸŸ¡ Warning**: Attention needed, Email sent\n- **ðŸ”µ Info**: Informational, logged only",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "metrics_tab_guide",
            "type": "textcomponent",
            "configuration": {
              "text": "## Metrics Tab\n\n### Time Range Selection\nChoose the data timeframe:\n- **1h**: Last hour (most detailed)\n- **6h**: Last 6 hours\n- **24h**: Last 24 hours (default)\n- **7d**: Last 7 days (aggregated)\n\n### Performance Charts\n- **Availability Chart**: Shows uptime percentage over time for each resource\n- **Response Time Chart**: Displays average response times with trends\n\n### Performance Summary Table\nCurrent metrics for all resources:\n- **Availability**: Uptime percentage\n- **Avg Response**: Average response time in milliseconds\n- **Errors**: Number of failed requests\n- **Last Check**: Most recent health check timestamp\n\n### Understanding the Data\n- Charts auto-update every minute\n- Hover over chart lines for specific values\n- Click legend items to show/hide specific resources\n- Sort table columns by clicking headers",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "actions_tab_guide",
            "type": "textcomponent",
            "configuration": {
              "text": "## Actions Tab\n\n### Quick Actions\n- **ðŸ” Resource Discovery**: Scan for new or changed resources\n- **ðŸš¨ Test Alerts**: Send test notifications to verify channels\n- **ðŸ—‘ï¸ Clear Cache**: Clear Redis status cache (forces fresh data)\n\n### Bulk Actions (Use with Caution)\n- **ðŸ”„ Restart Critical Services**: Restart all critical resources (causes downtime)\n- **ðŸ” Health Check All**: Force health check on all resources\n- **ðŸ“Š Export Metrics**: Download metrics data for analysis\n\n### Safety Features\n- All dangerous actions require confirmation\n- Bulk actions display warning messages\n- Action history is logged for audit purposes\n\n### When to Use Actions\n- **Discovery**: After deploying new services or changing ports\n- **Test Alerts**: After configuring notification channels\n- **Clear Cache**: When dashboard shows stale data\n- **Bulk Restart**: Only during scheduled maintenance windows",
              "style": {
                "padding": "15px",
                "backgroundColor": "#fff5f5",
                "border": "1px solid #fc8181",
                "borderRadius": "8px"
              }
            }
          }
        ]
      },
      "configuration": {
        "type": "containercomponent",
        "components": [
          {
            "id": "config_overview",
            "type": "textcomponent",
            "configuration": {
              "text": "# âš™ï¸ Configuration Guide\n\n## Configuration Overview\n\nThe Configuration panel allows you to customize all aspects of the monitoring platform. Changes are saved immediately and take effect within 30-60 seconds.",
              "style": {
                "padding": "15px",
                "backgroundColor": "#f7fafc",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "thresholds_config",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ“Š Thresholds Configuration\n\n### Response Time Thresholds\n- **Warning**: Trigger email alerts when response time exceeds this value\n- **Critical**: Trigger SMS + email alerts for severe performance issues\n- **Recommended**: Warning 1000ms, Critical 5000ms\n\n### Availability Thresholds\n- **Warning**: Alert when uptime drops below this percentage\n- **Critical**: Critical alert for severe availability issues\n- **Recommended**: Warning 95%, Critical 90%\n\n### Error Rate Thresholds\n- **Warning**: Alert when error percentage exceeds threshold\n- **Critical**: Critical alert for high error rates\n- **Recommended**: Warning 5%, Critical 10%\n\n### Monitoring Settings\n- **Health Check Interval**: How often to check each resource (default: 30s)\n- **Health Check Timeout**: Max time to wait for response (default: 5000ms)\n- **Data Retention**: How long to keep metrics data (default: 30 days)",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "notifications_config",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ“¢ Notifications Configuration\n\n### SMS Alerts (via Twilio)\n**Required Vault Secrets:**\n```bash\nvault kv put secret/monitoring/twilio \\\n  account_sid=your_account_sid \\\n  auth_token=your_auth_token \\\n  from_number=+1234567890 \\\n  to_number=+0987654321\n```\n\n**Settings:**\n- **Enabled**: Toggle SMS notifications on/off\n- **Severity Levels**: Which alert levels trigger SMS (recommended: Critical only)\n- **Cooldown Period**: Minimum time between SMS alerts (recommended: 5 minutes)\n- **Max per Hour**: Maximum SMS alerts per hour (recommended: 10)\n\n### Email Alerts (via SMTP)\n**Required Vault Secrets:**\n```bash\nvault kv put secret/monitoring/smtp \\\n  host=smtp.gmail.com \\\n  port=587 \\\n  username=alerts@yourcompany.com \\\n  password=your_app_password \\\n  from_email=alerts@yourcompany.com \\\n  to_email=ops@yourcompany.com\n```\n\n**Settings:**\n- **Enabled**: Toggle email notifications on/off\n- **Severity Levels**: Which alert levels trigger email (recommended: Warning + Critical)\n- **Cooldown Period**: Minimum time between emails (recommended: 15 minutes)\n- **Max per Hour**: Maximum emails per hour (recommended: 20)",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "discovery_config",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ” Discovery Configuration\n\n### Auto-Discovery Settings\n- **Enable Auto Discovery**: Automatically scan for new resources\n- **Discovery Interval**: How often to run discovery (recommended: 60 minutes)\n- **Port Scan Timeout**: Max time per port check (recommended: 100ms)\n- **Run on Startup**: Discover resources when platform starts (recommended: enabled)\n\n### Port Ranges\nDefine which port ranges to scan for services:\n```\n1000-2000    # Common service ports\n3000-4000    # Development services\n5000-6000    # Automation platforms\n8000-9000    # Web services\n9000-10000   # Databases\n11000-12000  # AI services\n```\n\n### Known Services\nPredefined services and their expected ports:\n- **ollama**: 11434 (AI)\n- **postgres**: 5433 (Storage)\n- **redis**: 6380 (Storage)\n- **questdb**: 9009 (Storage)\n- **n8n**: 5678 (Automation)\n- **windmill**: 5681 (Automation)\n- **vault**: 8200 (Storage)\n- **And more...**\n\n### When to Modify Discovery\n- **Add Port Ranges**: When deploying services on new port ranges\n- **Increase Interval**: If discovery impacts performance\n- **Decrease Timeout**: For faster discovery in reliable networks",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "alert_rules_config",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸš¨ Alert Rules Configuration\n\n### Default Alert Rules\n1. **Critical Service Down**: Immediate SMS + email for critical resource failures\n2. **Service Degraded**: Email alerts for high response times\n3. **High Error Rate**: Alerts when error rate exceeds thresholds\n4. **Storage Capacity**: Warnings for high disk usage\n5. **Memory Pressure**: Critical alerts for memory usage\n6. **Automation Failed**: Alerts for workflow failures\n7. **AI Model Unavailable**: Critical alerts for AI service issues\n\n### Creating Custom Rules\n**Rule Components:**\n- **Name**: Descriptive rule identifier\n- **Description**: Detailed explanation of the condition\n- **Metric Type**: What to monitor (availability, response_time, etc.)\n- **Threshold**: Value that triggers the alert\n- **Operator**: Comparison type (greater than, less than, equals)\n- **Duration**: How long condition must persist\n- **Severity**: Alert importance level\n- **Channels**: How to notify (SMS, email, etc.)\n- **Cooldown**: Minimum time between alerts\n\n### Best Practices\n- Start with default rules and modify as needed\n- Use longer durations for non-critical alerts to reduce noise\n- Set appropriate cooldowns to prevent alert fatigue\n- Test new rules thoroughly before enabling in production\n- Document custom rules for team knowledge sharing",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px"
              }
            }
          }
        ]
      },
      "troubleshooting": {
        "type": "containercomponent", 
        "components": [
          {
            "id": "troubleshooting_header",
            "type": "textcomponent",
            "configuration": {
              "text": "# ðŸ”§ Troubleshooting Guide\n\n## Common Issues and Solutions\n\nThis section covers the most frequently encountered problems and their solutions.",
              "style": {
                "padding": "15px",
                "backgroundColor": "#f7fafc",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "discovery_issues",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ” Resource Discovery Issues\n\n### Problem: Resources not being discovered\n**Symptoms:**\n- Expected services don't appear in Resources tab\n- Discovery shows \"0 newly discovered\"\n- Manual discovery doesn't find known services\n\n**Solutions:**\n1. **Check Service Status**\n   ```bash\n   # Verify services are actually running\n   netstat -tlnp | grep :5678    # Check n8n\n   netstat -tlnp | grep :5433    # Check PostgreSQL\n   ```\n\n2. **Trigger Manual Discovery**\n   - Go to Resources tab â†’ \"Discover Resources\" button\n   - Or Configuration â†’ Discovery â†’ \"Run Discovery Now\"\n   - Wait 30-60 seconds for completion\n\n3. **Check Discovery Configuration**\n   - Verify port ranges include your service ports\n   - Confirm discovery timeout isn't too low\n   - Check that auto-discovery is enabled\n\n4. **Review n8n Workflow**\n   - Open n8n at http://localhost:5678\n   - Check \"Resource Auto-Discovery\" workflow is active\n   - Review execution history for errors\n\n### Problem: Discovery finds wrong services\n**Solutions:**\n- Update known services mapping in Configuration\n- Adjust health check endpoints for custom services\n- Review port range configuration to avoid false positives",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "alert_issues",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸš¨ Alert and Notification Issues\n\n### Problem: Not receiving SMS alerts\n**Symptoms:**\n- Critical alerts don't trigger SMS\n- Test SMS fails\n- SMS configuration appears correct\n\n**Solutions:**\n1. **Verify Vault Secrets**\n   ```bash\n   # Check if secrets exist\n   vault kv get secret/monitoring/twilio\n   \n   # Verify all required fields\n   vault kv get -field=account_sid secret/monitoring/twilio\n   vault kv get -field=auth_token secret/monitoring/twilio\n   vault kv get -field=from_number secret/monitoring/twilio\n   vault kv get -field=to_number secret/monitoring/twilio\n   ```\n\n2. **Test Twilio Credentials**\n   ```bash\n   # Manual test using curl\n   curl -X POST https://api.twilio.com/2010-04-01/Accounts/$ACCOUNT_SID/Messages.json \\\n     -u $ACCOUNT_SID:$AUTH_TOKEN \\\n     -d \"From=$FROM_NUMBER\" \\\n     -d \"To=$TO_NUMBER\" \\\n     -d \"Body=Test message\"\n   ```\n\n3. **Check n8n Alert Handler**\n   - Open n8n â†’ \"Alert Handler\" workflow\n   - Review recent executions for errors\n   - Verify Twilio node configuration\n   - Check that SMS severity levels are configured correctly\n\n4. **Review Alert Throttling**\n   - Check Redis for throttle keys: `redis-cli -p 6380 keys \"alert_throttle_*\"`\n   - Clear throttle if needed: `redis-cli -p 6380 flushdb`\n\n### Problem: Not receiving email alerts\n**Solutions:**\n1. **Verify SMTP Configuration**\n   ```bash\n   # Test SMTP connection\n   vault kv get secret/monitoring/smtp\n   \n   # Manual SMTP test\n   telnet smtp.gmail.com 587\n   ```\n\n2. **Check Email Provider Settings**\n   - Gmail: Use App Passwords, not regular password\n   - Outlook: Enable \"Less secure app access\"\n   - Corporate SMTP: Verify firewall/proxy settings\n\n3. **Review Email Content**\n   - Check spam/junk folders\n   - Verify from/to email addresses are correct\n   - Review email templates in alert configuration",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "performance_issues",
            "type": "textcomponent",
            "configuration": {
              "text": "## âš¡ Performance Issues\n\n### Problem: Dashboard loading slowly\n**Solutions:**\n1. **Check Database Performance**\n   ```bash\n   # PostgreSQL connection test\n   psql -h localhost -p 5433 -U vrooli -d vrooli -c \"SELECT COUNT(*) FROM resource_monitoring.resources;\"\n   \n   # QuestDB query test\n   curl \"http://localhost:9009/exec?query=SELECT COUNT(*) FROM resource_metrics\"\n   ```\n\n2. **Clear Cache**\n   - Use Actions tab â†’ \"Clear Cache\"\n   - Or manually: `redis-cli -p 6380 flushdb`\n\n3. **Reduce Data Retention**\n   - Configuration â†’ Thresholds â†’ Data Retention (reduce from 30 to 7 days)\n   - Manually clean old data: Configuration â†’ System â†’ \"Cleanup Old Data\"\n\n### Problem: High resource usage\n**Solutions:**\n1. **Increase Monitoring Intervals**\n   - Configuration â†’ Thresholds â†’ Health Check Interval (increase from 30s to 60s)\n   - Reduce discovery frequency\n\n2. **Optimize Query Performance**\n   - Review QuestDB table sizes\n   - Consider data aggregation for old metrics\n\n3. **Scale Resources**\n   - Increase PostgreSQL memory allocation\n   - Add Redis memory if using persistence",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "data_issues",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ“Š Data and Metrics Issues\n\n### Problem: Missing or incorrect metrics\n**Solutions:**\n1. **Verify Node-RED Flow**\n   - Open Node-RED at http://localhost:1880\n   - Check \"Resource Metrics Collector\" flow is deployed and running\n   - Review debug messages for errors\n\n2. **Check QuestDB Tables**\n   ```sql\n   -- Connect to QuestDB console at http://localhost:9009\n   SELECT COUNT(*) FROM resource_metrics WHERE timestamp > dateadd('h', -1, now());\n   SELECT DISTINCT resource_name FROM resource_metrics;\n   ```\n\n3. **Review Resource Configuration**\n   - Ensure resources have correct health check endpoints\n   - Verify timeout settings aren't too aggressive\n   - Check that resources are marked as enabled\n\n### Problem: Dashboard shows stale data\n**Solutions:**\n1. **Force Refresh**\n   - Use browser refresh (F5)\n   - Clear browser cache\n   - Use Actions tab â†’ \"Clear Cache\"\n\n2. **Check Auto-Refresh**\n   - Verify dashboard auto-refresh is enabled\n   - Confirm WebSocket connections are working\n   - Review network connectivity to localhost services",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "emergency_procedures",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸš¨ Emergency Procedures\n\n### System Recovery Steps\n\n1. **Complete System Restart**\n   ```bash\n   # Restart monitoring platform\n   cd /path/to/analytics-dashboard\n   ./deployment/startup.sh\n   ```\n\n2. **Database Recovery**\n   ```bash\n   # Reinitialize databases if corrupted\n   psql -h localhost -p 5433 -U vrooli -d vrooli -f initialization/storage/postgres/schema.sql\n   psql -h localhost -p 5433 -U vrooli -d vrooli -f initialization/storage/postgres/seed.sql\n   ```\n\n3. **Reset Configuration**\n   - Configuration â†’ System â†’ \"Reset to Defaults\"\n   - Or manually restore from backup configuration\n\n### Contact and Escalation\n- **Critical Issues**: Check system logs immediately\n- **Data Loss**: Restore from latest backup\n- **Security Concerns**: Review Vault audit logs\n- **Performance Issues**: Scale resources or reduce monitoring frequency\n\n### Log Locations\n- **Startup Logs**: `deployment/startup.log`\n- **n8n Logs**: n8n web interface â†’ Executions\n- **Node-RED Logs**: Node-RED debug panel\n- **System Logs**: Individual service logs\n- **PostgreSQL Logs**: Database server logs\n- **QuestDB Logs**: QuestDB console â†’ Log tab",
              "style": {
                "padding": "15px",
                "backgroundColor": "#fff5f5",
                "border": "1px solid #fc8181",
                "borderRadius": "8px"
              }
            }
          }
        ]
      },
      "api_reference": {
        "type": "containercomponent",
        "components": [
          {
            "id": "api_overview",
            "type": "textcomponent",
            "configuration": {
              "text": "# ðŸ”Œ API Reference\n\n## API Overview\n\nThe Resource Monitoring Platform provides several API endpoints for integration with external systems, automation, and custom dashboards.\n\n**Base URLs:**\n- **n8n Webhooks**: `http://localhost:5678/webhook/`\n- **Node-RED APIs**: `http://localhost:1880/api/`\n- **QuestDB**: `http://localhost:9009/`\n- **Dashboard**: `http://localhost:5681/`",
              "style": {
                "padding": "15px",
                "backgroundColor": "#f7fafc",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "webhook_apis",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸª Webhook APIs (n8n)\n\n### Trigger Resource Discovery\n```http\nPOST http://localhost:5678/webhook/discover-resources\nContent-Type: application/json\n\n{}\n```\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Discovery workflow triggered\",\n  \"timestamp\": \"2024-01-15T10:30:00Z\"\n}\n```\n\n### Send Custom Alert\n```http\nPOST http://localhost:5678/webhook/alert-handler\nContent-Type: application/json\n\n{\n  \"resource_name\": \"my-service\",\n  \"severity\": \"warning\",\n  \"message\": \"Custom alert message\",\n  \"metric_type\": \"custom\",\n  \"metric_value\": 85,\n  \"threshold_value\": 80,\n  \"source\": \"external_system\"\n}\n```\n\n**Alert Severity Levels:**\n- `critical`: Triggers SMS + Email\n- `warning`: Triggers Email only\n- `info`: Logged only\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"alert_id\": \"alert_1642248600\",\n  \"message\": \"Alert processed successfully\",\n  \"notification_sent\": true\n}\n```",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "query_apis",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ“Š Query APIs (QuestDB)\n\n### Get Current Resource Status\n```http\nGET http://localhost:9009/exec?query=SELECT resource_name, resource_type, status, value, response_time_ms, timestamp FROM resource_metrics WHERE timestamp > dateadd('m', -5, now()) LATEST ON timestamp PARTITION BY resource_name\n```\n\n### Get Availability Metrics\n```http\nGET http://localhost:9009/exec?query=SELECT timestamp, resource_name, avg(value) as availability_percent FROM resource_metrics WHERE timestamp > dateadd('h', -24, now()) SAMPLE BY 1h ALIGN TO CALENDAR\n```\n\n### Get Alert History\n```http\nGET http://localhost:9009/exec?query=SELECT timestamp, resource_name, alert_type, severity, message FROM alert_events WHERE timestamp > dateadd('d', -7, now()) ORDER BY timestamp DESC\n```\n\n### Response Format\n```json\n{\n  \"query\": \"SELECT ...\",\n  \"columns\": [\n    {\"name\": \"timestamp\", \"type\": \"TIMESTAMP\"},\n    {\"name\": \"resource_name\", \"type\": \"STRING\"}\n  ],\n  \"dataset\": [\n    [\"2024-01-15T10:30:00.000000Z\", \"postgres\"],\n    [\"2024-01-15T10:30:00.000000Z\", \"redis\"]\n  ],\n  \"count\": 2,\n  \"timings\": {\n    \"compiler\": 0.123,\n    \"execute\": 0.456\n  }\n}\n```",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "database_apis",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ—„ï¸ Database APIs (PostgreSQL)\n\n### Get Resource Registry\n```sql\nSELECT \n  r.*,\n  rs.active_alerts,\n  rs.alerts_24h \nFROM resource_monitoring.resource_status_summary rs \nJOIN resource_monitoring.resources r ON r.id = rs.id \nORDER BY r.is_critical DESC, r.resource_name;\n```\n\n### Get Alert Rules\n```sql\nSELECT * FROM resource_monitoring.alert_rules \nWHERE is_enabled = true \nORDER BY severity DESC, rule_name;\n```\n\n### Get System Health Summary\n```sql\nSELECT * FROM resource_monitoring.get_resource_health_summary();\n```\n\n### Execute Resource Action\n```sql\nINSERT INTO resource_monitoring.action_history \n(resource_id, action_name, executed_by, success, output) \nVALUES (1, 'restart', 'api_user', true, 'Service restarted successfully');\n```\n\n### Connection Details\n- **Host**: localhost\n- **Port**: 5433\n- **Database**: vrooli\n- **Schema**: resource_monitoring\n- **User**: vrooli\n- **SSL**: Not required for localhost",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "integration_examples",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ”— Integration Examples\n\n### Python Integration\n```python\nimport requests\nimport psycopg2\nfrom datetime import datetime\n\n# Send custom alert\ndef send_alert(resource, severity, message):\n    payload = {\n        \"resource_name\": resource,\n        \"severity\": severity,\n        \"message\": message,\n        \"source\": \"python_script\",\n        \"timestamp\": datetime.now().isoformat()\n    }\n    response = requests.post(\n        \"http://localhost:5678/webhook/alert-handler\",\n        json=payload\n    )\n    return response.json()\n\n# Query current status\ndef get_resource_status():\n    conn = psycopg2.connect(\n        host=\"localhost\",\n        port=5433,\n        database=\"vrooli\",\n        user=\"vrooli\",\n        password=\"vrooli\"\n    )\n    cur = conn.cursor()\n    cur.execute(\"\"\"\n        SELECT resource_name, current_status, last_seen \n        FROM resource_monitoring.resources \n        WHERE is_enabled = true\n    \"\"\")\n    return cur.fetchall()\n\n# Trigger discovery\ndef trigger_discovery():\n    response = requests.post(\n        \"http://localhost:5678/webhook/discover-resources\"\n    )\n    return response.json()\n```\n\n### Bash Integration\n```bash\n#!/bin/bash\n\n# Send test alert\nsend_alert() {\n    curl -X POST \"http://localhost:5678/webhook/alert-handler\" \\\n        -H \"Content-Type: application/json\" \\\n        -d '{\n            \"resource_name\": \"'$1'\",\n            \"severity\": \"'$2'\",\n            \"message\": \"'$3'\",\n            \"source\": \"bash_script\"\n        }'\n}\n\n# Get metrics from QuestDB\nget_metrics() {\n    curl -s \"http://localhost:9009/exec\" \\\n        --data-urlencode \"query=SELECT * FROM resource_metrics WHERE timestamp > dateadd('h', -1, now()) ORDER BY timestamp DESC LIMIT 10\"\n}\n\n# Check system health\ncheck_health() {\n    PGPASSWORD=vrooli psql -h localhost -p 5433 -U vrooli -d vrooli \\\n        -c \"SELECT * FROM resource_monitoring.get_resource_health_summary();\"\n}\n\n# Usage examples\nsend_alert \"my-service\" \"warning\" \"Custom alert from bash\"\nget_metrics\ncheck_health\n```",
              "style": {
                "padding": "15px",
                "backgroundColor": "white",
                "border": "1px solid #e2e8f0",
                "borderRadius": "8px",
                "marginBottom": "20px"
              }
            }
          },
          {
            "id": "webhook_security",
            "type": "textcomponent",
            "configuration": {
              "text": "## ðŸ”’ Security Considerations\n\n### Authentication\n- **Local Access Only**: All APIs are designed for localhost access only\n- **No Authentication Required**: For localhost connections\n- **Firewall Protection**: Ensure services are not exposed externally\n\n### Rate Limiting\n- **Alert Webhooks**: Built-in throttling (5-15 minute cooldowns)\n- **Discovery**: Limited to one concurrent execution\n- **Queries**: No built-in limits (implement client-side)\n\n### Best Practices\n1. **Use HTTPS in Production**: Configure TLS certificates for external access\n2. **Implement Authentication**: Add API keys or JWT tokens for external integrations\n3. **Monitor API Usage**: Track API calls for abuse detection\n4. **Validate Input**: Always validate webhook payloads\n5. **Audit Logging**: Enable detailed logging for all API access\n\n### Production Deployment\nFor production use, consider:\n- Adding authentication middleware\n- Implementing rate limiting\n- Using HTTPS/TLS encryption\n- Setting up API gateways\n- Enabling comprehensive audit logging",
              "style": {
                "padding": "15px",
                "backgroundColor": "#fff5f5",
                "border": "1px solid #fc8181",
                "borderRadius": "8px"
              }
            }
          }
        ]
      }
    }
  },
  "variables": {
    "current_section": "getting_started"
  }
}