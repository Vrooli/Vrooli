{
  "monitoring": {
    "enabled": true,
    "interval": "30s",
    "retention": {
      "metrics": "30d",
      "anomalies": "90d",
      "reports": "1y"
    }
  },
  "collectors": {
    "system": {
      "enabled": true,
      "metrics": ["cpu", "memory", "disk", "network"],
      "interval": "30s"
    },
    "process": {
      "enabled": true,
      "metrics": ["top-consumers", "zombie-detection", "port-usage"],
      "interval": "60s"
    },
    "docker": {
      "enabled": false,
      "metrics": ["container-stats", "image-sizes"],
      "interval": "60s"
    },
    "custom": {
      "enabled": true,
      "metrics": ["tcp-connections", "open-files"],
      "interval": "60s"
    }
  },
  "thresholds": {
    "cpu_usage": {
      "warning": 70,
      "critical": 90,
      "action": "alert"
    },
    "memory_usage": {
      "warning": 80,
      "critical": 95,
      "action": "investigate"
    },
    "disk_usage": {
      "warning": 85,
      "critical": 95,
      "action": "alert"
    },
    "tcp_connections": {
      "warning": 500,
      "critical": 1000,
      "action": "investigate"
    },
    "load_average": {
      "warning": 4.0,
      "critical": 8.0,
      "action": "alert"
    }
  },
  "anomaly_detection": {
    "enabled": true,
    "algorithms": ["threshold", "trend_analysis", "statistical"],
    "rules": {
      "memory_leak": {
        "condition": "memory_growth > 10% per hour",
        "action": "trigger_investigation",
        "severity": "warning"
      },
      "cpu_spike": {
        "condition": "cpu_usage > 90% for 5 minutes",
        "action": "alert_and_investigate",
        "severity": "critical"
      },
      "disk_growth": {
        "condition": "disk_usage_growth > 5% per day",
        "action": "alert",
        "severity": "warning"
      },
      "connection_surge": {
        "condition": "tcp_connections increase > 50% in 10 minutes",
        "action": "investigate",
        "severity": "warning"
      }
    }
  },
  "alerting": {
    "enabled": true,
    "channels": {
      "webhook": {
        "enabled": false,
        "url": "",
        "timeout": "30s"
      },
      "email": {
        "enabled": false,
        "smtp_server": "",
        "recipients": []
      },
      "redis_queue": {
        "enabled": true,
        "queue_name": "system_alerts",
        "ttl": 3600
      }
    },
    "rate_limiting": {
      "enabled": true,
      "max_alerts_per_hour": 10,
      "cooldown_period": "300s"
    }
  },
  "reporting": {
    "enabled": true,
    "schedules": {
      "daily": {
        "enabled": true,
        "time": "09:00",
        "format": "html",
        "include": ["metrics_summary", "anomalies", "recommendations"]
      },
      "weekly": {
        "enabled": false,
        "day": "monday",
        "time": "08:00",
        "format": "pdf",
        "include": ["trends", "capacity_planning", "performance_analysis"]
      },
      "monthly": {
        "enabled": false,
        "day": 1,
        "time": "07:00",
        "format": "excel",
        "include": ["full_analysis", "recommendations", "forecasting"]
      }
    },
    "storage": {
      "database": true,
      "file_system": false,
      "retention": "90d"
    }
  },
  "ai_investigation": {
    "enabled": true,
    "triggers": {
      "critical_anomalies": true,
      "repeated_warnings": true,
      "performance_degradation": true,
      "threshold_violations": true
    },
    "providers": {
      "claude_code": {
        "enabled": true,
        "endpoint": "http://localhost:${PORT_CLAUDE_CODE}/api/investigate",
        "timeout": "60s"
      },
      "ollama": {
        "enabled": true,
        "model": "llama3.2:3b",
        "endpoint": "http://localhost:${PORT_OLLAMA}/api/generate",
        "timeout": "30s"
      }
    },
    "context": {
      "include_metrics": true,
      "include_logs": false,
      "include_recent_changes": true,
      "history_window": "1h"
    }
  },
  "storage": {
    "postgres": {
      "database": "system_monitor",
      "connection_pool": 10,
      "query_timeout": "30s"
    },
    "questdb": {
      "http_port": "${PORT_QUESTDB}",
      "query_timeout": "10s",
      "batch_size": 1000
    },
    "redis": {
      "db": 1,
      "connection_timeout": "5s",
      "key_prefix": "system_monitor:"
    }
  },
  "ui": {
    "enabled": true,
    "port": "${PORT_UI}",
    "features": {
      "realtime_dashboard": true,
      "historical_charts": true,
      "alert_management": true,
      "investigation_viewer": true,
      "threshold_editor": true
    },
    "refresh_interval": "5s",
    "data_retention_ui": "7d"
  },
  "api": {
    "enabled": true,
    "port": "${PORT_API}",
    "endpoints": {
      "metrics": "/api/metrics",
      "anomalies": "/api/anomalies",
      "investigations": "/api/investigations",
      "reports": "/api/reports",
      "health": "/health"
    },
    "rate_limiting": {
      "enabled": true,
      "requests_per_minute": 100
    },
    "authentication": {
      "enabled": false,
      "method": "api_key"
    }
  },
  "integrations": {
    "grafana": {
      "enabled": true,
      "port": "${PORT_GRAFANA}",
      "dashboards": [
        "system-overview",
        "performance-metrics",
        "anomaly-analysis"
      ]
    },
    "prometheus": {
      "enabled": false,
      "port": "${PORT_PROMETHEUS}",
      "scrape_interval": "30s"
    }
  },
  "security": {
    "encryption": {
      "enabled": false,
      "algorithm": "AES-256"
    },
    "access_control": {
      "enabled": false,
      "default_permissions": ["read"]
    }
  },
  "performance": {
    "max_concurrent_investigations": 3,
    "metric_buffer_size": 1000,
    "background_cleanup": {
      "enabled": true,
      "interval": "1h",
      "old_metrics_threshold": "30d"
    }
  }
}