{
  "value": {
    "type": "app",
    "subgrids": {
      "0": {
        "0-0-1": {
          "type": "tabscomponent",
          "configuration": {
            "tabsKind": "tabs"
          },
          "numberOfSubgrids": 4,
          "tabs": ["Dashboard", "Applications", "Agents", "Queue"],
          "subgrids": {
            "0": {
              "0-0-12": {
                "type": "text",
                "configuration": {
                  "style": {
                    "fontSize": 24,
                    "fontWeight": "bold"
                  }
                },
                "value": "Documentation Manager Dashboard"
              },
              "1-0-12": {
                "type": "statcard",
                "configuration": {
                  "title": "Total Applications",
                  "icon": "folder"
                },
                "value": "${ctx.app_stats?.total_apps || 0}"
              },
              "1-4-4": {
                "type": "statcard", 
                "configuration": {
                  "title": "Active Agents",
                  "icon": "bot"
                },
                "value": "${ctx.app_stats?.active_agents || 0}"
              },
              "1-8-4": {
                "type": "statcard",
                "configuration": {
                  "title": "Pending Items",
                  "icon": "clock"
                },
                "value": "${ctx.app_stats?.pending_items || 0}"
              },
              "2-0-6": {
                "type": "barchart",
                "configuration": {
                  "title": "Health Scores by Application"
                },
                "datasource": "${ctx.health_scores}"
              },
              "2-6-6": {
                "type": "piechart",
                "configuration": {
                  "title": "Queue Status Distribution"  
                },
                "datasource": "${ctx.queue_stats}"
              },
              "3-0-12": {
                "type": "aggridcomponent",
                "configuration": {
                  "flex": true,
                  "allColumnsAutoSize": true,
                  "pagination": true,
                  "columnDefs": [
                    {"headerName": "Application", "field": "name", "sortable": true},
                    {"headerName": "Health Score", "field": "health_score", "cellRenderer": "progressRenderer"},
                    {"headerName": "Agents", "field": "agent_count"},
                    {"headerName": "Last Scan", "field": "last_scan", "type": "date"},
                    {"headerName": "Status", "field": "status", "cellRenderer": "statusRenderer"}
                  ]
                },
                "datasource": "${ctx.recent_activity}"
              }
            },
            "1": {
              "0-0-8": {
                "type": "text",
                "configuration": {
                  "style": {
                    "fontSize": 20,
                    "fontWeight": "bold"
                  }
                },
                "value": "Applications"
              },
              "0-8-2": {
                "type": "buttoncomponent",
                "configuration": {
                  "label": "Add Application",
                  "color": "blue",
                  "size": "sm"
                },
                "recomputeIds": ["add_application"]
              },
              "0-10-2": {
                "type": "buttoncomponent", 
                "configuration": {
                  "label": "Refresh",
                  "color": "gray",
                  "size": "sm"
                },
                "recomputeIds": ["load_applications"]
              },
              "1-0-3": {
                "type": "textinputcomponent",
                "configuration": {
                  "placeholder": "Search applications...",
                  "icon": "search"
                },
                "value": "",
                "id": "search_apps"
              },
              "1-3-2": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Filter by status"
                },
                "options": [
                  {"value": "all", "label": "All"},
                  {"value": "active", "label": "Active"}, 
                  {"value": "inactive", "label": "Inactive"}
                ],
                "value": "all",
                "id": "filter_status"
              },
              "2-0-12": {
                "type": "aggridcomponent",
                "configuration": {
                  "flex": true,
                  "allColumnsAutoSize": true,
                  "pagination": true,
                  "selectFirstRowByDefault": false,
                  "columnDefs": [
                    {"headerName": "Name", "field": "name", "sortable": true, "pinned": "left"},
                    {"headerName": "Repository", "field": "repository_url", "cellRenderer": "linkRenderer"},
                    {"headerName": "Documentation Path", "field": "documentation_path"},
                    {"headerName": "Health Score", "field": "health_score", "cellRenderer": "progressRenderer"},
                    {"headerName": "Agents", "field": "agent_count", "type": "numericColumn"},
                    {"headerName": "Last Scan", "field": "last_scan", "type": "dateColumn"},
                    {"headerName": "Status", "field": "status", "cellRenderer": "statusRenderer"},
                    {"headerName": "Actions", "field": "actions", "cellRenderer": "actionsRenderer", "pinned": "right"}
                  ]
                },
                "datasource": "${ctx.applications}",
                "id": "applications_grid"
              }
            },
            "2": {
              "0-0-8": {
                "type": "text",
                "configuration": {
                  "style": {
                    "fontSize": 20,
                    "fontWeight": "bold"
                  }
                },
                "value": "Agent Management"
              },
              "0-8-2": {
                "type": "buttoncomponent",
                "configuration": {
                  "label": "Create Agent",
                  "color": "blue",
                  "size": "sm"
                },
                "recomputeIds": ["show_agent_modal"]
              },
              "0-10-2": {
                "type": "buttoncomponent",
                "configuration": {
                  "label": "Templates",
                  "color": "gray",
                  "size": "sm"
                },
                "recomputeIds": ["show_templates"]
              },
              "1-0-3": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Filter by application"
                },
                "datasource": "${ctx.application_options}",
                "value": "all",
                "id": "filter_app"
              },
              "1-3-3": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Filter by type"
                },
                "options": [
                  {"value": "all", "label": "All Types"},
                  {"value": "drift_detector", "label": "Drift Detector"},
                  {"value": "link_validator", "label": "Link Validator"},
                  {"value": "organization_analyzer", "label": "Organization Analyzer"},
                  {"value": "coverage_checker", "label": "Coverage Checker"},
                  {"value": "meta_optimizer", "label": "Meta Optimizer"}
                ],
                "value": "all",
                "id": "filter_type"
              },
              "1-6-3": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Filter by status"
                },
                "options": [
                  {"value": "all", "label": "All"},
                  {"value": "enabled", "label": "Enabled"},
                  {"value": "disabled", "label": "Disabled"}
                ],
                "value": "all",
                "id": "filter_agent_status"
              },
              "2-0-12": {
                "type": "aggridcomponent",
                "configuration": {
                  "flex": true,
                  "allColumnsAutoSize": true,
                  "pagination": true,
                  "columnDefs": [
                    {"headerName": "Name", "field": "name", "sortable": true, "pinned": "left"},
                    {"headerName": "Type", "field": "type", "cellRenderer": "typeRenderer"},
                    {"headerName": "Application", "field": "application_name"},
                    {"headerName": "Schedule", "field": "schedule_cron"},
                    {"headerName": "Performance", "field": "last_performance_score", "cellRenderer": "scoreRenderer"},
                    {"headerName": "Auto Apply", "field": "auto_apply_threshold", "cellRenderer": "thresholdRenderer"},
                    {"headerName": "Status", "field": "status", "cellRenderer": "statusRenderer"},
                    {"headerName": "Last Run", "field": "last_run", "type": "dateColumn"},
                    {"headerName": "Next Run", "field": "next_run", "type": "dateColumn"},
                    {"headerName": "Actions", "field": "actions", "cellRenderer": "agentActionsRenderer", "pinned": "right"}
                  ]
                },
                "datasource": "${ctx.agents}",
                "id": "agents_grid"
              }
            },
            "3": {
              "0-0-8": {
                "type": "text",
                "configuration": {
                  "style": {
                    "fontSize": 20,
                    "fontWeight": "bold"
                  }
                },
                "value": "Improvement Queue"
              },
              "0-8-2": {
                "type": "buttoncomponent",
                "configuration": {
                  "label": "Batch Actions",
                  "color": "orange",
                  "size": "sm"
                },
                "recomputeIds": ["show_batch_modal"]
              },
              "0-10-2": {
                "type": "buttoncomponent",
                "configuration": {
                  "label": "Refresh",
                  "color": "gray", 
                  "size": "sm"
                },
                "recomputeIds": ["load_queue"]
              },
              "1-0-2": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Filter by status"
                },
                "options": [
                  {"value": "all", "label": "All"},
                  {"value": "pending", "label": "Pending"},
                  {"value": "approved", "label": "Approved"},
                  {"value": "denied", "label": "Denied"},
                  {"value": "revision_requested", "label": "Needs Revision"}
                ],
                "value": "pending",
                "id": "filter_queue_status"
              },
              "1-2-2": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Filter by severity"
                },
                "options": [
                  {"value": "all", "label": "All"},
                  {"value": "critical", "label": "Critical"},
                  {"value": "high", "label": "High"},
                  {"value": "medium", "label": "Medium"},
                  {"value": "low", "label": "Low"}
                ],
                "value": "all",
                "id": "filter_severity"
              },
              "1-4-3": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Filter by application"
                },
                "datasource": "${ctx.application_options}",
                "value": "all",
                "id": "filter_queue_app"
              },
              "1-7-2": {
                "type": "selectcomponent",
                "configuration": {
                  "placeholder": "Sort by"
                },
                "options": [
                  {"value": "created_at", "label": "Date Created"},
                  {"value": "severity", "label": "Severity"},
                  {"value": "type", "label": "Type"}
                ],
                "value": "created_at",
                "id": "sort_queue"
              },
              "2-0-12": {
                "type": "aggridcomponent",
                "configuration": {
                  "flex": true,
                  "allColumnsAutoSize": true,
                  "pagination": true,
                  "rowSelection": "multiple",
                  "columnDefs": [
                    {"headerName": "Title", "field": "title", "sortable": true, "pinned": "left", "flex": 2},
                    {"headerName": "Type", "field": "type", "cellRenderer": "typeRenderer"},
                    {"headerName": "Severity", "field": "severity", "cellRenderer": "severityRenderer"},
                    {"headerName": "Application", "field": "application_name"},
                    {"headerName": "Agent", "field": "agent_name"},
                    {"headerName": "Status", "field": "status", "cellRenderer": "statusRenderer"},
                    {"headerName": "Created", "field": "created_at", "type": "dateColumn"},
                    {"headerName": "Actions", "field": "actions", "cellRenderer": "queueActionsRenderer", "pinned": "right"}
                  ]
                },
                "datasource": "${ctx.queue_items}",
                "id": "queue_grid"
              }
            }
          }
        }
      }
    },
    "hiddenInlineScripts": [
      {
        "name": "load_applications",
        "language": "postgresql",
        "content": "SELECT \n  a.*,\n  COUNT(ag.id) as agent_count,\n  CASE \n    WHEN a.active = true THEN 'active'\n    ELSE 'inactive'\n  END as status,\n  a.updated_at as last_scan\nFROM applications a\nLEFT JOIN agents ag ON a.id = ag.application_id AND ag.enabled = true\nWHERE \n  ($1 = 'all' OR ($1 = 'active' AND a.active = true) OR ($1 = 'inactive' AND a.active = false))\n  AND ($2 = '' OR LOWER(a.name) LIKE LOWER('%' || $2 || '%'))\nGROUP BY a.id\nORDER BY a.updated_at DESC",
        "inputs": ["${ctx.filter_status}", "${ctx.search_apps}"]
      },
      {
        "name": "load_agents",
        "language": "postgresql", 
        "content": "SELECT \n  ag.*,\n  a.name as application_name,\n  CASE \n    WHEN ag.enabled = true THEN 'enabled'\n    ELSE 'disabled'\n  END as status\nFROM agents ag\nJOIN applications a ON ag.application_id = a.id\nWHERE \n  ($1 = 'all' OR a.id::text = $1)\n  AND ($2 = 'all' OR ag.type = $2)\n  AND ($3 = 'all' OR ($3 = 'enabled' AND ag.enabled = true) OR ($3 = 'disabled' AND ag.enabled = false))\nORDER BY ag.created_at DESC",
        "inputs": ["${ctx.filter_app}", "${ctx.filter_type}", "${ctx.filter_agent_status}"]
      },
      {
        "name": "load_queue",
        "language": "postgresql",
        "content": "SELECT \n  iq.*,\n  a.name as application_name,\n  ag.name as agent_name\nFROM improvement_queue iq\nJOIN applications a ON iq.application_id = a.id\nJOIN agents ag ON iq.agent_id = ag.id\nWHERE \n  ($1 = 'all' OR iq.status = $1)\n  AND ($2 = 'all' OR iq.severity = $2)\n  AND ($3 = 'all' OR a.id::text = $3)\nORDER BY \n  CASE \n    WHEN $4 = 'severity' THEN \n      CASE iq.severity\n        WHEN 'critical' THEN 1\n        WHEN 'high' THEN 2  \n        WHEN 'medium' THEN 3\n        WHEN 'low' THEN 4\n      END\n    ELSE 0\n  END,\n  CASE WHEN $4 = 'created_at' THEN iq.created_at END DESC",
        "inputs": ["${ctx.filter_queue_status}", "${ctx.filter_severity}", "${ctx.filter_queue_app}", "${ctx.sort_queue}"]
      },
      {
        "name": "get_app_stats", 
        "language": "postgresql",
        "content": "SELECT \n  (SELECT COUNT(*) FROM applications WHERE active = true) as total_apps,\n  (SELECT COUNT(*) FROM agents WHERE enabled = true) as active_agents,\n  (SELECT COUNT(*) FROM improvement_queue WHERE status = 'pending') as pending_items"
      },
      {
        "name": "get_health_scores",
        "language": "postgresql", 
        "content": "SELECT name, health_score FROM applications WHERE active = true ORDER BY health_score DESC LIMIT 10"
      },
      {
        "name": "get_queue_stats",
        "language": "postgresql",
        "content": "SELECT status, COUNT(*) as count FROM improvement_queue GROUP BY status"
      },
      {
        "name": "get_recent_activity",
        "language": "postgresql",
        "content": "SELECT \n  a.name,\n  a.health_score,\n  COUNT(ag.id) as agent_count,\n  a.updated_at as last_scan,\n  CASE WHEN a.active = true THEN 'active' ELSE 'inactive' END as status\nFROM applications a\nLEFT JOIN agents ag ON a.id = ag.application_id\nGROUP BY a.id\nORDER BY a.updated_at DESC\nLIMIT 5"
      },
      {
        "name": "get_application_options",
        "language": "postgresql",
        "content": "SELECT id as value, name as label FROM applications WHERE active = true ORDER BY name"
      }
    ],
    "css": ".severity-critical { background-color: #fee2e2; color: #991b1b; }\n.severity-high { background-color: #fef3c7; color: #92400e; }\n.severity-medium { background-color: #dbeafe; color: #1e40af; }\n.severity-low { background-color: #f3f4f6; color: #374151; }\n\n.status-active { background-color: #dcfce7; color: #166534; }\n.status-inactive { background-color: #fee2e2; color: #991b1b; }\n.status-enabled { background-color: #dcfce7; color: #166534; }\n.status-disabled { background-color: #f3f4f6; color: #6b7280; }\n\n.type-badge { display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 500; }\n.type-drift_detector { background-color: #ddd6fe; color: #6b21a8; }\n.type-link_validator { background-color: #fecaca; color: #991b1b; }\n.type-organization_analyzer { background-color: #fed7aa; color: #9a3412; }\n.type-coverage_checker { background-color: #bfdbfe; color: #1e40af; }\n.type-meta_optimizer { background-color: #d1fae5; color: #065f46; }",
    "theme": {
      "type": "path",
      "path": "theme.json"
    }
  },
  "summary": "Comprehensive documentation management application with dashboard, application management, agent configuration, and improvement queue processing"
}