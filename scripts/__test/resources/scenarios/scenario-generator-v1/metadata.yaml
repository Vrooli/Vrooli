# Scenario Generator V1 - Meta-scenario for generating Vrooli scenarios
# This scenario deploys as a simple web app that generates other scenarios using Claude Code

scenario:
  id: scenario-generator-v1
  name: "Scenario Generator V1"
  version: "1.0.0"
  description: "A meta-scenario that generates Vrooli scenarios from customer requirements using AI"
  complexity: intermediate
  type: business-tool
  category: development
  tags:
    - ai-generation
    - meta-scenario
    - developer-tools
    - business-automation

resources:
  required:
    - windmill      # UI interface for input and display
    - n8n           # Workflow orchestration
    - claude-code   # AI scenario generation
    - postgres      # Store generation history
    - minio         # Store generated scenarios
  optional:
    - ollama        # Local validation of generated scenarios
    - redis         # Caching and task queuing

business:
  value_proposition: "Generate complete SaaS applications from customer requirements in minutes"
  target_market:
    - software-entrepreneurs
    - consultants
    - agencies
    - startups
  revenue_model: "per-scenario-generation"
  revenue_range:
    min: 50000    # $50k/year with 5-10 scenarios/month at $500-1000 each
    max: 250000   # $250k/year at scale
    currency: USD
  deployment_time: 15  # minutes to deploy this scenario
  
capabilities:
  - Generate complete Vrooli scenarios from text descriptions
  - Store and manage generated scenarios
  - Track generation history and metrics
  - Export scenarios for deployment
  - Validate scenario structure and resources

ui:
  type: windmill
  pages:
    - id: idea-input
      title: "Generate New Scenario"
      description: "Enter customer requirements to generate a complete scenario"
      components:
        - textarea: customer requirements
        - select: complexity level
        - select: target category
        - button: generate scenario
    - id: scenario-list
      title: "Generated Scenarios"
      description: "View and manage all generated scenarios"
      components:
        - table: scenario list with metadata
        - actions: download, deploy, validate
        - filters: by date, category, status

workflows:
  n8n:
    - id: scenario-generator
      trigger: webhook
      steps:
        - receive customer requirements
        - enhance prompt with documentation
        - call Claude Code API
        - parse generated scenario
        - store in MinIO
        - update PostgreSQL
        - return scenario metadata

storage:
  postgres:
    tables:
      - scenario_generations:
          - id: uuid primary key
          - customer_input: text
          - generated_at: timestamp
          - scenario_id: text
          - scenario_name: text
          - resources_required: jsonb
          - status: enum (generating, completed, failed)
          - generation_time_ms: integer
          - metadata: jsonb
  minio:
    buckets:
      - generated-scenarios:
          structure: /{year}/{month}/{scenario-id}/
          retention: 365  # days

metrics:
  track:
    - total_scenarios_generated
    - generation_success_rate
    - average_generation_time
    - resources_per_scenario
    - customer_satisfaction_score

deployment:
  startup_sequence:
    1: postgres  # Database first
    2: minio     # Object storage
    3: n8n       # Workflow engine
    4: windmill  # UI platform
    5: claude-code  # AI service
  health_checks:
    - postgres: port 5433
    - minio: port 9000
    - n8n: port 5678
    - windmill: port 5681
  initialization:
    - create database schema
    - create MinIO buckets
    - import n8n workflows
    - deploy Windmill apps
    - configure Claude Code access

testing:
  integration_tests:
    - test_scenario_generation_flow
    - test_storage_persistence
    - test_ui_functionality
    - test_error_handling
  validation:
    - generated_scenario_structure
    - resource_configuration
    - workflow_connectivity