# Vrooli Resource Settings
# Test fixture for YAML parsing and configuration management
# Created: 2025-07-29

metadata:
  name: "Resource Integration Test Settings"
  description: "YAML configuration file for testing resource management and parsing"
  version: "2.1.0"
  created: "2025-07-29T14:30:00Z"
  maintainer: "Vrooli Test System"

# Application Configuration
application:
  name: "Vrooli Test Environment"
  environment: "test"
  debug: true
  host: "0.0.0.0"
  port: 3000
  base_url: "http://localhost:3000"
  
  # Feature flags
  features:
    ai_processing: true
    document_upload: true
    automation_workflows: true
    real_time_collaboration: true
    advanced_search: false
    beta_features: true

# Database Configuration
database:
  primary:
    driver: "postgresql"
    host: "localhost"
    port: 5432
    database: "vrooli_test"
    username: "postgres"
    password: "${DB_PASSWORD:-test_password}"
    ssl_mode: "require"
    
    # Connection pooling
    pool:
      min: 5
      max: 20
      idle_timeout: 300
      acquire_timeout: 10000
      
  # Cache configuration
  cache:
    type: "redis"
    host: "localhost" 
    port: 6379
    database: 0
    ttl: 3600
    key_prefix: "vrooli:test:"

# Resource Services Configuration
resources:
  # AI Services
  ai:
    ollama:
      enabled: true
      base_url: "http://localhost:11434"
      timeout: 30000
      models:
        - name: "llama3.1:8b"
          priority: 1
          use_cases: ["general", "coding", "analysis"]
        - name: "qwen2.5-coder:7b"
          priority: 2
          use_cases: ["coding", "technical"]
        - name: "llama3.2-vision:11b"
          priority: 3
          use_cases: ["vision", "document_analysis"]
      health_check:
        enabled: true
        interval: 60000
        timeout: 5000
        endpoint: "/api/tags"
        
    whisper:
      enabled: true
      base_url: "http://localhost:8090"
      timeout: 60000
      supported_formats: ["wav", "mp3", "ogg", "m4a", "flac"]
      max_file_size: "100MB"
      
  # Automation Services  
  automation:
    n8n:
      enabled: true
      base_url: "http://localhost:5678"
      api_key: "${N8N_API_KEY}"
      workflows_path: "/data/n8n/workflows"
      max_execution_time: 300000
      
    node_red:
      enabled: true
      base_url: "http://localhost:1880"
      admin_url: "http://localhost:1880/admin"
      flows_directory: "/data/flows"
      backup:
        enabled: true
        interval: "1h"
        retention: "30d"
        
    huginn:
      enabled: true
      base_url: "http://localhost:4111"
      username: "admin"
      password: "${HUGINN_PASSWORD:-password}"
      
  # Agent Services
  agents:
    agent_s2:
      enabled: true
      base_url: "http://localhost:4113"
      timeout: 120000
      capabilities: ["web_navigation", "desktop_automation", "visual_reasoning"]
      
    browserless:
      enabled: true
      base_url: "http://localhost:4110"
      timeout: 30000
      concurrent_sessions: 10
      
  # Storage Services
  storage:
    minio:
      enabled: true
      endpoint: "http://localhost:9000"
      access_key: "${MINIO_ACCESS_KEY:-minioadmin}"
      secret_key: "${MINIO_SECRET_KEY:-minioadmin}"
      region: "us-east-1"
      buckets:
        documents:
          name: "documents"
          public: false
          versioning: true
        artifacts:
          name: "artifacts"
          public: false
          versioning: false
        backups:
          name: "backups"
          public: false
          versioning: true
          lifecycle:
            expiration_days: 90

# Security Configuration
security:
  authentication:
    jwt:
      secret: "${JWT_SECRET:-test_jwt_secret_key_for_testing}"
      expiration: 86400  # 24 hours
      issuer: "vrooli-test"
      algorithm: "HS256"
      
    oauth:
      providers:
        github:
          enabled: true
          client_id: "${GITHUB_CLIENT_ID}"
          client_secret: "${GITHUB_CLIENT_SECRET}"
          scope: "user:email,read:user"
          callback_url: "http://localhost:3000/auth/github/callback"
          
  cors:
    enabled: true
    origins: 
      - "http://localhost:3000"
      - "http://localhost:3001"
      - "http://127.0.0.1:3000"
    methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    headers: ["Content-Type", "Authorization", "X-Requested-With"]
    credentials: true
    
  rate_limiting:
    enabled: true
    window_ms: 60000  # 1 minute
    max_requests: 100
    skip_successful: false
    
# Logging Configuration
logging:
  level: "debug"
  format: "json"
  timestamp: true
  
  outputs:
    console:
      enabled: true
      colorize: true
    file:
      enabled: true
      path: "/var/log/vrooli/app.log"
      max_size: "10MB"
      max_files: 10
      rotate: true
    remote:
      enabled: false
      endpoint: "http://logging-service:9200"
      index: "vrooli-logs"
      
  modules:
    database: "info"
    resources: "debug"
    security: "warn"
    authentication: "info"
    automation: "debug"

# Monitoring Configuration
monitoring:
  metrics:
    enabled: true
    prometheus:
      endpoint: "/metrics"
      port: 9090
      collect_default: true
      
  health_checks:
    enabled: true
    endpoint: "/health"
    interval: 30000
    timeout: 5000
    
    services:
      database:
        enabled: true
        critical: true
        timeout: 3000
      redis:
        enabled: true
        critical: true
        timeout: 2000
      ollama:
        enabled: true
        critical: false
        timeout: 5000
      minio:
        enabled: true
        critical: false
        timeout: 3000

# Testing Configuration
testing:
  fixtures:
    path: "/app/tests/fixtures"
    auto_load: true
    
  mocks:
    enabled: true
    external_apis: true
    
  coverage:
    enabled: true
    threshold: 80
    reports: ["text", "html", "json"]
    
# Development Configuration
development:
  hot_reload: true
  auto_restart: true
  source_maps: true
  
  debugging:
    enabled: true
    port: 9229
    break_on_start: false