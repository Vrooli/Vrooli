{
  "name": "Dashboard Monitoring with Browserless",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 1
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:4110/chrome/screenshot",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"url\": \"http://localhost:3000/dashboard\",\n  \"options\": {\n    \"fullPage\": true,\n    \"type\": \"png\",\n    \"width\": 1920,\n    \"height\": 1080\n  },\n  \"gotoOptions\": {\n    \"waitUntil\": \"networkidle2\"\n  },\n  \"waitFor\": 2000\n}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "id": "browserless-screenshot",
      "name": "Capture Dashboard",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [450, 300]
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=/tmp/dashboard-{{$now.format('yyyy-MM-dd-HH-mm')}}.png",
        "dataPropertyName": "data"
      },
      "id": "save-screenshot",
      "name": "Save Screenshot",
      "type": "n8n-nodes-base.writeBinaryFile",
      "typeVersion": 1,
      "position": [650, 300]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:4110/chrome/scrape",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"url\": \"http://localhost:3000/dashboard\",\n  \"elements\": [\n    {\"selector\": \".metric-value\", \"property\": \"innerText\"},\n    {\"selector\": \".status-indicator\", \"property\": \"className\"},\n    {\"selector\": \".last-updated\", \"property\": \"innerText\"}\n  ],\n  \"gotoOptions\": {\n    \"waitUntil\": \"networkidle2\"\n  }\n}"
      },
      "id": "scrape-metrics",
      "name": "Scrape Metrics",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [450, 450]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json.body[1].className}}",
              "operation": "contains",
              "value2": "error"
            }
          ]
        }
      },
      "id": "check-status",
      "name": "Check Status",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [650, 450]
    },
    {
      "parameters": {
        "resource": "message",
        "operation": "sendPrivate",
        "user": "admin@example.com",
        "message": "=⚠️ Dashboard Alert!\n\nStatus: Error detected\nMetric Value: {{$node['scrape-metrics'].json.body[0].innerText}}\nLast Updated: {{$node['scrape-metrics'].json.body[2].innerText}}\n\nScreenshot saved to: {{$node['save-screenshot'].json.fullPath}}"
      },
      "id": "send-alert",
      "name": "Send Alert",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [850, 400]
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "status",
              "value": "OK"
            }
          ]
        }
      },
      "id": "all-good",
      "name": "All Good",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [850, 500]
    }
  ],
  "connections": {
    "schedule-trigger": {
      "main": [
        [
          {
            "node": "browserless-screenshot",
            "type": "main",
            "index": 0
          },
          {
            "node": "scrape-metrics",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "browserless-screenshot": {
      "main": [
        [
          {
            "node": "save-screenshot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "scrape-metrics": {
      "main": [
        [
          {
            "node": "check-status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check-status": {
      "main": [
        [
          {
            "node": "send-alert",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "all-good",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateId": "browserless-dashboard-monitoring"
  },
  "pinData": {},
  "versionId": "01",
  "triggerCount": 1,
  "tags": [
    {
      "name": "browserless",
      "createdAt": "2025-07-28T00:00:00.000Z"
    },
    {
      "name": "monitoring",
      "createdAt": "2025-07-28T00:00:00.000Z"
    }
  ]
}