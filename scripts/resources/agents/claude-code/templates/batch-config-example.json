{
  "name": "Code Quality Improvement Workflow",
  "description": "Multi-stage workflow to analyze and improve code quality",
  "defaults": {
    "max_turns": 30,
    "timeout": 1800,
    "allowed_tools": ["Read", "Edit", "MultiEdit", "Bash(npm test)"],
    "output_format": "automation"
  },
  "stages": [
    {
      "name": "code_analysis",
      "prompt": "Analyze the entire codebase for quality issues, security vulnerabilities, and areas for improvement. Focus on TypeScript/JavaScript files.",
      "tools": ["Read", "Grep", "Glob"],
      "max_turns": 15,
      "required": false
    },
    {
      "name": "fix_linting_issues", 
      "prompt": "Fix all linting errors and warnings found in the codebase. Make sure to run linting tools and address any issues.",
      "tools": ["Read", "Edit", "MultiEdit", "Bash(npm run lint)"],
      "max_turns": 50,
      "depends_on": ["code_analysis"],
      "required": false
    },
    {
      "name": "improve_type_safety",
      "prompt": "Improve TypeScript type safety by adding missing types, fixing any type errors, and ensuring proper type annotations.",
      "tools": ["Read", "Edit", "MultiEdit", "Bash(npx tsc --noEmit)"],
      "max_turns": 40,
      "required": false
    },
    {
      "name": "update_documentation",
      "prompt": "Update code documentation including JSDoc comments for functions, README files, and inline comments for complex logic.",
      "tools": ["Read", "Write", "Edit"],
      "max_turns": 25,
      "required": false
    },
    {
      "name": "run_tests",
      "prompt": "Run the test suite and fix any failing tests. Ensure all tests pass before completing.",
      "tools": ["Read", "Edit", "Bash(npm test)"],
      "max_turns": 30,
      "required": true
    }
  ]
}