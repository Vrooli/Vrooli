{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Resource Credentials Response Schema",
  "description": "Standardized format for resource CLI credentials command response",
  "type": "object",
  "required": ["resource", "status", "connections"],
  "properties": {
    "resource": {
      "type": "string",
      "description": "Resource name (matches directory name)"
    },
    "status": {
      "type": "string",
      "enum": ["running", "stopped", "error"],
      "description": "Current resource status"
    },
    "connections": {
      "type": "array",
      "description": "Array of available connections for this resource",
      "items": {
        "type": "object",
        "required": ["id", "name", "credential_type", "connection"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for this connection (e.g., 'main', 'db-0', 'api')"
          },
          "name": {
            "type": "string", 
            "description": "Human-readable name for this connection"
          },
          "credential_type": {
            "type": "string",
            "description": "Generic credential type for automation workflows",
            "enum": [
              "postgres", "redis", "s3", "httpHeaderAuth", "httpBasicAuth",
              "ollama", "httpDigestAuth", "oauth2", "jwt", "apiKey"
            ]
          },
          "connection": {
            "type": "object",
            "description": "Connection parameters",
            "required": ["host"],
            "properties": {
              "host": {
                "type": "string",
                "description": "Host address"
              },
              "port": {
                "type": "integer",
                "description": "Port number"
              },
              "database": {
                "type": "string",
                "description": "Database name (for database connections)"
              },
              "path": {
                "type": "string",
                "description": "API path or endpoint"
              },
              "ssl": {
                "type": "boolean",
                "default": false,
                "description": "Whether to use SSL/TLS"
              }
            }
          },
          "auth": {
            "type": "object",
            "description": "Authentication details",
            "properties": {
              "username": {
                "type": "string",
                "description": "Username for basic auth"
              },
              "password": {
                "type": "string",
                "description": "Password or secret"
              },
              "token": {
                "type": "string",
                "description": "API token or JWT"
              },
              "api_key": {
                "type": "string",
                "description": "API key"
              },
              "header_name": {
                "type": "string",
                "description": "Custom header name for authentication"
              },
              "header_value": {
                "type": "string",
                "description": "Custom header value for authentication"
              }
            }
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata for this connection",
            "properties": {
              "description": {
                "type": "string",
                "description": "Description of this connection"
              },
              "version": {
                "type": "string",
                "description": "Resource version"
              },
              "capabilities": {
                "type": "array",
                "items": {"type": "string"},
                "description": "List of supported capabilities"
              }
            }
          }
        }
      }
    }
  },
  "examples": [
    {
      "resource": "redis",
      "status": "running",
      "connections": [
        {
          "id": "db-0",
          "name": "Redis Database 0",
          "credential_type": "redis",
          "connection": {
            "host": "localhost",
            "port": 6379,
            "database": 0
          },
          "auth": {
            "password": "secret123"
          }
        }
      ]
    },
    {
      "resource": "postgres",
      "status": "running", 
      "connections": [
        {
          "id": "main",
          "name": "PostgreSQL Main Database",
          "credential_type": "postgres",
          "connection": {
            "host": "localhost",
            "port": 5432,
            "database": "vrooli",
            "ssl": false
          },
          "auth": {
            "username": "postgres",
            "password": "password123"
          }
        }
      ]
    },
    {
      "resource": "ollama",
      "status": "running",
      "connections": [
        {
          "id": "api",
          "name": "Ollama API",
          "credential_type": "ollama",
          "connection": {
            "host": "localhost",
            "port": 11434,
            "path": "/api"
          },
          "metadata": {
            "description": "Local AI inference API",
            "capabilities": ["generate", "embed", "chat"]
          }
        }
      ]
    }
  ]
}
