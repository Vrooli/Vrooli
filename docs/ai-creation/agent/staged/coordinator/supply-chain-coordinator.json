{
    "identity": {
        "name": "supply-chain-coordinator",
        "version": "1.0.0"
    },
    "goal": "Manages procurement, inventory, and logistics workflows",
    "role": "coordinator",
    "subscriptions": [
        "swarm/resource/updated",
        "run/completed",
        "step/failed"
    ],
    "behaviors": [
        {
            "trigger": {
                "topic": "swarm/resource/updated",
                "when": "event.data.type == 'inventory' && event.data.remaining < event.data.threshold"
            },
            "action": {
                "type": "routine",
                "label": "Procurement Planner",
                "inputMap": {
                    "inventoryLevel": "event.data.remaining",
                    "demandForecast": "blackboard.supply.forecast",
                    "vendorAvailability": "blackboard.supply.vendors",
                    "logisticsConstraints": "blackboard.supply.logistics"
                }
            },
            "qos": 2
        },
        {
            "trigger": {
                "topic": "run/completed",
                "when": "event.data.tags.includes('procurement') || event.data.tags.includes('logistics')"
            },
            "action": {
                "type": "invoke",
                "purpose": "Coordinate supply chain activities, optimize vendor relationships, and manage logistics workflows"
            },
            "qos": 1
        },
        {
            "trigger": {
                "topic": "step/failed",
                "when": "event.data.tags.includes('supplier') || event.data.tags.includes('delivery')"
            },
            "action": {
                "type": "routine",
                "label": "Supply Chain Recovery",
                "inputMap": {
                    "failureDetails": "event.data.error",
                    "alternativeSuppliers": "blackboard.supply.alternatives",
                    "contingencyPlans": "blackboard.supply.contingency"
                }
            },
            "qos": 2
        }
    ],
    "prompt": {
        "mode": "supplement",
        "source": "direct",
        "content": "You are the Supply Chain Coordinator, responsible for managing procurement, inventory, and logistics workflows across the organization. Always maintain supply continuity and ensure adequate inventory levels to meet demand. You have permission to switch suppliers when necessary to maintain service levels or improve efficiency, negotiate with vendors, and coordinate logistics operations. Never exceed the allocated procurement budget without proper authorization, compromise on quality standards for cost savings, or allow critical inventory shortages to occur."
    },
    "resources": [
        {
            "type": "blackboard",
            "label": "supply-chain-apis",
            "permissions": [
                "read",
                "write"
            ],
            "scope": "supply.apis",
            "description": "Integration with supply chain management systems"
        },
        {
            "type": "blackboard",
            "label": "inventory-systems",
            "permissions": [
                "read",
                "write"
            ],
            "scope": "supply.inventory",
            "description": "Inventory tracking and management systems"
        },
        {
            "type": "blackboard",
            "label": "logistics-platforms",
            "permissions": [
                "read"
            ],
            "scope": "supply.logistics",
            "description": "Logistics and shipping platform integrations"
        },
        {
            "type": "routine",
            "label": "Procurement Planner",
            "permissions": [
                "read"
            ],
            "description": "Plan procurement activities and vendor selection"
        },
        {
            "type": "routine",
            "label": "Supply Chain Recovery",
            "permissions": [
                "read"
            ],
            "description": "Recover from supply chain disruptions"
        }
    ]
}