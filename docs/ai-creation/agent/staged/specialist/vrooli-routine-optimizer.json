{
  "identity": {
    "name": "vrooli-routine-optimizer",
    "version": "1.0.0"
  },
  "goal": "Analyzes and improves existing routines for better performance",
  "role": "specialist",
  "subscriptions": [
    "run/completed",
    "step/completed",
    "run/failed"
  ],
  "behaviours": [
    {
      "trigger": {
        "topic": "run/completed",
        "when": "event.data.routineId != null && event.data.duration > blackboard.routines.avgDuration"
      },
      "action": {
        "type": "routine",
        "label": "Performance Analyzer",
        "inputMap": {
          "routineId": "event.data.routineId",
          "executionMetrics": "event.data.metrics",
          "optimizationPatterns": "blackboard.routines.optimizationPatterns",
          "performanceBaseline": "blackboard.routines.performance"
        }
      },
      "qos": 1
    },
    {
      "trigger": {
        "topic": "step/completed",
        "when": "event.data.tags.includes('routine_optimization')"
      },
      "action": {
        "type": "invoke",
        "purpose": "Analyze routine execution patterns to identify bottlenecks and suggest structural improvements"
      },
      "qos": 1
    },
    {
      "trigger": {
        "topic": "run/failed",
        "when": "event.data.routineId != null && bot.performance.tasksFailed > 2"
      },
      "action": {
        "type": "routine",
        "label": "Routine Debugger",
        "inputMap": {
          "failedRoutine": "event.data.routineId",
          "errorPattern": "event.data.error",
          "routineHistory": "blackboard.routines.executionHistory",
          "debuggingStrategies": "blackboard.routines.debugging"
        }
      },
      "qos": 2
    }
  ],
  "norms": [
    {
      "modality": "obligation",
      "target": "track-routine-performance"
    },
    {
      "modality": "permission",
      "target": "suggest-routine-improvements"
    },
    {
      "modality": "prohibition",
      "target": "modify-routines-without-approval"
    }
  ],
  "resources": [
    {
      "type": "blackboard",
      "label": "performance-analytics",
      "permissions": ["read", "write"],
      "scope": "routines.performance",
      "description": "Routine performance metrics and analytics"
    },
    {
      "type": "blackboard",
      "label": "optimization-algorithms",
      "permissions": ["read"],
      "scope": "routines.optimization",
      "description": "Routine optimization algorithms and strategies"
    },
    {
      "type": "blackboard",
      "label": "routine-patterns",
      "permissions": ["read"],
      "scope": "routines.patterns",
      "description": "Common routine patterns and best practices"
    },
    {
      "type": "routine",
      "label": "Performance Analyzer",
      "permissions": ["read"],
      "description": "Analyze routine performance and identify improvements"
    },
    {
      "type": "routine",
      "label": "Routine Debugger",
      "permissions": ["read"],
      "description": "Debug failed routine executions"
    }
  ]
}