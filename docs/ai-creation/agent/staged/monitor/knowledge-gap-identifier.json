{
    "identity": {
        "name": "knowledge-gap-identifier",
        "version": "1.0.0"
    },
    "goal": "Detects areas where expertise or information is lacking",
    "role": "monitor",
    "subscriptions": [
        "run/failed",
        "step/failed",
        "run/decision/requested"
    ],
    "behaviors": [
        {
            "trigger": {
                "topic": "run/failed",
                "when": "event.data.failure_reason == 'insufficient_knowledge' || event.data.failure_reason == 'missing_expertise'"
            },
            "action": {
                "type": "routine",
                "label": "Gap Detector",
                "inputMap": {
                    "failureContext": "event.data.failure",
                    "knowledgeRequirements": "event.data.requirements",
                    "knowledgeMapping": "blackboard.knowledge.mapping",
                    "gapAnalysis": "blackboard.knowledge.gaps"
                }
            },
            "qos": 1
        },
        {
            "trigger": {
                "topic": "step/failed",
                "when": "event.data.failure_type == 'knowledge_gap' || event.data.tags.includes('expertise_needed')"
            },
            "action": {
                "type": "invoke",
                "purpose": "Identify knowledge gaps that may impede goal achievement and recommend areas for knowledge acquisition or expertise development"
            },
            "qos": 1
        },
        {
            "trigger": {
                "topic": "run/decision/requested",
                "when": "event.data.decision.complexity == 'high' || event.data.decision.expertise_required == true"
            },
            "action": {
                "type": "routine",
                "label": "Expertise Mapper",
                "inputMap": {
                    "decisionContext": "event.data.decision",
                    "expertiseNeeded": "event.data.expertise",
                    "expertiseTracking": "blackboard.knowledge.expertise"
                }
            },
            "qos": 1
        }
    ],
    "prompt": "You are a knowledge gap identifier that detects areas where expertise or information is lacking. Your role is to identify critical gaps and map knowledge requirements, but you must not ignore expertise needs. When encountering knowledge gaps or expertise requirements, focus on recommending areas for knowledge acquisition or expertise development. Analyze failure patterns and decision complexity to identify missing competencies.",
    "resources": [
        {
            "type": "blackboard",
            "label": "knowledge-mapping",
            "permissions": [
                "read",
                "write"
            ],
            "scope": "knowledge.mapping",
            "description": "Knowledge mapping and domain expertise tracking"
        },
        {
            "type": "blackboard",
            "label": "gap-analysis",
            "permissions": [
                "read",
                "write"
            ],
            "scope": "knowledge.gaps",
            "description": "Knowledge gap analysis and identification tools"
        },
        {
            "type": "blackboard",
            "label": "expertise-tracking",
            "permissions": [
                "read"
            ],
            "scope": "knowledge.expertise",
            "description": "Expertise tracking and competency assessment"
        },
        {
            "type": "routine",
            "label": "Gap Detector",
            "permissions": [
                "read"
            ],
            "description": "Detect knowledge gaps and missing expertise"
        },
        {
            "type": "routine",
            "label": "Expertise Mapper",
            "permissions": [
                "read"
            ],
            "description": "Map expertise requirements and knowledge needs"
        }
    ]
}