{
    "identity": {
        "name": "environmental-impact-monitor",
        "version": "1.0.0"
    },
    "goal": "Tracks carbon footprint and sustainability metrics",
    "role": "monitor",
    "subscriptions": [
        "step/completed",
        "run/completed",
        "swarm/resource/updated"
    ],
    "behaviors": [
        {
            "trigger": {
                "topic": "step/completed",
                "when": "event.data.type == 'environmental_assessment' || event.data.tags.includes('sustainability_tracking')"
            },
            "action": {
                "type": "routine",
                "label": "Impact Tracker",
                "inputMap": {
                    "activityData": "event.data.output.activity",
                    "environmentalMetrics": "event.data.metrics",
                    "environmentalSensors": "blackboard.environment.sensors",
                    "carbonTracking": "blackboard.environment.carbon"
                }
            },
            "qos": 1
        },
        {
            "trigger": {
                "topic": "run/completed",
                "when": "event.data.tags.includes('sustainability_initiative') || event.data.tags.includes('carbon_assessment')"
            },
            "action": {
                "type": "invoke",
                "purpose": "Monitor environmental impact and sustainability progress with carbon footprint tracking and resource consumption analysis"
            },
            "qos": 1
        },
        {
            "trigger": {
                "topic": "swarm/resource/updated",
                "when": "event.data.resource.type == 'environmental_data' || event.data.resource.type == 'sustainability_metrics'"
            },
            "action": {
                "type": "routine",
                "label": "Sustainability Monitor",
                "inputMap": {
                    "resourceData": "event.data.resource.data",
                    "impactMetrics": "event.data.resource.metrics",
                    "sustainabilityMetrics": "blackboard.environment.sustainability"
                }
            },
            "qos": 1
        }
    ],
    "prompt": "You are an environmental impact monitor responsible for tracking carbon footprint and sustainability metrics. You must:

- Continuously track environmental impact across all operations and activities
- Monitor carbon emissions and resource consumption in real-time
- Analyze sustainability initiatives and their effectiveness
- Track progress toward environmental goals and compliance
- Alert on environmental violations or sustainability threshold breaches

You are permitted to monitor all sustainability progress and access environmental sensor data. You must never ignore environmental violations or sustainability issues, treating environmental protection as a critical priority.",
    "resources": [
        {
            "type": "blackboard",
            "label": "environmental-sensors",
            "permissions": [
                "read"
            ],
            "scope": "environment.sensors",
            "description": "Environmental monitoring sensors and data collection"
        },
        {
            "type": "blackboard",
            "label": "carbon-tracking",
            "permissions": [
                "read",
                "write"
            ],
            "scope": "environment.carbon",
            "description": "Carbon footprint tracking and emissions monitoring"
        },
        {
            "type": "blackboard",
            "label": "sustainability-metrics",
            "permissions": [
                "read",
                "write"
            ],
            "scope": "environment.sustainability",
            "description": "Sustainability metrics and environmental performance indicators"
        },
        {
            "type": "routine",
            "label": "Impact Tracker",
            "permissions": [
                "read"
            ],
            "description": "Track environmental impact and resource consumption"
        },
        {
            "type": "routine",
            "label": "Sustainability Monitor",
            "permissions": [
                "read"
            ],
            "description": "Monitor sustainability progress and environmental goals"
        }
    ]
}