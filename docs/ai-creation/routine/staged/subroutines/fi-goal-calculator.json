{
  "id": "7829564732190850022",
  "publicId": "fi-goals-v1",
  "resourceType": "Routine",
  "isPrivate": false,
  "permissions": "{}",
  "isInternal": false,
  "tags": [],
  "versions": [
    {
      "id": "7829564732190850023",
      "publicId": "fi-goals-v1-0",
      "versionLabel": "1.0.0",
      "versionNotes": "Initial version - Financial independence goal setting and calculation",
      "isComplete": true,
      "isPrivate": false,
      "versionIndex": 0,
      "isAutomatable": true,
      "resourceSubType": "RoutineCode",
      "config": {
        "__version": "1.0",
        "callDataCode": {
          "__version": "1.0",
          "schema": {
            "code": "function calculateFIGoals(input) {\n  const { independenceGoals, retirementPlans, timeHorizon } = input;\n  \n  // Constants for calculations\n  const SAFE_WITHDRAWAL_RATE = 0.04; // 4% rule\n  const INFLATION_RATE = 0.03; // 3% average inflation\n  const INVESTMENT_RETURN = 0.07; // 7% average market return\n  \n  const result = {\n    fiNumber: {},\n    timelineGoals: [],\n    lifestyleRequirements: {}\n  };\n  \n  // Calculate annual expenses needed\n  const desiredAnnualExpenses = independenceGoals.desiredMonthlyExpenses * 12;\n  const inflationAdjustedExpenses = desiredAnnualExpenses * Math.pow(1 + INFLATION_RATE, parseInt(timeHorizon));\n  \n  // Calculate FI number using 4% rule\n  result.fiNumber = {\n    basicFI: Math.round(desiredAnnualExpenses / SAFE_WITHDRAWAL_RATE),\n    inflationAdjustedFI: Math.round(inflationAdjustedExpenses / SAFE_WITHDRAWAL_RATE),\n    coastFI: Math.round((desiredAnnualExpenses / SAFE_WITHDRAWAL_RATE) * 0.6), // 60% for Coast FI\n    leanFI: Math.round((desiredAnnualExpenses * 0.7) / SAFE_WITHDRAWAL_RATE), // 70% expenses for Lean FI\n    fatFI: Math.round((desiredAnnualExpenses * 1.5) / SAFE_WITHDRAWAL_RATE) // 150% for Fat FI\n  };\n  \n  // Calculate milestone timeline\n  const targetFI = result.fiNumber.inflationAdjustedFI;\n  const currentNetWorth = independenceGoals.currentNetWorth || 0;\n  const annualSavings = independenceGoals.plannedAnnualSavings || 0;\n  \n  // Generate yearly milestones\n  let accumulated = currentNetWorth;\n  const years = parseInt(timeHorizon);\n  \n  for (let year = 1; year <= years; year++) {\n    accumulated = accumulated * (1 + INVESTMENT_RETURN) + annualSavings;\n    const progress = Math.round((accumulated / targetFI) * 100);\n    \n    result.timelineGoals.push({\n      year: year,\n      targetAmount: Math.round(accumulated),\n      progressPercentage: progress,\n      milestone: progress >= 100 ? 'FI Achieved!' : \n                 progress >= 75 ? 'Final Sprint' :\n                 progress >= 50 ? 'Halfway There' :\n                 progress >= 25 ? 'Building Momentum' : 'Foundation Phase'\n    });\n    \n    if (accumulated >= targetFI) break;\n  }\n  \n  // Calculate lifestyle requirements\n  result.lifestyleRequirements = {\n    monthlyBudget: independenceGoals.desiredMonthlyExpenses,\n    annualBudget: desiredAnnualExpenses,\n    housingCosts: Math.round(desiredAnnualExpenses * 0.3), // 30% for housing\n    healthcareBudget: Math.round(desiredAnnualExpenses * 0.15), // 15% for healthcare\n    discretionarySpending: Math.round(desiredAnnualExpenses * 0.25), // 25% for fun\n    essentialExpenses: Math.round(desiredAnnualExpenses * 0.6), // 60% for essentials\n    bufferFund: Math.round(desiredAnnualExpenses * 0.1) // 10% buffer\n  };\n  \n  // Add retirement plan details\n  if (retirementPlans.type) {\n    result.retirementStrategy = {\n      type: retirementPlans.type,\n      geographicArbitrage: retirementPlans.consideringRelocation || false,\n      partTimeWork: retirementPlans.planningPartTime || false,\n      socialSecurityAge: retirementPlans.ssAge || 67\n    };\n  }\n  \n  return result;\n}\n\n// Execute the calculation\nconst output = calculateFIGoals(input);\nreturn output;",
            "language": "javascript"
          }
        },
        "formInput": {
          "__version": "1.0",
          "schema": {
            "containers": [],
            "elements": [
              {
                "fieldName": "independenceGoals",
                "id": "independence_goals_input",
                "label": "FI Goals & Current Status",
                "type": "JSON",
                "isRequired": true,
                "props": {
                  "placeholder": "Desired expenses, current net worth, savings rate"
                }
              },
              {
                "fieldName": "retirementPlans",
                "id": "retirement_plans_input",
                "label": "Retirement Vision",
                "type": "JSON",
                "isRequired": true,
                "props": {
                  "placeholder": "Type of retirement, location, activities"
                }
              },
              {
                "fieldName": "timeHorizon",
                "id": "time_horizon_input",
                "label": "Years to FI",
                "type": "Text",
                "isRequired": true,
                "props": {
                  "placeholder": "Target years to achieve FI (e.g., '10')"
                }
              }
            ]
          }
        },
        "formOutput": {
          "__version": "1.0",
          "schema": {
            "containers": [],
            "elements": [
              {
                "fieldName": "fiNumber",
                "id": "fi_number_output",
                "label": "FI Target Numbers",
                "type": "JSON"
              },
              {
                "fieldName": "timelineGoals",
                "id": "timeline_goals_output",
                "label": "Milestone Timeline",
                "type": "JSON"
              },
              {
                "fieldName": "lifestyleRequirements",
                "id": "lifestyle_requirements_output",
                "label": "Lifestyle Funding Needs",
                "type": "JSON"
              }
            ]
          }
        },
        "executionStrategy": "deterministic"
      },
      "translations": [
        {
          "id": "7829564732190850024",
          "language": "en",
          "name": "FI Goal Calculator",
          "description": "Calculates financial independence numbers, creates milestone timelines, and determines lifestyle funding requirements based on retirement goals.",
          "instructions": "Provide your desired retirement lifestyle expenses, current financial position, and target timeline. The routine will calculate your FI number variants (Lean, Regular, Fat FI) and create a year-by-year milestone plan."
        }
      ]
    }
  ]
}