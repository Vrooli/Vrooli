{
  "id": "7829564732190847180",
  "publicId": "home-maint-v1",
  "resourceType": "Routine",
  "isPrivate": false,
  "permissions": "{}",
  "isInternal": false,
  "tags": [],
  "versions": [
    {
      "id": "7829564732190847181",
      "publicId": "maintenance-v1",
      "versionLabel": "1.0.0",
      "versionNotes": "Initial version",
      "isComplete": true,
      "isPrivate": false,
      "versionIndex": 0,
      "isAutomatable": true,
      "resourceSubType": "RoutineCode",
      "config": {
        "__version": "1.0",
        "callDataCode": {
          "__version": "1.0",
          "schema": {
            "language": "python",
            "code": "import json\nimport datetime\nfrom dateutil.relativedelta import relativedelta\n\ndef create_maintenance_schedule():\n    # Get inputs\n    home_type = globals().get('home_type', 'Single family house')\n    custom_tasks = globals().get('custom_tasks', '')\n    maintenance_history = globals().get('maintenance_history', '')\n    current_season = globals().get('current_season', 'Spring')\n    home_age = globals().get('home_age', '5-10 years')\n    climate_zone = globals().get('climate_zone', 'Temperate')\n    \n    # Base maintenance tasks by category\n    base_tasks = {\n        'hvac': [\n            {'task': 'Replace HVAC filters', 'frequency': 'quarterly', 'season': 'all', 'importance': 'high'},\n            {'task': 'HVAC system professional inspection', 'frequency': 'annual', 'season': 'spring', 'importance': 'high'},\n            {'task': 'Clean air vents and registers', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'medium'},\n            {'task': 'Check and clean dryer vents', 'frequency': 'annual', 'season': 'fall', 'importance': 'high'},\n        ],\n        'plumbing': [\n            {'task': 'Check for leaky faucets and toilets', 'frequency': 'quarterly', 'season': 'all', 'importance': 'medium'},\n            {'task': 'Test water pressure', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'medium'},\n            {'task': 'Drain water heater and check temperature', 'frequency': 'annual', 'season': 'fall', 'importance': 'high'},\n            {'task': 'Inspect pipes for leaks or damage', 'frequency': 'annual', 'season': 'spring', 'importance': 'high'},\n            {'task': 'Clean showerheads and faucet aerators', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'low'},\n        ],\n        'electrical': [\n            {'task': 'Test GFCI outlets', 'frequency': 'monthly', 'season': 'all', 'importance': 'high'},\n            {'task': 'Check electrical panel for issues', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'high'},\n            {'task': 'Test smoke and carbon monoxide detectors', 'frequency': 'monthly', 'season': 'all', 'importance': 'high'},\n            {'task': 'Replace smoke detector batteries', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'high'},\n        ],\n        'exterior': [\n            {'task': 'Clean gutters and downspouts', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'high'},\n            {'task': 'Inspect roof for damage', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'high'},\n            {'task': 'Pressure wash exterior surfaces', 'frequency': 'annual', 'season': 'spring', 'importance': 'medium'},\n            {'task': 'Check and repair caulking', 'frequency': 'annual', 'season': 'fall', 'importance': 'medium'},\n            {'task': 'Inspect and clean windows', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'low'},\n        ],\n        'interior': [\n            {'task': 'Deep clean carpets and upholstery', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'medium'},\n            {'task': 'Check and tighten loose handles and fixtures', 'frequency': 'quarterly', 'season': 'all', 'importance': 'low'},\n            {'task': 'Organize and declutter storage areas', 'frequency': 'quarterly', 'season': 'all', 'importance': 'low'},\n            {'task': 'Check door and window weatherstripping', 'frequency': 'annual', 'season': 'fall', 'importance': 'medium'},\n        ],\n        'seasonal': [\n            {'task': 'Winterize outdoor water spigots', 'frequency': 'annual', 'season': 'fall', 'importance': 'high'},\n            {'task': 'Service lawn mower and garden equipment', 'frequency': 'annual', 'season': 'spring', 'importance': 'medium'},\n            {'task': 'Check sprinkler system', 'frequency': 'annual', 'season': 'spring', 'importance': 'medium'},\n            {'task': 'Trim trees and bushes', 'frequency': 'biannual', 'season': 'spring,fall', 'importance': 'medium'},\n        ]\n    }\n    \n    def adjust_for_home_type(tasks, home_type):\n        \"\"\"Adjust task list based on home type\"\"\"\n        if 'apartment' in home_type.lower() or 'condo' in home_type.lower():\n            # Remove tasks typically handled by building management\n            exclude_tasks = ['roof', 'gutter', 'exterior', 'sprinkler', 'lawn mower']\n            filtered_tasks = {}\n            for category, task_list in tasks.items():\n                filtered_tasks[category] = []\n                for task in task_list:\n                    if not any(exclude in task['task'].lower() for exclude in exclude_tasks):\n                        filtered_tasks[category].append(task)\n            return filtered_tasks\n        return tasks\n    \n    def adjust_for_climate(tasks, climate_zone):\n        \"\"\"Adjust frequency based on climate\"\"\"\n        if climate_zone.lower() in ['tropical', 'humid']:\n            # More frequent HVAC maintenance in humid climates\n            for category in tasks:\n                for task in tasks[category]:\n                    if 'hvac' in task['task'].lower() or 'filter' in task['task'].lower():\n                        if task['frequency'] == 'quarterly':\n                            task['frequency'] = 'monthly'\n                            task['climate_note'] = 'Increased frequency due to humid climate'\n        return tasks\n    \n    def parse_custom_tasks(custom_text):\n        \"\"\"Parse custom tasks from user input\"\"\"\n        custom = []\n        if custom_text:\n            lines = custom_text.strip().split('\\n')\n            for line in lines:\n                if line.strip():\n                    custom.append({\n                        'task': line.strip(),\n                        'frequency': 'annual',  # Default frequency\n                        'season': 'spring',  # Default season\n                        'importance': 'medium',\n                        'custom': True\n                    })\n        return custom\n    \n    def calculate_schedule_dates(current_season='Spring'):\n        \"\"\"Calculate actual dates for maintenance tasks\"\"\"\n        today = datetime.date.today()\n        current_year = today.year\n        \n        # Season start dates (approximate)\n        seasons = {\n            'spring': datetime.date(current_year, 3, 20),\n            'summer': datetime.date(current_year, 6, 21),\n            'fall': datetime.date(current_year, 9, 22),\n            'winter': datetime.date(current_year, 12, 21)\n        }\n        \n        schedule = {}\n        \n        # Generate dates for different frequencies\n        for freq in ['monthly', 'quarterly', 'biannual', 'annual']:\n            schedule[freq] = []\n            \n            if freq == 'monthly':\n                for i in range(12):\n                    date = today.replace(day=1) + relativedelta(months=i)\n                    schedule[freq].append(date)\n            elif freq == 'quarterly':\n                for i in range(0, 12, 3):\n                    date = today.replace(day=1) + relativedelta(months=i)\n                    schedule[freq].append(date)\n            elif freq == 'biannual':\n                schedule[freq] = [seasons['spring'], seasons['fall']]\n            elif freq == 'annual':\n                schedule[freq] = [seasons['spring']]\n        \n        return schedule\n    \n    def create_task_schedule(tasks, schedule_dates):\n        \"\"\"Create detailed schedule with dates\"\"\"\n        scheduled_tasks = []\n        \n        for category, task_list in tasks.items():\n            for task_info in task_list:\n                task_name = task_info['task']\n                frequency = task_info['frequency']\n                importance = task_info['importance']\n                \n                # Get appropriate dates\n                dates = schedule_dates.get(frequency, [])\n                \n                for date in dates:\n                    scheduled_tasks.append({\n                        'task': task_name,\n                        'category': category,\n                        'date': date.strftime('%Y-%m-%d'),\n                        'frequency': frequency,\n                        'importance': importance,\n                        'season': task_info.get('season', 'all'),\n                        'estimated_time': estimate_time(task_name),\n                        'difficulty': estimate_difficulty(task_name),\n                        'cost_estimate': estimate_cost(task_name),\n                        'diy_vs_professional': recommend_professional(task_name)\n                    })\n        \n        # Sort by date and importance\n        scheduled_tasks.sort(key=lambda x: (x['date'], {'high': 0, 'medium': 1, 'low': 2}[x['importance']]))\n        return scheduled_tasks\n    \n    def estimate_time(task_name):\n        \"\"\"Estimate time required for task\"\"\"\n        task_lower = task_name.lower()\n        if any(word in task_lower for word in ['replace', 'filter', 'test', 'check']):\n            return '15-30 minutes'\n        elif any(word in task_lower for word in ['clean', 'inspect', 'organize']):\n            return '30-60 minutes'\n        elif any(word in task_lower for word in ['deep clean', 'pressure wash', 'professional']):\n            return '2-4 hours'\n        else:\n            return '30-60 minutes'\n    \n    def estimate_difficulty(task_name):\n        \"\"\"Estimate difficulty level\"\"\"\n        task_lower = task_name.lower()\n        if any(word in task_lower for word in ['professional', 'electrical panel', 'roof']):\n            return 'Professional recommended'\n        elif any(word in task_lower for word in ['replace', 'repair', 'drain']):\n            return 'Intermediate'\n        else:\n            return 'Easy'\n    \n    def estimate_cost(task_name):\n        \"\"\"Estimate cost range\"\"\"\n        task_lower = task_name.lower()\n        if 'professional' in task_lower:\n            return '$100-$300'\n        elif any(word in task_lower for word in ['replace', 'repair']):\n            return '$20-$100'\n        elif any(word in task_lower for word in ['filter', 'battery']):\n            return '$5-$25'\n        else:\n            return '$0-$20'\n    \n    def recommend_professional(task_name):\n        \"\"\"Recommend DIY vs professional\"\"\"\n        task_lower = task_name.lower()\n        if any(word in task_lower for word in ['electrical panel', 'professional', 'roof', 'hvac system']):\n            return 'Professional recommended'\n        elif any(word in task_lower for word in ['plumbing', 'repair', 'inspect']):\n            return 'DIY possible, professional if issues found'\n        else:\n            return 'DIY friendly'\n    \n    def generate_reminders(scheduled_tasks):\n        \"\"\"Generate reminder schedule\"\"\"\n        reminders = []\n        for task in scheduled_tasks[:10]:  # Next 10 tasks\n            task_date = datetime.datetime.strptime(task['date'], '%Y-%m-%d').date()\n            reminder_date = task_date - datetime.timedelta(days=7)  # 1 week before\n            \n            reminders.append({\n                'reminder_date': reminder_date.strftime('%Y-%m-%d'),\n                'task': task['task'],\n                'due_date': task['date'],\n                'importance': task['importance'],\n                'preparation_needed': get_preparation_notes(task['task'])\n            })\n        \n        return reminders\n    \n    def get_preparation_notes(task_name):\n        \"\"\"Get preparation notes for tasks\"\"\"\n        task_lower = task_name.lower()\n        if 'filter' in task_lower:\n            return 'Purchase replacement filters in advance'\n        elif 'battery' in task_lower:\n            return 'Have 9V batteries ready'\n        elif 'professional' in task_lower:\n            return 'Schedule appointment 2-3 weeks in advance'\n        elif 'clean' in task_lower:\n            return 'Gather cleaning supplies'\n        else:\n            return 'Review task instructions'\n    \n    # Main execution\n    try:\n        # Adjust tasks based on home type and climate\n        adjusted_tasks = adjust_for_home_type(base_tasks, home_type)\n        adjusted_tasks = adjust_for_climate(adjusted_tasks, climate_zone)\n        \n        # Add custom tasks\n        custom_tasks_parsed = parse_custom_tasks(custom_tasks)\n        if custom_tasks_parsed:\n            adjusted_tasks['custom'] = custom_tasks_parsed\n        \n        # Calculate schedule dates\n        schedule_dates = calculate_schedule_dates(current_season)\n        \n        # Create detailed schedule\n        scheduled_tasks = create_task_schedule(adjusted_tasks, schedule_dates)\n        \n        # Generate reminders\n        reminders = generate_reminders(scheduled_tasks)\n        \n        # Create summary statistics\n        total_tasks = len(scheduled_tasks)\n        high_priority = len([t for t in scheduled_tasks if t['importance'] == 'high'])\n        professional_tasks = len([t for t in scheduled_tasks if 'Professional' in t['diy_vs_professional']])\n        \n        output = {\n            'maintenance_schedule': {\n                'home_type': home_type,\n                'climate_zone': climate_zone,\n                'total_annual_tasks': total_tasks,\n                'high_priority_tasks': high_priority,\n                'professional_tasks_recommended': professional_tasks\n            },\n            'scheduled_tasks': scheduled_tasks[:20],  # Next 20 tasks\n            'task_categories': {\n                category: len(task_list) \n                for category, task_list in adjusted_tasks.items()\n            },\n            'upcoming_reminders': reminders,\n            'monthly_overview': {\n                month: {\n                    'task_count': len([t for t in scheduled_tasks if t['date'].startswith(f'{datetime.date.today().year}-{month:02d}')]),\n                    'high_priority': len([t for t in scheduled_tasks if t['date'].startswith(f'{datetime.date.today().year}-{month:02d}') and t['importance'] == 'high'])\n                }\n                for month in range(1, 13)\n            },\n            'cost_estimates': {\n                'annual_diy_costs': '$200-$500',\n                'annual_professional_services': '$500-$1500',\n                'total_estimated_annual': '$700-$2000'\n            },\n            'maintenance_tips': [\n                'Create a dedicated maintenance kit with common tools and supplies',\n                'Take photos before and after maintenance for future reference',\n                'Keep a maintenance log to track completion dates and findings',\n                'Schedule professional services during off-peak seasons for better rates',\n                'Group similar tasks together for efficiency',\n                'Set up automatic reminders on your phone or calendar'\n            ],\n            'seasonal_priorities': {\n                'spring': 'HVAC prep, exterior inspection, deep cleaning',\n                'summer': 'Cooling system maintenance, outdoor project completion',\n                'fall': 'Winterization, heating system prep, gutter cleaning',\n                'winter': 'Indoor projects, emergency preparedness checks'\n            }\n        }\n        \n        return json.dumps(output, indent=2)\n        \n    except Exception as e:\n        return json.dumps({\n            'error': f'Error creating maintenance schedule: {str(e)}',\n            'basic_schedule': {\n                'quarterly_tasks': ['Replace HVAC filters', 'Check smoke detectors', 'Inspect plumbing'],\n                'biannual_tasks': ['Clean gutters', 'HVAC system check', 'Deep clean carpets'],\n                'annual_tasks': ['Professional HVAC service', 'Water heater maintenance', 'Roof inspection']\n            }\n        }, indent=2)\n\n# Execute the function\nresult = create_maintenance_schedule()\nprint(result)"
          }
        },
        "formInput": {
          "__version": "1.0",
          "schema": {
            "containers": [],
            "elements": [
              {
                "fieldName": "home_type",
                "id": "home_type_input",
                "label": "Home Type",
                "type": "Selector",
                "isRequired": true,
                "props": {
                  "options": ["Single family house", "Townhouse", "Condominium", "Apartment", "Mobile home", "Duplex"],
                  "defaultValue": "Single family house"
                }
              },
              {
                "fieldName": "home_age",
                "id": "home_age_input",
                "label": "Home Age",
                "type": "Selector",
                "isRequired": true,
                "props": {
                  "options": ["New (0-5 years)", "5-10 years", "10-20 years", "20-30 years", "30+ years", "Unknown"],
                  "defaultValue": "5-10 years"
                }
              },
              {
                "fieldName": "climate_zone",
                "id": "climate_zone_input",
                "label": "Climate Zone",
                "type": "Selector",
                "isRequired": true,
                "props": {
                  "options": ["Temperate", "Hot and dry", "Hot and humid", "Cold", "Tropical", "Coastal"],
                  "defaultValue": "Temperate"
                }
              },
              {
                "fieldName": "current_season",
                "id": "current_season_input",
                "label": "Current Season",
                "type": "Selector",
                "isRequired": true,
                "props": {
                  "options": ["Spring", "Summer", "Fall", "Winter"],
                  "defaultValue": "Spring"
                }
              },
              {
                "fieldName": "custom_tasks",
                "id": "custom_tasks_input",
                "label": "Custom Tasks (Optional)",
                "type": "Text",
                "isRequired": false,
                "props": {
                  "placeholder": "Any specific maintenance tasks for your home? (one per line)",
                  "minRows": 3
                }
              },
              {
                "fieldName": "maintenance_history",
                "id": "maintenance_history_input",
                "label": "Recent Maintenance History (Optional)",
                "type": "Text",
                "isRequired": false,
                "props": {
                  "placeholder": "What maintenance have you completed recently?",
                  "minRows": 2
                }
              },
              {
                "fieldName": "priorityFocus",
                "id": "priority_focus_input",
                "label": "Priority Focus",
                "type": "Selector",
                "isRequired": true,
                "props": {
                  "options": ["Safety first", "Cost efficiency", "Energy savings", "Preventive care", "Problem solving", "Balanced approach"],
                  "defaultValue": "Balanced approach"
                }
              }
            ]
          }
        },
        "formOutput": {
          "__version": "1.0",
          "schema": {
            "containers": [],
            "elements": [
              {
                "fieldName": "response",
                "id": "complete_maintenance_schedule_output",
                "label": "Complete Maintenance Schedule",
                "type": "Text"
              },
              {
                "fieldName": "upcomingTasks",
                "id": "upcoming_tasks_output",
                "label": "Upcoming Tasks & Reminders",
                "type": "Text"
              },
              {
                "fieldName": "seasonalPriorities",
                "id": "seasonal_priorities_output",
                "label": "Seasonal Maintenance Priorities",
                "type": "Text"
              },
              {
                "fieldName": "costEstimates",
                "id": "cost_estimates_output",
                "label": "Cost Estimates & Budget Planning",
                "type": "Text"
              }
            ]
          }
        },
        "executionStrategy": "deterministic"
      },
      "translations": [
        {
          "id": "7829564732190847182",
          "language": "en",
          "name": "Home Maintenance Scheduler",
          "description": "Tracks and reminds about routine home maintenance tasks. Creates annual schedules with task reminders, importance explanations, and cost estimates based on home type and climate.",
          "instructions": "1. Select your home type\n2. Choose home age range\n3. Select climate zone\n4. Set current season\n5. Add custom tasks (optional)\n6. Note recent maintenance history (optional)\n7. Choose priority focus\n\nThe scheduler will create:\n- Comprehensive annual maintenance schedule\n- Task prioritization and timing\n- Cost estimates and budgeting\n- DIY vs. professional recommendations\n- Seasonal maintenance priorities\n- Reminder system with preparation notes\n- Climate and home-type specific adjustments\n\nPerfect for homeowners who want to maintain their property proactively and avoid costly repairs through preventive maintenance."
        }
      ]
    }
  ]
}