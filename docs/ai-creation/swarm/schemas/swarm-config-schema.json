{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "VrooliTeamConfiguration",
  "description": "Team configuration schema that matches TeamConfigObject from packages/shared/src/shape/configs/team.ts",
  "type": "object",
  "properties": {
    "__version": {
      "type": "string",
      "description": "Schema version for future compatibility",
      "default": "1.0"
    },
    "deploymentType": {
      "type": "string",
      "enum": ["development", "saas", "appliance"],
      "description": "Deployment context for the team"
    },
    "goal": {
      "type": "string",
      "description": "Primary objective of this team template"
    },
    "businessPrompt": {
      "type": "string",
      "description": "Business behavior and economic guidance (prompt-driven like bots)"
    },
    "resourceQuota": {
      "$ref": "#/definitions/ResourceQuota"
    },
    "targetProfitPerMonth": {
      "type": "string",
      "description": "Target monthly profit across all team instances in micro-dollars (stringified bigint)"
    },
    "costLimit": {
      "type": "string",
      "description": "Maximum monthly cost safety boundary in micro-dollars (stringified bigint)"
    },
    "verticalPackage": {
      "$ref": "#/definitions/VerticalPackageConfig"
    },
    "marketSegment": {
      "type": "string",
      "enum": ["enterprise", "smb", "consumer"],
      "description": "Market segment targeting"
    },
    "isolation": {
      "$ref": "#/definitions/IsolationConfig"
    },
    "preferredModel": {
      "type": "string",
      "description": "Preferred AI model for this swarm type"
    },
    "defaultLimits": {
      "$ref": "#/definitions/DefaultLimits"
    },
    "defaultScheduling": {
      "$ref": "#/definitions/DefaultScheduling"
    },
    "defaultPolicy": {
      "$ref": "#/definitions/DefaultPolicy"
    },
    "stats": {
      "$ref": "#/definitions/TeamEconomicTracking"
    },
    "blackboard": {
      "type": "array",
      "items": { "$ref": "#/definitions/BlackboardItem" },
      "description": "Team-specific blackboard for economic coordination and learning"
    }
  },
  "required": ["__version", "deploymentType", "goal", "businessPrompt", "resourceQuota", "targetProfitPerMonth", "stats"],
  "additionalProperties": false,
  "definitions": {
    "ResourceQuota": {
      "type": "object",
      "description": "Direct resource allocation quota for team instances",
      "properties": {
        "gpuPercentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "GPU allocation percentage (0-100)"
        },
        "ramGB": {
          "type": "number",
          "minimum": 0,
          "description": "RAM allocation in gigabytes"
        },
        "cpuCores": {
          "type": "number",
          "minimum": 0,
          "description": "CPU core allocation"
        },
        "storageGB": {
          "type": "number",
          "minimum": 0,
          "description": "Storage allocation in gigabytes"
        }
      },
      "required": ["gpuPercentage", "ramGB", "cpuCores", "storageGB"],
      "additionalProperties": false
    },
    "VerticalPackageConfig": {
      "type": "object",
      "description": "Vertical package definition for industry-specific configurations",
      "properties": {
        "industry": {
          "type": "string",
          "description": "Industry vertical identifier"
        },
        "complianceRequirements": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Compliance requirements for this vertical"
        },
        "defaultWorkflows": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Default workflows to enable for this vertical"
        },
        "dataPrivacyLevel": {
          "type": "string",
          "enum": ["standard", "hipaa", "pci", "sox", "gdpr"],
          "description": "Data privacy level required"
        },
        "terminology": {
          "type": "object",
          "additionalProperties": { "type": "string" },
          "description": "Industry-specific terminology mappings"
        },
        "regulatoryBodies": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Regulatory bodies to consider"
        }
      },
      "required": ["industry", "dataPrivacyLevel"],
      "additionalProperties": false
    },
    "IsolationConfig": {
      "type": "object",
      "description": "Security and resource isolation configuration",
      "properties": {
        "sandboxLevel": {
          "type": "string",
          "enum": ["none", "user-namespace", "full-container", "vm"],
          "description": "Level of process isolation"
        },
        "networkPolicy": {
          "type": "string",
          "enum": ["open", "restricted", "isolated", "air-gapped"],
          "description": "Network access policy"
        },
        "secretsAccess": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Allowed secret paths this team can access"
        },
        "auditLogging": {
          "type": "boolean",
          "description": "Whether to enable audit logging for all actions"
        },
        "securityPolicies": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Custom security policies"
        }
      },
      "required": ["sandboxLevel", "secretsAccess"],
      "additionalProperties": false
    },
    "DefaultLimits": {
      "type": "object",
      "description": "Default limits for chat instances spawned from this team",
      "properties": {
        "maxToolCallsPerBotResponse": { "type": "number" },
        "maxToolCalls": { "type": "number" },
        "maxCreditsPerBotResponse": { "type": "string" },
        "maxCredits": { "type": "string" },
        "maxDurationPerBotResponseMs": { "type": "number" },
        "maxDurationMs": { "type": "number" },
        "delayBetweenProcessingCyclesMs": { "type": "number" }
      },
      "additionalProperties": false
    },
    "DefaultScheduling": {
      "type": "object",
      "description": "Default scheduling configuration for spawned instances",
      "properties": {
        "defaultDelayMs": { "type": "number" },
        "toolSpecificDelays": {
          "type": "object",
          "additionalProperties": { "type": "number" }
        },
        "requiresApprovalTools": {
          "oneOf": [
            { "type": "array", "items": { "type": "string" } },
            { "type": "string", "enum": ["all", "none"] }
          ]
        },
        "approvalTimeoutMs": { "type": "number" },
        "autoRejectOnTimeout": { "type": "boolean" }
      },
      "additionalProperties": false
    },
    "DefaultPolicy": {
      "type": "object",
      "description": "Default policy configuration for spawned instances",
      "properties": {
        "visibility": {
          "type": "string",
          "enum": ["open", "restricted", "private"]
        },
        "acl": {
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "required": ["visibility"],
      "additionalProperties": false
    },
    "TeamEconomicTracking": {
      "type": "object",
      "description": "Economic tracking for team instances - runtime performance data",
      "properties": {
        "totalInstances": {
          "type": "number",
          "description": "Total number of chat instances spawned from this team"
        },
        "totalProfit": {
          "type": "string",
          "description": "Total profit generated across all instances (stringified bigint)"
        },
        "totalCosts": {
          "type": "string",
          "description": "Total costs incurred across all instances (stringified bigint)"
        },
        "averageKPIs": {
          "type": "object",
          "additionalProperties": { "type": "number" },
          "description": "Average KPI performance across all instances"
        },
        "activeInstances": {
          "type": "number",
          "description": "Current number of active instances"
        },
        "lastUpdated": {
          "type": "number",
          "description": "Last economic update timestamp"
        }
      },
      "required": ["totalInstances", "totalProfit", "totalCosts", "averageKPIs", "activeInstances", "lastUpdated"],
      "additionalProperties": false
    },
    "BlackboardItem": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "value": {},
        "created_at": { "type": "string" }
      },
      "required": ["id", "value", "created_at"],
      "additionalProperties": false
    }
  }
}