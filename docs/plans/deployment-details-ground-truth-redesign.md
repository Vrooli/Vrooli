# Deployment Details Page: Ground Truth Redesign

> **Status:** Draft
> **Created:** 2025-12-30
> **Last Updated:** 2025-12-30
> **Author:** Claude + Human collaboration
> **Scenario:** scenario-to-cloud

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [Problem Statement](#problem-statement)
3. [Design Philosophy](#design-philosophy)
4. [Architecture Overview](#architecture-overview)
5. [Detailed Specifications](#detailed-specifications)
6. [API Specifications](#api-specifications)
7. [Data Models](#data-models)
8. [Implementation Phases](#implementation-phases)
9. [Technical Considerations](#technical-considerations)
10. [Success Criteria](#success-criteria)
11. [Future Considerations](#future-considerations)

---

## Executive Summary

This document outlines a complete redesign of the scenario-to-cloud deployment details page. The goal is to transform it from a "deployment receipt" (what you asked to deploy) into a **"live mission control"** (what actually exists on the VPS right now).

### Core Insight

The current page answers: *"What did we tell the VPS to do?"*

The redesigned page answers: *"What is the actual state of the VPS right now, and how does it compare to what should be there?"*

### Key Features

1. **Live State Inspection** - Real-time process, port, and system status
2. **File Explorer** - Browse VPS filesystem, view configs, manage bundles
3. **Drift Detection** - Compare manifest expectations vs actual state
4. **Unified Logs** - Aggregated log viewer with filtering
5. **Deployment History** - Timeline of all deployments and events
6. **Web Terminal** - Optional SSH access from the browser

### Design Principle

> **The page should be a complete replacement for SSHing into the VPS.**
> If you need to SSH to understand something, the UI failed.

---

## Problem Statement

### Current State

The existing `DeploymentDetails.tsx` (414 lines) provides:

- Basic manifest information (scenario ID, domain, host)
- Status badge and timestamps
- Collapsible JSON dump of setup/deploy results
- Raw log output from last inspection

**Location:** `scenarios/scenario-to-cloud/ui/src/components/deployments/DeploymentDetails.tsx`

### Current Inspection API

The `vps_inspect.go` (118 lines) queries only:

```go
type VPSInspectResult struct {
    OK             bool            `json:"ok"`
    ScenarioStatus json.RawMessage `json:"scenario_status,omitempty"`
    ResourceStatus json.RawMessage `json:"resource_status,omitempty"`
    ScenarioLogs   string          `json:"scenario_logs,omitempty"`
    Error          string          `json:"error,omitempty"`
    Timestamp      string          `json:"timestamp"`
}
```

**Location:** `scenarios/scenario-to-cloud/api/vps_inspect.go`

### What's Missing

| Need | Current State |
|------|---------------|
| What processes are running? | Only `vrooli scenario status` output |
| What ports are bound? | Not visible |
| Is there port conflict? | Not detected |
| What's the TLS certificate status? | Not visible |
| What files exist on VPS? | Not visible |
| How many old bundles are eating disk? | Not visible |
| Is there drift from manifest? | Not compared |
| What's the deployment history? | Not tracked in detail |
| Can I see all logs together? | Only scenario logs |
| What's the system resource usage? | Not visible |

### User Pain Points

1. **Blind deployments** - No visibility into what's actually running
2. **Mystery failures** - "Something is wrong" but unclear what
3. **Manual SSH required** - For any real debugging
4. **No drift detection** - Orphan processes, wrong ports, etc. go unnoticed
5. **Bundle accumulation** - Old bundles consume disk with no visibility
6. **Fragmented logs** - Must SSH to see caddy, postgres, autoheal logs

---

## Design Philosophy

### Three Layers of Truth

The redesigned page presents three layers of information, clearly distinguished:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 1: INTENDED STATE                                            â”‚
â”‚  "What the manifest says should exist"                              â”‚
â”‚  â””â”€ Static, from your last deployment                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LAYER 2: REPORTED STATE                                            â”‚
â”‚  "What vrooli/systemd thinks is running"                            â”‚
â”‚  â””â”€ Service-level view (vrooli scenario status)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LAYER 3: GROUND TRUTH                                              â”‚
â”‚  "What actually exists on disk and in memory right now"             â”‚
â”‚  â””â”€ Raw system inspection (ps, ss, ls, file contents)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Snapshot-Based with Explicit Refresh

- Every section shows "Last synced: X seconds ago"
- Refresh is on-demand (not polling)
- Users know they're looking at a snapshot, not real-time

### Actionable Problems

- Every problem has a button next to it
- Port conflict? â†’ [Kill orphan]
- Service down? â†’ [Restart]
- Bundle outdated? â†’ [Deploy Latest]

### Progressive Disclosure

- Overview first (health badges)
- Details on demand (expandable sections, tabs)
- Deep dive available (terminal, file viewer)

---

## Architecture Overview

### System Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BROWSER (React UI)                                                  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ DeploymentDetails Page                                       â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚Live     â”‚ â”‚File     â”‚ â”‚Drift    â”‚ â”‚History  â”‚ â”‚Terminalâ”‚ â”‚    â”‚
â”‚  â”‚  â”‚State    â”‚ â”‚Explorer â”‚ â”‚Detectionâ”‚ â”‚& Logs   â”‚ â”‚        â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                        â”‚
â”‚              REST API calls â”‚  WebSocket for logs/terminal           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCENARIO-TO-CLOUD API (Go)                                          â”‚
â”‚                                                                      â”‚
â”‚  New Endpoints:                                                      â”‚
â”‚  â”œâ”€ GET  /deployments/{id}/live-state     â†’ Process, port, system   â”‚
â”‚  â”œâ”€ GET  /deployments/{id}/files          â†’ Directory listing       â”‚
â”‚  â”œâ”€ GET  /deployments/{id}/files/content  â†’ File content            â”‚
â”‚  â”œâ”€ GET  /deployments/{id}/drift          â†’ Manifest vs actual      â”‚
â”‚  â”œâ”€ GET  /deployments/{id}/bundles        â†’ Bundle inventory        â”‚
â”‚  â”œâ”€ POST /deployments/{id}/bundles/cleanupâ†’ Delete old bundles      â”‚
â”‚  â”œâ”€ GET  /deployments/{id}/caddy          â†’ Caddy/TLS status        â”‚
â”‚  â”œâ”€ WS   /deployments/{id}/logs           â†’ Streaming logs          â”‚
â”‚  â””â”€ WS   /deployments/{id}/terminal       â†’ Web terminal            â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ VPS Inspector (vps_live_state.go)                             â”‚   â”‚
â”‚  â”‚  â””â”€ Executes SSH commands, parses output, returns structured  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ SSH
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VPS                                                                 â”‚
â”‚                                                                      â”‚
â”‚  Commands executed:                                                  â”‚
â”‚  â”œâ”€ ps aux --no-headers                    â†’ Process list           â”‚
â”‚  â”œâ”€ ss -tlnp                               â†’ Port bindings          â”‚
â”‚  â”œâ”€ df -h / && free -m                     â†’ System resources       â”‚
â”‚  â”œâ”€ ls -la <path>                          â†’ Directory listing      â”‚
â”‚  â”œâ”€ cat <file>                             â†’ File content           â”‚
â”‚  â”œâ”€ cat /etc/caddy/Caddyfile               â†’ Caddy config           â”‚
â”‚  â”œâ”€ curl -s https://localhost/health       â†’ TLS verification       â”‚
â”‚  â”œâ”€ find .vrooli/cloud/bundles -name "*.gz"â†’ Bundle inventory       â”‚
â”‚  â””â”€ tail -f <logs>                         â†’ Log streaming          â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow

```
User clicks "Refresh"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI: setLoading(true)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API: GET /live-stateâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SSH: Execute        â”‚â”€â”€â”€â”€â–¶â”‚ Parse: ps output    â”‚
â”‚ multiple commands   â”‚     â”‚ Parse: ss output    â”‚
â”‚ in parallel         â”‚     â”‚ Parse: df/free      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Return: Structured  â”‚
â”‚ LiveStateResponse   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI: Render with     â”‚
â”‚ "Last sync: now"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Specifications

### Page Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEADER                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â† Back    browser-automation-studio           [â†»] [âš¡Actionsâ–¼] â”‚  â”‚
â”‚  â”‚           ğŸŸ¢ Healthy â€¢ bas.vrooli.com â€¢ 192.168.1.100          â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚  â”‚  â”‚HTTPS âœ“ â”‚ â”‚API âœ“   â”‚ â”‚2/2 Res â”‚ â”‚1/1 Scn â”‚                  â”‚  â”‚
â”‚  â”‚  â”‚TLS ok  â”‚ â”‚:3001   â”‚ â”‚healthy â”‚ â”‚healthy â”‚                  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TABS                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Live    â”‚ Files    â”‚ Drift     â”‚ History â”‚ Terminal â”‚           â”‚
â”‚  â”‚ State   â”‚          â”‚           â”‚ & Logs  â”‚          â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TAB CONTENT                                                         â”‚
â”‚  (Varies by selected tab - see detailed specs below)                â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 1: Live State

**Purpose:** Show what's actually running on the VPS right now.

#### Sections

##### 1.1 Processes

```
â”Œâ”€ PROCESSES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Last sync: 12s ago [â†»] â”€â”
â”‚                                                                               â”‚
â”‚  Scenarios                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â— browser-automation-studio                    PID 12847                 â”‚ â”‚
â”‚  â”‚   â”œâ”€ UI    :3000  âœ“ responding    CPU: 2.1%   MEM: 184 MB               â”‚ â”‚
â”‚  â”‚   â”œâ”€ API   :3001  âœ“ responding    CPU: 5.3%   MEM: 256 MB               â”‚ â”‚
â”‚  â”‚   â””â”€ WS    :3002  âœ“ connected     Clients: 3                            â”‚ â”‚
â”‚  â”‚   Uptime: 4d 12h 33m              Last restart: Dec 26, 14:23           â”‚ â”‚
â”‚  â”‚                                                            [Restart] [Stop]â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ â— vrooli-autoheal                              PID 12901                 â”‚ â”‚
â”‚  â”‚   â””â”€ Monitoring: 2 resources, 1 scenario                                â”‚ â”‚
â”‚  â”‚   Uptime: 4d 12h 33m              Restarts triggered: 0                 â”‚ â”‚
â”‚  â”‚                                                            [Restart] [Stop]â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  Resources                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â— postgres                                     PID 8821                  â”‚ â”‚
â”‚  â”‚   â””â”€ :5432  âœ“ accepting connections                                     â”‚ â”‚
â”‚  â”‚   Uptime: 12d 4h                  Active connections: 8                 â”‚ â”‚
â”‚  â”‚   Data size: 2.4 GB               Last backup: 2h ago                   â”‚ â”‚
â”‚  â”‚                                                            [Restart] [Stop]â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ â— redis                                        PID 8834                  â”‚ â”‚
â”‚  â”‚   â””â”€ :6379  âœ“ responding                                                â”‚ â”‚
â”‚  â”‚   Uptime: 12d 4h                  Memory: 48 MB / 256 MB                â”‚ â”‚
â”‚  â”‚   Keys: 1,247                     Hit rate: 94.2%                       â”‚ â”‚
â”‚  â”‚                                                            [Restart] [Stop]â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### 1.2 Network / Port Bindings

```
â”Œâ”€ NETWORK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Last sync: 12s ago [â†»] â”€â”
â”‚                                                                               â”‚
â”‚  Port Bindings (from ss -tlnp)                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Port   Process              Status              Match                   â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ :22    sshd                 listening           (system)                â”‚ â”‚
â”‚  â”‚ :80    caddy                listening           (edge proxy)            â”‚ â”‚
â”‚  â”‚ :443   caddy                listening           (edge proxy)            â”‚ â”‚
â”‚  â”‚ :3000  scenario-ui          listening           âœ“ matches manifest      â”‚ â”‚
â”‚  â”‚ :3001  scenario-api         listening           âœ“ matches manifest      â”‚ â”‚
â”‚  â”‚ :3002  scenario-ws          listening           âœ“ matches manifest      â”‚ â”‚
â”‚  â”‚ :5432  postgres             listening           (resource)              â”‚ â”‚
â”‚  â”‚ :6379  redis                listening           (resource)              â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ âš ï¸ :8080  unknown (PID 29441)  listening           NOT IN MANIFEST       â”‚ â”‚
â”‚  â”‚           â””â”€ Command: node /tmp/rogue-server.js        [Kill] [Investigate]â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  Caddy / TLS Status                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Domain:      bas.vrooli.com                                             â”‚ â”‚
â”‚  â”‚ Certificate: Let's Encrypt                                              â”‚ â”‚
â”‚  â”‚ Expires:     2025-03-15 (75 days)         âœ“ Auto-renewal enabled       â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ Routes:                                                                 â”‚ â”‚
â”‚  â”‚   /         â†’ 127.0.0.1:3000 (UI)                                       â”‚ â”‚
â”‚  â”‚   /api/*    â†’ 127.0.0.1:3001 (API)                                      â”‚ â”‚
â”‚  â”‚   /ws       â†’ 127.0.0.1:3002 (WebSocket)                                â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ [View Caddyfile] [Reload Caddy]                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### 1.3 System Resources

```
â”Œâ”€ SYSTEM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Last sync: 12s ago [â†»] â”€â”
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ CPU:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  38%     4 cores (Intel Xeon E5-2680)       â”‚ â”‚
â”‚  â”‚ RAM:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  68%     5.4 GB / 8 GB                      â”‚ â”‚
â”‚  â”‚ Disk:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  42%     84 GB / 200 GB                     â”‚ â”‚
â”‚  â”‚ Swap:  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  12%     0.5 GB / 4 GB                      â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ Load Average: 1.24, 1.18, 0.95                                          â”‚ â”‚
â”‚  â”‚ Uptime: 45 days, 12 hours                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  Disk Breakdown                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ /root/Vrooli              â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚  12.4 GB              â”‚ â”‚
â”‚  â”‚   â””â”€ .vrooli/cloud/bundlesâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚   3.2 GB  [Cleanup]   â”‚ â”‚
â”‚  â”‚   â””â”€ scenarios/           â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚   2.1 GB              â”‚ â”‚
â”‚  â”‚   â””â”€ packages/            â”‚â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚   1.8 GB              â”‚ â”‚
â”‚  â”‚ /var/lib/postgresql       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚   8.4 GB              â”‚ â”‚
â”‚  â”‚ /var/lib/docker           â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚   6.2 GB              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 2: File Explorer

**Purpose:** Browse the VPS filesystem, view configs, manage bundles.

```
â”Œâ”€ FILE EXPLORER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ /root/Vrooli â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  Quick Access                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„ manifest.json   ğŸ“„ autoheal-scope.json   ğŸ“„ Caddyfile            â”‚   â”‚
â”‚  â”‚ ğŸ“„ .env            ğŸ“„ service.json                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Directory Tree â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Size â”€â”€â”€ Modified â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ“ .vrooli/                                     12.4 MB   Dec 30       â”‚ â”‚
â”‚  â”‚   ğŸ“ cloud/                                                             â”‚ â”‚
â”‚  â”‚     ğŸ“„ manifest.json                            4.2 KB    Dec 26       â”‚ â”‚
â”‚  â”‚     ğŸ“„ autoheal-scope.json                      0.8 KB    Dec 26       â”‚ â”‚
â”‚  â”‚     ğŸ“„ bundle-metadata.json                     1.1 KB    Dec 26       â”‚ â”‚
â”‚  â”‚     ğŸ“ bundles/                                 847 MB                  â”‚ â”‚
â”‚  â”‚       ğŸ“¦ mini-vrooli_bas_a8f2c1...tar.gz       284 MB    Dec 30  NEW  â”‚ â”‚
â”‚  â”‚       ğŸ“¦ mini-vrooli_bas_7d3e91...tar.gz       281 MB    Dec 26       â”‚ â”‚
â”‚  â”‚       ğŸ“¦ mini-vrooli_bas_2b8a44...tar.gz       282 MB    Dec 20       â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ“ scenarios/                                   1.2 GB    Dec 26       â”‚ â”‚
â”‚  â”‚   ğŸ“ browser-automation-studio/                 890 MB                  â”‚ â”‚
â”‚  â”‚   ğŸ“ vrooli-autoheal/                           12 MB                   â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ“ resources/                                   340 MB    Dec 26       â”‚ â”‚
â”‚  â”‚   ğŸ“ postgres/                                  280 MB                  â”‚ â”‚
â”‚  â”‚   ğŸ“ redis/                                     60 MB                   â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ“ packages/                                    420 MB    Dec 26       â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Bundle Inventory                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Scenario                  Bundles   Total Size   Oldest              â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ browser-automation-studio    3        847 MB     Dec 20, 2024        â”‚   â”‚
â”‚  â”‚ knowledge-observatory        1        156 MB     Dec 28, 2024        â”‚   â”‚
â”‚  â”‚ api-manager                  2        203 MB     Dec 15, 2024        â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚ Total: 6 bundles, 1.2 GB                                             â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚ Retention Policy: Keep 3 newest per scenario                         â”‚   â”‚
â”‚  â”‚ [ğŸ§¹ Cleanup Now] [âš™ï¸ Configure Retention]                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  File Viewer                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„ .vrooli/cloud/manifest.json                          [Copy] [Raw] â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚  â”‚  1  {                                                                â”‚   â”‚
â”‚  â”‚  2    "version": "1.0.0",                                            â”‚   â”‚
â”‚  â”‚  3    "environment": "production",                                   â”‚   â”‚
â”‚  â”‚  4    "target": {                                                    â”‚   â”‚
â”‚  â”‚  5      "type": "vps",                                               â”‚   â”‚
â”‚  â”‚  6      "vps": {                                                     â”‚   â”‚
â”‚  â”‚  7        "host": "192.168.1.100",                                   â”‚   â”‚
â”‚  â”‚  8        "port": 22,                                                â”‚   â”‚
â”‚  â”‚  9        "user": "root",                                            â”‚   â”‚
â”‚  â”‚ 10        "workdir": "/root/Vrooli"                                  â”‚   â”‚
â”‚  â”‚ ...                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 3: Drift Detection

**Purpose:** Compare manifest expectations vs actual state. Surface discrepancies.

```
â”Œâ”€ DRIFT DETECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  Comparing: manifest.json vs live system state                              â”‚
â”‚  Last checked: 12 seconds ago                                          [â†»]  â”‚
â”‚                                                                              â”‚
â”‚  Summary                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   âœ“ 12 checks passed      âš ï¸ 2 warnings      âŒ 1 drift detected     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Scenarios â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ browser-automation-studio                                          â”‚  â”‚
â”‚  â”‚    Manifest: should be running                                        â”‚  â”‚
â”‚  â”‚    Actual:   running (PID 12847, uptime 4d 12h)                       â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ vrooli-autoheal                                                    â”‚  â”‚
â”‚  â”‚    Manifest: should be running (auto-included)                        â”‚  â”‚
â”‚  â”‚    Actual:   running (PID 12901, uptime 4d 12h)                       â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Resources â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ postgres                                                           â”‚  â”‚
â”‚  â”‚    Manifest: required (in dependencies.resources)                     â”‚  â”‚
â”‚  â”‚    Actual:   running (PID 8821)                                       â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ redis                                                              â”‚  â”‚
â”‚  â”‚    Manifest: required (in dependencies.resources)                     â”‚  â”‚
â”‚  â”‚    Actual:   running (PID 8834)                                       â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âš ï¸ qdrant                                                            â”‚  â”‚
â”‚  â”‚    Manifest: NOT specified                                            â”‚  â”‚
â”‚  â”‚    Actual:   RUNNING (PID 9012) â€” unexpected!                         â”‚  â”‚
â”‚  â”‚    â””â”€ This resource is running but wasn't in your manifest.          â”‚  â”‚
â”‚  â”‚      Was it started manually? Left over from previous deployment?    â”‚  â”‚
â”‚  â”‚      [Stop qdrant] [Add to manifest]                                  â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Ports â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ UI Port                                                            â”‚  â”‚
â”‚  â”‚    Manifest: 3000                                                     â”‚  â”‚
â”‚  â”‚    Actual:   3000 â† scenario-ui (PID 12847)                          â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âŒ API Port â€” DRIFT DETECTED                                         â”‚  â”‚
â”‚  â”‚    Manifest: 3001                                                     â”‚  â”‚
â”‚  â”‚    Actual:   3001 â† node (PID 29441) â€” WRONG PROCESS!                â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚    Expected scenario-api to be listening on :3001                     â”‚  â”‚
â”‚  â”‚    Instead found: node /tmp/test-server.js                           â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚    This is likely an orphan process from debugging.                   â”‚  â”‚
â”‚  â”‚    Your API cannot start because this port is occupied.              â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚    [Kill PID 29441] [Restart scenario-api]                            â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ WS Port                                                            â”‚  â”‚
â”‚  â”‚    Manifest: 3002                                                     â”‚  â”‚
â”‚  â”‚    Actual:   3002 â† scenario-ws (PID 12847)                          â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Edge / TLS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ Domain                                                             â”‚  â”‚
â”‚  â”‚    Manifest: bas.vrooli.com                                           â”‚  â”‚
â”‚  â”‚    Caddyfile: bas.vrooli.com                                          â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ“ TLS Certificate                                                    â”‚  â”‚
â”‚  â”‚    Expected: valid for bas.vrooli.com                                 â”‚  â”‚
â”‚  â”‚    Actual:   valid, expires 2025-03-15 (75 days)                      â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âš ï¸ DNS Resolution                                                    â”‚  â”‚
â”‚  â”‚    Expected: bas.vrooli.com â†’ 192.168.1.100 (VPS IP)                  â”‚  â”‚
â”‚  â”‚    Actual:   bas.vrooli.com â†’ 104.21.32.45 (Cloudflare proxy)         â”‚  â”‚
â”‚  â”‚    Note: Using Cloudflare proxy â€” actual VPS IP is hidden.           â”‚  â”‚
â”‚  â”‚          This is fine if intentional.                                 â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Bundle Version â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âš ï¸ Local bundle is newer than deployed                               â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚    Deployed: mini-vrooli_bas_7d3e91...tar.gz   (Dec 26, 2024)        â”‚  â”‚
â”‚  â”‚    Local:    mini-vrooli_bas_a8f2c1...tar.gz   (Dec 30, 2024)        â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚    Changes since last deployment:                                     â”‚  â”‚
â”‚  â”‚      M scenarios/bas/ui/src/App.tsx                                   â”‚  â”‚
â”‚  â”‚      M scenarios/bas/api/handlers.go                                  â”‚  â”‚
â”‚  â”‚      A scenarios/bas/ui/src/components/NewFeature.tsx                 â”‚  â”‚
â”‚  â”‚      D scenarios/bas/api/deprecated.go                                â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚    [View Full Diff] [Deploy Latest Bundle]                            â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 4: History & Logs

**Purpose:** Deployment timeline, autoheal events, aggregated log viewer.

```
â”Œâ”€ HISTORY & LOGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Timeline â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  Dec 30  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚      â”‚                                                                 â”‚   â”‚
â”‚  â”‚   10:42  ğŸ“¦ Bundle built locally                                      â”‚   â”‚
â”‚  â”‚          mini-vrooli_bas_a8f2c1... (284 MB)                           â”‚   â”‚
â”‚  â”‚          Status: Ready to deploy                        [Deploy Now]  â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  Dec 26  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚      â”‚                                                                 â”‚   â”‚
â”‚  â”‚   14:23  âœ… Deployment successful                                     â”‚   â”‚
â”‚  â”‚          Duration: 4m 32s                                             â”‚   â”‚
â”‚  â”‚          Bundle: mini-vrooli_bas_7d3e91...                            â”‚   â”‚
â”‚  â”‚          [View Details] [View Manifest]                               â”‚   â”‚
â”‚  â”‚      â”‚                                                                 â”‚   â”‚
â”‚  â”‚      â”œâ”€ 14:20  Preflight passed (8 checks)                            â”‚   â”‚
â”‚  â”‚      â”œâ”€ 14:21  Bundle uploaded (284 MB in 45s)                        â”‚   â”‚
â”‚  â”‚      â”œâ”€ 14:22  Setup completed                                        â”‚   â”‚
â”‚  â”‚      â”œâ”€ 14:22  Resources started (postgres, redis)                    â”‚   â”‚
â”‚  â”‚      â”œâ”€ 14:23  Scenario started                                       â”‚   â”‚
â”‚  â”‚      â””â”€ 14:23  Health checks passed                                   â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  Dec 24  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚      â”‚                                                                 â”‚   â”‚
â”‚  â”‚   09:15  âŒ Deployment failed                                         â”‚   â”‚
â”‚  â”‚          Error: Port 3001 already in use                              â”‚   â”‚
â”‚  â”‚          Failed at step: deploy                                       â”‚   â”‚
â”‚  â”‚          [View Error Details] [View Logs]                             â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  Dec 20  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚      â”‚                                                                 â”‚   â”‚
â”‚  â”‚   16:44  âœ… Initial deployment                                        â”‚   â”‚
â”‚  â”‚          First deployment to this VPS                                 â”‚   â”‚
â”‚  â”‚          Bundle: mini-vrooli_bas_2b8a44...                            â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Autoheal Events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  No restart events in the last 7 days  âœ…                             â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  Historical events:                                                   â”‚   â”‚
â”‚  â”‚    Dec 22, 03:14  ğŸ”„ Restarted postgres                               â”‚   â”‚
â”‚  â”‚                   Reason: Process killed (OOM)                        â”‚   â”‚
â”‚  â”‚                   Recovery time: 8 seconds                            â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚    Dec 18, 11:45  ğŸ”„ Restarted scenario-api                           â”‚   â”‚
â”‚  â”‚                   Reason: Health check failed (3 consecutive)         â”‚   â”‚
â”‚  â”‚                   Recovery time: 12 seconds                           â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Log Viewer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  Source: [All â–¼]  Level: [All â–¼]  Search: [______________] [â†» Live]  â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:56 [scenario-api]  INFO   GET /api/health 200 12ms       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:55 [scenario-ui]   INFO   Serving /dashboard             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:52 [postgres]      INFO   Checkpoint complete            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:45 [scenario-api]  WARN   Slow query: 234ms              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:40 [caddy]         INFO   TLS handshake: 192.168.x.x     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:38 [autoheal]      DEBUG  Health check passed: all       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:30 [scenario-api]  ERROR  Redis connection refused       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 12:34:30 [redis]         WARN   Max memory threshold reached   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ ...                                                             â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  [â–¼ Load More] [â¬‡ Download Full Logs]                                 â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 5: Terminal (Optional)

**Purpose:** Direct SSH access from the browser for power users.

```
â”Œâ”€ WEB TERMINAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [Disconnect] [Fullscreen]â”
â”‚                                                                                â”‚
â”‚  Connected to: root@192.168.1.100 via SSH                                     â”‚
â”‚  Session started: 2 minutes ago                                               â”‚
â”‚                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚ root@vps:~/Vrooli# vrooli scenario status browser-automation-studio      â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ Scenario: browser-automation-studio                                  â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ Status:   running                                                    â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ PID:      12847                                                      â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ Uptime:   4d 12h 34m                                                 â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚ root@vps:~/Vrooli# ss -tlnp | grep 3001                                  â”‚ â”‚
â”‚  â”‚ LISTEN   0   4096   127.0.0.1:3001   0.0.0.0:*   users:(("scenario-api")) â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚ root@vps:~/Vrooli# _                                                     â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                â”‚
â”‚  Tip: This terminal has full access. Be careful with destructive commands.   â”‚
â”‚                                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Specifications

### New Endpoints

#### 1. GET `/api/v1/deployments/{id}/live-state`

**Purpose:** Fetch comprehensive live state from VPS.

**Request:**
```
GET /api/v1/deployments/{id}/live-state
```

**Response:**
```json
{
  "ok": true,
  "timestamp": "2025-12-30T10:34:56Z",
  "sync_duration_ms": 1234,

  "processes": {
    "scenarios": [
      {
        "id": "browser-automation-studio",
        "status": "running",
        "pid": 12847,
        "uptime_seconds": 389593,
        "last_restart": "2025-12-26T14:23:00Z",
        "ports": [
          {"name": "ui", "port": 3000, "status": "listening", "responding": true},
          {"name": "api", "port": 3001, "status": "listening", "responding": true},
          {"name": "ws", "port": 3002, "status": "listening", "clients": 3}
        ],
        "resources": {
          "cpu_percent": 7.4,
          "memory_mb": 440,
          "memory_percent": 5.5
        }
      }
    ],
    "resources": [
      {
        "id": "postgres",
        "status": "running",
        "pid": 8821,
        "port": 5432,
        "uptime_seconds": 1048800,
        "metrics": {
          "connections": 8,
          "data_size_bytes": 2576980377
        }
      },
      {
        "id": "redis",
        "status": "running",
        "pid": 8834,
        "port": 6379,
        "uptime_seconds": 1048800,
        "metrics": {
          "memory_used_mb": 48,
          "memory_max_mb": 256,
          "keys": 1247,
          "hit_rate": 0.942
        }
      }
    ],
    "unexpected": [
      {
        "pid": 29441,
        "command": "node /tmp/rogue-server.js",
        "port": 8080,
        "user": "root"
      }
    ]
  },

  "ports": [
    {"port": 22, "process": "sshd", "type": "system"},
    {"port": 80, "process": "caddy", "type": "edge"},
    {"port": 443, "process": "caddy", "type": "edge"},
    {"port": 3000, "process": "scenario-ui", "type": "scenario", "matches_manifest": true},
    {"port": 3001, "process": "scenario-api", "type": "scenario", "matches_manifest": true},
    {"port": 3002, "process": "scenario-ws", "type": "scenario", "matches_manifest": true},
    {"port": 5432, "process": "postgres", "type": "resource"},
    {"port": 6379, "process": "redis", "type": "resource"},
    {"port": 8080, "process": "node", "type": "unexpected", "pid": 29441}
  ],

  "caddy": {
    "running": true,
    "domain": "bas.vrooli.com",
    "tls": {
      "valid": true,
      "issuer": "Let's Encrypt",
      "expires": "2025-03-15T00:00:00Z",
      "days_remaining": 75
    },
    "routes": [
      {"path": "/", "upstream": "127.0.0.1:3000"},
      {"path": "/api/*", "upstream": "127.0.0.1:3001"},
      {"path": "/ws", "upstream": "127.0.0.1:3002"}
    ]
  },

  "system": {
    "cpu": {
      "cores": 4,
      "model": "Intel Xeon E5-2680",
      "usage_percent": 38,
      "load_average": [1.24, 1.18, 0.95]
    },
    "memory": {
      "total_mb": 8192,
      "used_mb": 5570,
      "free_mb": 2622,
      "usage_percent": 68
    },
    "disk": {
      "total_gb": 200,
      "used_gb": 84,
      "free_gb": 116,
      "usage_percent": 42
    },
    "swap": {
      "total_mb": 4096,
      "used_mb": 492,
      "usage_percent": 12
    },
    "uptime_seconds": 3888000
  }
}
```

---

#### 2. GET `/api/v1/deployments/{id}/files`

**Purpose:** List directory contents on VPS.

**Request:**
```
GET /api/v1/deployments/{id}/files?path=/root/Vrooli/.vrooli
```

**Response:**
```json
{
  "ok": true,
  "path": "/root/Vrooli/.vrooli",
  "entries": [
    {
      "name": "cloud",
      "type": "directory",
      "size_bytes": 889192448,
      "modified": "2025-12-30T10:42:00Z",
      "permissions": "drwxr-xr-x"
    },
    {
      "name": "service.json",
      "type": "file",
      "size_bytes": 2048,
      "modified": "2025-12-26T14:22:00Z",
      "permissions": "-rw-r--r--"
    }
  ]
}
```

---

#### 3. GET `/api/v1/deployments/{id}/files/content`

**Purpose:** Read file contents from VPS.

**Request:**
```
GET /api/v1/deployments/{id}/files/content?path=/root/Vrooli/.vrooli/cloud/manifest.json
```

**Response:**
```json
{
  "ok": true,
  "path": "/root/Vrooli/.vrooli/cloud/manifest.json",
  "size_bytes": 4301,
  "content": "{\n  \"version\": \"1.0.0\",\n  ...",
  "truncated": false
}
```

---

#### 4. GET `/api/v1/deployments/{id}/drift`

**Purpose:** Compare manifest expectations vs actual state.

**Response:**
```json
{
  "ok": true,
  "timestamp": "2025-12-30T10:34:56Z",
  "summary": {
    "passed": 12,
    "warnings": 2,
    "drifts": 1
  },
  "checks": [
    {
      "category": "scenarios",
      "name": "browser-automation-studio",
      "status": "pass",
      "expected": "running",
      "actual": "running (PID 12847)"
    },
    {
      "category": "resources",
      "name": "qdrant",
      "status": "warning",
      "expected": "not specified in manifest",
      "actual": "running (PID 9012)",
      "message": "Resource is running but not in manifest",
      "actions": ["stop", "add_to_manifest"]
    },
    {
      "category": "ports",
      "name": "api_port",
      "status": "drift",
      "expected": "3001 â† scenario-api",
      "actual": "3001 â† node (PID 29441)",
      "message": "Wrong process on manifest port",
      "actions": ["kill_pid", "restart_scenario"]
    }
  ],
  "bundle_drift": {
    "deployed_hash": "7d3e91...",
    "deployed_at": "2025-12-26T14:23:00Z",
    "local_hash": "a8f2c1...",
    "local_built_at": "2025-12-30T10:42:00Z",
    "is_outdated": true,
    "changes": [
      {"type": "modified", "path": "scenarios/bas/ui/src/App.tsx"},
      {"type": "modified", "path": "scenarios/bas/api/handlers.go"},
      {"type": "added", "path": "scenarios/bas/ui/src/components/NewFeature.tsx"},
      {"type": "deleted", "path": "scenarios/bas/api/deprecated.go"}
    ]
  }
}
```

---

#### 5. GET `/api/v1/deployments/{id}/bundles`

**Purpose:** List bundles on VPS with inventory.

**Response:**
```json
{
  "ok": true,
  "bundles": [
    {
      "filename": "mini-vrooli_bas_a8f2c1...tar.gz",
      "scenario_id": "browser-automation-studio",
      "hash": "a8f2c1...",
      "size_bytes": 297795584,
      "created_at": "2025-12-30T10:42:00Z",
      "is_deployed": false,
      "is_latest": true
    },
    {
      "filename": "mini-vrooli_bas_7d3e91...tar.gz",
      "scenario_id": "browser-automation-studio",
      "hash": "7d3e91...",
      "size_bytes": 294649856,
      "created_at": "2025-12-26T14:21:00Z",
      "is_deployed": true,
      "is_latest": false
    }
  ],
  "stats": {
    "total_count": 6,
    "total_size_bytes": 1288490188,
    "by_scenario": {
      "browser-automation-studio": {"count": 3, "size_bytes": 889192448},
      "knowledge-observatory": {"count": 1, "size_bytes": 163577856},
      "api-manager": {"count": 2, "size_bytes": 212860928}
    }
  },
  "retention_policy": {
    "keep_per_scenario": 3,
    "cleanable_count": 3,
    "cleanable_size_bytes": 445644800
  }
}
```

---

#### 6. POST `/api/v1/deployments/{id}/bundles/cleanup`

**Purpose:** Delete old bundles per retention policy.

**Request:**
```json
{
  "keep_per_scenario": 3,
  "dry_run": false
}
```

**Response:**
```json
{
  "ok": true,
  "deleted": [
    {"filename": "mini-vrooli_bas_old1.tar.gz", "size_bytes": 148822400},
    {"filename": "mini-vrooli_api_old1.tar.gz", "size_bytes": 106430528}
  ],
  "freed_bytes": 445644800,
  "remaining_count": 6
}
```

---

#### 7. POST `/api/v1/deployments/{id}/actions/kill`

**Purpose:** Kill a specific process on VPS.

**Request:**
```json
{
  "pid": 29441,
  "signal": "TERM"
}
```

---

#### 8. POST `/api/v1/deployments/{id}/actions/restart`

**Purpose:** Restart a scenario or resource.

**Request:**
```json
{
  "type": "scenario",
  "id": "browser-automation-studio"
}
```

---

#### 9. WebSocket `/api/v1/deployments/{id}/logs`

**Purpose:** Stream aggregated logs in real-time.

**Client sends:**
```json
{
  "sources": ["all"],
  "level": "all",
  "tail": 100
}
```

**Server streams:**
```json
{
  "timestamp": "2025-12-30T12:34:56Z",
  "source": "scenario-api",
  "level": "INFO",
  "message": "GET /api/health 200 12ms"
}
```

---

#### 10. WebSocket `/api/v1/deployments/{id}/terminal`

**Purpose:** Interactive SSH terminal.

Uses standard WebSocket terminal protocol (xterm.js compatible).

---

## Data Models

### Database Schema Changes

```sql
-- Extend deployments table
ALTER TABLE deployments ADD COLUMN IF NOT EXISTS
    deployment_history JSONB DEFAULT '[]'::jsonb;

-- New table for autoheal events
CREATE TABLE IF NOT EXISTS autoheal_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    deployment_id UUID REFERENCES deployments(id) ON DELETE CASCADE,
    target_type VARCHAR(20) NOT NULL, -- 'scenario' or 'resource'
    target_id VARCHAR(255) NOT NULL,
    reason VARCHAR(255) NOT NULL,
    recovery_time_ms INTEGER,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_autoheal_events_deployment ON autoheal_events(deployment_id);
CREATE INDEX idx_autoheal_events_created ON autoheal_events(created_at);
```

### TypeScript Types (Frontend)

```typescript
// Live State
interface LiveState {
  ok: boolean;
  timestamp: string;
  sync_duration_ms: number;
  processes: ProcessState;
  ports: PortBinding[];
  caddy: CaddyState;
  system: SystemState;
}

interface ProcessState {
  scenarios: ScenarioProcess[];
  resources: ResourceProcess[];
  unexpected: UnexpectedProcess[];
}

interface ScenarioProcess {
  id: string;
  status: 'running' | 'stopped' | 'failed';
  pid: number;
  uptime_seconds: number;
  last_restart: string;
  ports: ProcessPort[];
  resources: {
    cpu_percent: number;
    memory_mb: number;
    memory_percent: number;
  };
}

interface PortBinding {
  port: number;
  process: string;
  type: 'system' | 'edge' | 'scenario' | 'resource' | 'unexpected';
  matches_manifest?: boolean;
  pid?: number;
}

interface CaddyState {
  running: boolean;
  domain: string;
  tls: {
    valid: boolean;
    issuer: string;
    expires: string;
    days_remaining: number;
  };
  routes: CaddyRoute[];
}

interface SystemState {
  cpu: { cores: number; usage_percent: number; load_average: number[] };
  memory: { total_mb: number; used_mb: number; usage_percent: number };
  disk: { total_gb: number; used_gb: number; usage_percent: number };
  swap: { total_mb: number; used_mb: number; usage_percent: number };
  uptime_seconds: number;
}

// Drift Detection
interface DriftReport {
  ok: boolean;
  timestamp: string;
  summary: { passed: number; warnings: number; drifts: number };
  checks: DriftCheck[];
  bundle_drift?: BundleDrift;
}

interface DriftCheck {
  category: 'scenarios' | 'resources' | 'ports' | 'edge';
  name: string;
  status: 'pass' | 'warning' | 'drift';
  expected: string;
  actual: string;
  message?: string;
  actions?: string[];
}

// File Explorer
interface FileEntry {
  name: string;
  type: 'file' | 'directory';
  size_bytes: number;
  modified: string;
  permissions: string;
}

interface FileContent {
  ok: boolean;
  path: string;
  size_bytes: number;
  content: string;
  truncated: boolean;
}

// Bundles
interface BundleInventory {
  bundles: Bundle[];
  stats: BundleStats;
  retention_policy: RetentionPolicy;
}

interface Bundle {
  filename: string;
  scenario_id: string;
  hash: string;
  size_bytes: number;
  created_at: string;
  is_deployed: boolean;
  is_latest: boolean;
}
```

### Go Types (Backend)

```go
// vps_live_state.go

type LiveStateResult struct {
    OK              bool           `json:"ok"`
    Timestamp       string         `json:"timestamp"`
    SyncDurationMs  int64          `json:"sync_duration_ms"`
    Processes       ProcessState   `json:"processes"`
    Ports           []PortBinding  `json:"ports"`
    Caddy           CaddyState     `json:"caddy"`
    System          SystemState    `json:"system"`
    Error           string         `json:"error,omitempty"`
}

type ProcessState struct {
    Scenarios   []ScenarioProcess   `json:"scenarios"`
    Resources   []ResourceProcess   `json:"resources"`
    Unexpected  []UnexpectedProcess `json:"unexpected"`
}

type ScenarioProcess struct {
    ID            string        `json:"id"`
    Status        string        `json:"status"`
    PID           int           `json:"pid"`
    UptimeSeconds int64         `json:"uptime_seconds"`
    LastRestart   string        `json:"last_restart,omitempty"`
    Ports         []ProcessPort `json:"ports"`
    Resources     struct {
        CPUPercent    float64 `json:"cpu_percent"`
        MemoryMB      int     `json:"memory_mb"`
        MemoryPercent float64 `json:"memory_percent"`
    } `json:"resources"`
}

type PortBinding struct {
    Port           int    `json:"port"`
    Process        string `json:"process"`
    Type           string `json:"type"` // system, edge, scenario, resource, unexpected
    MatchesManifest *bool  `json:"matches_manifest,omitempty"`
    PID            *int   `json:"pid,omitempty"`
}

type CaddyState struct {
    Running bool   `json:"running"`
    Domain  string `json:"domain"`
    TLS     struct {
        Valid         bool   `json:"valid"`
        Issuer        string `json:"issuer"`
        Expires       string `json:"expires"`
        DaysRemaining int    `json:"days_remaining"`
    } `json:"tls"`
    Routes []CaddyRoute `json:"routes"`
}

type SystemState struct {
    CPU struct {
        Cores        int       `json:"cores"`
        Model        string    `json:"model,omitempty"`
        UsagePercent float64   `json:"usage_percent"`
        LoadAverage  []float64 `json:"load_average"`
    } `json:"cpu"`
    Memory struct {
        TotalMB      int     `json:"total_mb"`
        UsedMB       int     `json:"used_mb"`
        FreeMB       int     `json:"free_mb"`
        UsagePercent float64 `json:"usage_percent"`
    } `json:"memory"`
    Disk struct {
        TotalGB      int     `json:"total_gb"`
        UsedGB       int     `json:"used_gb"`
        FreeGB       int     `json:"free_gb"`
        UsagePercent float64 `json:"usage_percent"`
    } `json:"disk"`
    Swap struct {
        TotalMB      int     `json:"total_mb"`
        UsedMB       int     `json:"used_mb"`
        UsagePercent float64 `json:"usage_percent"`
    } `json:"swap"`
    UptimeSeconds int64 `json:"uptime_seconds"`
}
```

---

## Implementation Phases

### Phase 1: Foundation â€” Live State Backend

**Goal:** Build the backend infrastructure for querying VPS state.

**Files to create/modify:**
- `scenarios/scenario-to-cloud/api/vps_live_state.go` (new)
- `scenarios/scenario-to-cloud/api/handlers_live_state.go` (new)
- `scenarios/scenario-to-cloud/api/main.go` (add routes)
- `scenarios/scenario-to-cloud/api/parsers.go` (new - parse ps, ss, df output)

**Tasks:**

1. **Create SSH command executors**
   - `ps aux --no-headers` â†’ parse into ProcessInfo structs
   - `ss -tlnp` â†’ parse into PortBinding structs
   - `df -h / && free -m` â†’ parse into SystemState
   - `cat /proc/uptime` â†’ parse uptime
   - `cat /proc/loadavg` â†’ parse load average

2. **Create parallel SSH executor**
   - Execute multiple commands in parallel
   - Aggregate results into LiveStateResult
   - Handle partial failures gracefully

3. **Create API endpoint**
   - `GET /api/v1/deployments/{id}/live-state`
   - Validate deployment exists
   - Build SSH config from manifest
   - Execute inspection
   - Return structured JSON

4. **Add Caddy inspection**
   - `cat /etc/caddy/Caddyfile` â†’ parse routes
   - `curl -s https://localhost/health --cacert ...` â†’ verify TLS
   - `openssl s_client -connect localhost:443` â†’ get cert expiry

**Estimated complexity:** Medium
**Dependencies:** None

---

### Phase 2: Live State Frontend

**Goal:** Build the UI for the Live State tab.

**Files to create/modify:**
- `scenarios/scenario-to-cloud/ui/src/components/deployments/tabs/LiveStateTab.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/ProcessCard.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/PortTable.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/SystemResources.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/CaddyStatus.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/hooks/useLiveState.ts` (new)
- `scenarios/scenario-to-cloud/ui/src/lib/api.ts` (extend)

**Tasks:**

1. **Create useLiveState hook**
   - Fetch live state from API
   - Handle loading/error states
   - Support manual refresh

2. **Create ProcessCard component**
   - Display scenario/resource info
   - Show ports, CPU, memory
   - Include action buttons (restart/stop)

3. **Create PortTable component**
   - List all bound ports
   - Color-code by type (system/edge/scenario/unexpected)
   - Show manifest match status

4. **Create SystemResources component**
   - Progress bars for CPU/RAM/Disk/Swap
   - Load average display

5. **Create CaddyStatus component**
   - Domain and TLS certificate info
   - Route table
   - Certificate expiry warning

6. **Integrate into DeploymentDetails**
   - Add tab navigation
   - Render LiveStateTab as default

**Estimated complexity:** Medium
**Dependencies:** Phase 1

---

### Phase 3: File Explorer Backend

**Goal:** Enable browsing VPS filesystem.

**Files to create/modify:**
- `scenarios/scenario-to-cloud/api/vps_files.go` (new)
- `scenarios/scenario-to-cloud/api/handlers_files.go` (new)
- `scenarios/scenario-to-cloud/api/main.go` (add routes)

**Tasks:**

1. **Create directory listing endpoint**
   - `GET /api/v1/deployments/{id}/files?path=...`
   - Execute `ls -la <path>` via SSH
   - Parse output into FileEntry structs
   - Validate path is within workdir (security)

2. **Create file content endpoint**
   - `GET /api/v1/deployments/{id}/files/content?path=...`
   - Execute `cat <path>` via SSH
   - Limit file size (e.g., 1MB max)
   - Support binary detection

3. **Create bundle inventory endpoint**
   - `GET /api/v1/deployments/{id}/bundles`
   - `find .vrooli/cloud/bundles -name "*.tar.gz" -printf ...`
   - Parse and aggregate stats

4. **Create bundle cleanup endpoint**
   - `POST /api/v1/deployments/{id}/bundles/cleanup`
   - Calculate which bundles to delete
   - Execute `rm` commands
   - Return freed space

**Security considerations:**
- Path traversal protection (must stay within workdir)
- Max file size limits
- No write operations (read-only for now)

**Estimated complexity:** Medium
**Dependencies:** Phase 1 (SSH infrastructure)

---

### Phase 4: File Explorer Frontend

**Goal:** Build the File Explorer tab UI.

**Files to create/modify:**
- `scenarios/scenario-to-cloud/ui/src/components/deployments/tabs/FilesTab.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/FileTree.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/FileViewer.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/BundleInventory.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/QuickAccess.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/hooks/useFiles.ts` (new)

**Tasks:**

1. **Create useFiles hook**
   - Fetch directory listings
   - Fetch file content
   - Handle navigation state

2. **Create FileTree component**
   - Expandable directory tree
   - File icons by type
   - Size and date columns
   - Click to view file

3. **Create FileViewer component**
   - Syntax-highlighted code display
   - Copy button
   - Line numbers

4. **Create QuickAccess component**
   - Shortcuts to common files
   - manifest.json, Caddyfile, etc.

5. **Create BundleInventory component**
   - Table of bundles by scenario
   - Size/date info
   - Cleanup button with confirmation

**Estimated complexity:** Medium
**Dependencies:** Phase 3

---

### Phase 5: Drift Detection

**Goal:** Compare manifest expectations vs actual state.

**Files to create/modify:**
- `scenarios/scenario-to-cloud/api/vps_drift.go` (new)
- `scenarios/scenario-to-cloud/api/handlers_drift.go` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/tabs/DriftTab.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/DriftCheck.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/hooks/useDrift.ts` (new)

**Backend tasks:**

1. **Create drift detection engine**
   - Load manifest from deployment
   - Fetch live state
   - Compare scenarios: expected vs actual running
   - Compare resources: expected vs actual running
   - Compare ports: expected owner vs actual owner
   - Compare edge: domain, TLS status
   - Detect unexpected processes

2. **Create bundle drift detection**
   - Compare deployed bundle hash vs latest local
   - If different, show what changed

3. **Create drift API endpoint**
   - `GET /api/v1/deployments/{id}/drift`

**Frontend tasks:**

1. **Create DriftCheck component**
   - Visual pass/warning/drift indicators
   - Expandable details
   - Action buttons for fixes

2. **Create DriftTab**
   - Summary badges
   - Categorized check results
   - Bundle drift section

**Estimated complexity:** High (lots of comparison logic)
**Dependencies:** Phases 1-4

---

### Phase 6: Actions System

**Goal:** Enable taking action on problems (kill, restart, cleanup).

**Files to create/modify:**
- `scenarios/scenario-to-cloud/api/vps_actions.go` (new)
- `scenarios/scenario-to-cloud/api/handlers_actions.go` (new)
- `scenarios/scenario-to-cloud/ui/src/hooks/useActions.ts` (new)
- Update existing components with action buttons

**Tasks:**

1. **Create kill process endpoint**
   - `POST /api/v1/deployments/{id}/actions/kill`
   - Validate PID exists
   - Execute `kill -TERM <pid>` or `kill -9 <pid>`

2. **Create restart endpoint**
   - `POST /api/v1/deployments/{id}/actions/restart`
   - `vrooli scenario restart <id>` or `vrooli resource restart <id>`

3. **Create stop endpoint**
   - `POST /api/v1/deployments/{id}/actions/stop`
   - Similar to restart

4. **Create useActions hook**
   - Mutation hooks for each action
   - Optimistic updates
   - Refetch live state after action

5. **Add action buttons to components**
   - ProcessCard: restart/stop buttons
   - PortTable: kill unexpected process
   - DriftCheck: fix actions

**Estimated complexity:** Medium
**Dependencies:** Phases 1-5

---

### Phase 7: History & Logs

**Goal:** Deployment timeline, autoheal events, log aggregation.

**Files to create/modify:**
- `scenarios/scenario-to-cloud/api/handlers_history.go` (new)
- `scenarios/scenario-to-cloud/api/handlers_logs.go` (new)
- `scenarios/scenario-to-cloud/api/vps_logs.go` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/tabs/HistoryTab.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/Timeline.tsx` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/LogViewer.tsx` (new)

**Backend tasks:**

1. **Extend deployment schema**
   - Add deployment_history JSONB column
   - Create autoheal_events table

2. **Record deployment events**
   - On each deployment step, append to history
   - Store step name, timestamp, duration, status

3. **Create history endpoint**
   - `GET /api/v1/deployments/{id}/history`
   - Return deployment timeline

4. **Create autoheal events endpoint**
   - `GET /api/v1/deployments/{id}/autoheal-events`
   - Parse autoheal logs on VPS or query autoheal API

5. **Create log aggregation**
   - Fetch logs from multiple sources
   - Parse into structured format (timestamp, source, level, message)

6. **Create WebSocket for live logs**
   - `WS /api/v1/deployments/{id}/logs`
   - Tail multiple log files
   - Stream to client

**Frontend tasks:**

1. **Create Timeline component**
   - Visual deployment history
   - Expandable step details
   - Error highlighting

2. **Create LogViewer component**
   - Source filter dropdown
   - Level filter dropdown
   - Search box
   - Auto-scroll toggle

**Estimated complexity:** High
**Dependencies:** Phases 1-6

---

### Phase 8: Terminal (Optional)

**Goal:** Web-based SSH terminal.

**Files to create/modify:**
- `scenarios/scenario-to-cloud/api/handlers_terminal.go` (new)
- `scenarios/scenario-to-cloud/ui/src/components/deployments/tabs/TerminalTab.tsx` (new)

**Tasks:**

1. **WebSocket SSH bridge**
   - `WS /api/v1/deployments/{id}/terminal`
   - Establish SSH connection
   - Bridge WebSocket <-> SSH stdin/stdout

2. **Frontend terminal emulator**
   - Integrate xterm.js
   - Handle resize events
   - Fullscreen mode

**Libraries:**
- Backend: `golang.org/x/crypto/ssh`
- Frontend: `xterm.js` + `xterm-addon-fit`

**Security considerations:**
- Require explicit user confirmation
- Session timeout
- Audit logging

**Estimated complexity:** Medium-High
**Dependencies:** Phase 1 (SSH config)

---

### Phase 9: Polish & Integration

**Goal:** Final integration, testing, documentation.

**Tasks:**

1. **Refactor DeploymentDetails.tsx**
   - Replace old layout with tab-based design
   - Add header with health badges
   - Wire up all tabs

2. **Add loading states**
   - Skeleton loaders for each tab
   - Error boundaries

3. **Add refresh indicators**
   - "Last synced: X seconds ago" everywhere
   - Manual refresh buttons

4. **Performance optimization**
   - Cache live state for 30 seconds
   - Lazy load tabs
   - Virtualize long lists

5. **Testing**
   - Unit tests for parsers
   - Integration tests for APIs
   - E2E tests for critical flows

6. **Documentation**
   - Update user docs
   - Add tooltips/help text in UI

**Estimated complexity:** Medium
**Dependencies:** All previous phases

---

## Technical Considerations

### SSH Command Parsing

The backend needs robust parsers for various command outputs:

```go
// Example: parse ss -tlnp output
// LISTEN  0  128  0.0.0.0:22  0.0.0.0:*  users:(("sshd",pid=1234,fd=3))
func parseSSOutput(output string) ([]PortBinding, error) {
    var ports []PortBinding
    lines := strings.Split(output, "\n")
    for _, line := range lines {
        if !strings.HasPrefix(line, "LISTEN") {
            continue
        }
        // Parse fields...
    }
    return ports, nil
}
```

### Caching Strategy

- Cache live state for 30 seconds on API side
- Show "Last synced" timestamp to user
- User can force refresh anytime
- Don't poll VPS (too expensive)

### Error Handling

Every SSH operation can fail. Handle gracefully:

```go
type LiveStateResult struct {
    OK     bool   `json:"ok"`
    Error  string `json:"error,omitempty"`

    // Partial results
    Processes *ProcessState `json:"processes,omitempty"`
    Ports     []PortBinding `json:"ports,omitempty"`
    // ...
}
```

### Security

1. **Path traversal prevention**
   - All file paths must be within workdir
   - Reject `..` in paths

2. **Command injection prevention**
   - Shell-quote all user inputs
   - Validate inputs strictly

3. **Terminal access**
   - Require explicit user action
   - Session timeout
   - Consider audit logging

### Performance

- Parallel SSH commands (don't serialize)
- Limit file reads to 1MB
- Truncate large outputs
- WebSocket for logs (not polling)

---

## Success Criteria

### Must Have (MVP)

1. [ ] Live State tab showing processes, ports, and system resources
2. [ ] File Explorer with directory browsing and file viewing
3. [ ] Bundle inventory with cleanup functionality
4. [ ] Basic drift detection (scenarios, resources, ports)
5. [ ] Action buttons (restart, stop, kill)
6. [ ] Refresh functionality with "last synced" indicator

### Should Have

1. [ ] Caddy/TLS status display
2. [ ] Full drift detection (including bundle version)
3. [ ] Deployment history timeline
4. [ ] Log viewer with filtering
5. [ ] Autoheal event display

### Nice to Have

1. [ ] Web terminal
2. [ ] Live log streaming (WebSocket)
3. [ ] Disk usage breakdown visualization
4. [ ] One-click "fix drift" actions
5. [ ] Bundle diff viewer

---

## Future Considerations

### Multi-Deployment View

A dashboard showing health status across ALL deployments at once, not just one.

### Alerts & Notifications

- Email/Slack when deployment goes unhealthy
- Certificate expiry warnings
- Disk space warnings

### Automated Remediation

- Auto-restart on crash (already via autoheal)
- Auto-cleanup old bundles
- Auto-renew certificates (already via Caddy)

### Metrics & Monitoring

- Time-series data (CPU/RAM over time)
- Integration with Prometheus/Grafana
- Request rate, error rate, latency

### Remote Development

- Edit files directly on VPS (dangerous but useful)
- Hot reload scenario after file change
- Git sync between local and VPS

---

## Appendix

### Visual Reference: Overall Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BROWSER                                      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           DEPLOYMENT DETAILS PAGE                              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ HEADER                                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸŸ¢ browser-automation-studio â€¢ bas.vrooli.com           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [HTTPS âœ“] [API âœ“] [2/2 Resources] [1/1 Scenario]        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚ Live â”‚ Files  â”‚ Drift â”‚ History â”‚ Terminal â”‚              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                    TAB CONTENT                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    (Processes, Ports, System, Caddy, Files, Drift...)   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â”‚ HTTP / WebSocket                      â”‚
â”‚                              â–¼                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚                    SCENARIO-TO-CLOUD API                             â”‚
â”‚                                                                      â”‚
â”‚   /deployments/{id}/live-state  â”€â”€â”€â”€â”€â”                              â”‚
â”‚   /deployments/{id}/files       â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚   /deployments/{id}/drift       â”€â”€â”€â”€â”€â”¼â”€â”€â–¶  SSH to VPS               â”‚
â”‚   /deployments/{id}/bundles     â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚   /deployments/{id}/actions/*   â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚   /deployments/{id}/logs (WS)   â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚                           VPS                                        â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  /root/Vrooli                                                â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Processes:                                                 â”‚   â”‚
â”‚   â”‚     - browser-automation-studio (PID 12847)                  â”‚   â”‚
â”‚   â”‚     - vrooli-autoheal (PID 12901)                           â”‚   â”‚
â”‚   â”‚     - postgres (PID 8821)                                    â”‚   â”‚
â”‚   â”‚     - redis (PID 8834)                                       â”‚   â”‚
â”‚   â”‚     - caddy (PID 7821)                                       â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Files:                                                     â”‚   â”‚
â”‚   â”‚     - .vrooli/cloud/manifest.json                           â”‚   â”‚
â”‚   â”‚     - .vrooli/cloud/bundles/*.tar.gz                        â”‚   â”‚
â”‚   â”‚     - /etc/caddy/Caddyfile                                  â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Ports:                                                     â”‚   â”‚
â”‚   â”‚     :22, :80, :443, :3000, :3001, :3002, :5432, :6379       â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SSH Commands Reference

| Purpose | Command |
|---------|---------|
| Process list | `ps aux --no-headers` |
| Port bindings | `ss -tlnp` |
| Disk usage | `df -h /` |
| Memory | `free -m` |
| CPU info | `cat /proc/cpuinfo \| grep -c processor` |
| Load average | `cat /proc/loadavg` |
| Uptime | `cat /proc/uptime` |
| Directory listing | `ls -la <path>` |
| File content | `cat <path>` |
| Caddy config | `cat /etc/caddy/Caddyfile` |
| TLS cert check | `echo \| openssl s_client -connect localhost:443 2>/dev/null \| openssl x509 -noout -dates` |
| Process by port | `lsof -i :<port> -P -n` |
| Kill process | `kill -TERM <pid>` |
| Bundle list | `find .vrooli/cloud/bundles -name "*.tar.gz" -printf "%f %s %T@\n"` |

---

*End of Implementation Plan*
