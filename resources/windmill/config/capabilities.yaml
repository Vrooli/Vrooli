apiVersion: vrooli.com/v1
kind: ResourceCapability
metadata:
  name: windmill
  category: automation
  subcategory: workflow
  description: "Developer-centric workflow automation platform with code-first approach"
  maturity: stable
  complexity: advanced
  
spec:
  # Core capabilities this resource provides
  capabilities:
    primary:
      - code-based-workflows
      - multi-language-support
      - workflow-automation
      - ui-generation
    secondary:
      - scheduled-execution
      - api-orchestration
      - data-transformation
      - webhook-processing
    specialized:
      - typescript-workflows
      - python-workflows
      - go-workflows
      - bash-workflows
      - ui-app-builder
  
  # API interfaces available
  interfaces:
    - name: workflow-execution
      endpoint: "/api/w/{workspace}/jobs/run/f/{flow_path}"
      method: [POST]
      inputTypes: [application/json]
      outputTypes: [application/json]
      description: "Execute workflows and flows programmatically"
    - name: script-execution
      endpoint: "/api/w/{workspace}/jobs/run/p/{script_path}"
      method: [POST]
      inputTypes: [application/json]
      outputTypes: [application/json]
      description: "Execute individual scripts in various languages"
    - name: app-management
      endpoint: "/api/w/{workspace}/apps"
      method: [GET, POST, PUT, DELETE]
      inputTypes: [application/json]
      outputTypes: [application/json]
      description: "Manage UI applications and components"
    - name: webhook-endpoints
      endpoint: "/api/w/{workspace}/jobs/run/f/{flow_path}"
      method: [POST, GET]
      inputTypes: [application/json, text/plain]
      outputTypes: [application/json, text/plain]
      description: "Webhook endpoints for external system integration"
  
  # Resource dependencies and requirements
  dependencies:
    required:
      - docker
      - postgres
    optional:
      - redis
      - s3-storage
    incompatible: []
  
  # Scenario compatibility
  scenarios:
    primary:
      - workflow-scheduler
      - app-personalizer
      - system-monitor
    secondary:
      - research-assistant
      - document-manager
      - brand-manager
    optimal_combinations:
      - [windmill, postgres, minio]         # Full-stack workflow platform
      - [windmill, ollama, qdrant]         # AI-powered workflow automation
      - [windmill, n8n, vault]             # Hybrid automation approach
      - [windmill, whisper, agent-s2]      # Multi-modal development workflows
  
  # Business intelligence
  business:
    revenue_range:
      min: 10000
      max: 50000
      currency: USD
    complexity_score: 8  # 1-10 scale
    implementation_time: "3-7 days"
    upwork_demand: high
    target_industries:
      - software-development
      - devops-automation
      - business-automation
      - data-processing
      - enterprise-software
      - startup-tools
    common_project_types:
      - "Custom workflow automation platform"
      - "Developer-friendly business process automation"
      - "Code-first internal tools"
      - "Advanced data processing pipelines"
      - "Custom UI applications with automation"
  
  # Technical specifications
  technical:
    ports: [5681]
    protocols: [http, rest, webhook, websocket]
    data_formats: [json, typescript, python, go, bash, yaml]
    resource_requirements:
      memory:
        minimum: "2GB"
        recommended: "4GB"
        optimal: "8GB+"
      cpu:
        minimum: "2 cores"
        recommended: "4 cores"
        optimal: "8+ cores"
      storage:
        minimum: "2GB"
        recommended: "10GB"
        optimal: "50GB+"
      database:
        required: true
        recommended: true
        supported: [postgresql]
    scaling:
      horizontal: true
      vertical: true
      max_concurrent_jobs: 100
      execution_modes: [sync, async, scheduled, webhook]
  
  # AI generation hints for automated scenario creation
  ai_generation:
    common_patterns:
      - code-based-automation
      - developer-workflow-tools
      - custom-ui-applications
      - advanced-data-processing
    integration_targets:
      preferred: [postgres, minio, ollama, vault]
      compatible: [n8n, qdrant, redis, whisper]
      avoid: [simple-drag-drop-requirements, non-technical-users]
    workflow_templates:
      development: "Write code → Test locally → Deploy workflow → Monitor execution"
      automation: "Trigger event → Execute script → Transform data → Call APIs → Return results"
      ui_app: "Build UI components → Connect to data sources → Deploy app → Handle user interactions"
    complexity_indicators:
      simple: ["basic scripts", "simple workflows", "static UI components"]
      intermediate: ["multi-step workflows", "dynamic UIs", "API integrations", "scheduled jobs"]
      advanced: ["complex business logic", "enterprise integrations", "real-time processing", "custom runtime environments"]
  
  # Specialized features
  features:
    multi_language_support:
      enabled: true
      description: "Native support for TypeScript, Python, Go, Bash, SQL"
      languages: ["typescript", "python", "go", "bash", "sql", "rest"]
    ui_builder:
      enabled: true
      description: "Build custom UI applications with workflow integration"
      components: ["forms", "tables", "charts", "buttons", "modals"]
    code_editor:
      enabled: true
      description: "In-browser code editor with IntelliSense and debugging"
      features: ["syntax-highlighting", "auto-completion", "debugging", "version-control"]
    workspace_management:
      enabled: true
      description: "Multi-tenant workspace isolation and management"
      security_level: enterprise
  
  # Integration capabilities
  integrations:
    supported_languages:
      - typescript
      - python
      - go
      - bash
      - sql
      - rest_apis
    runtime_environments:
      - node
      - python3
      - golang
      - bash
      - postgresql
    ui_components:
      - forms
      - tables
      - charts
      - buttons
      - modals
      - file_inputs
      - date_pickers
  
  # Testing and validation
  testing:
    test_file: "scripts/resources/automation/windmill/test/integration-test.sh"
    test_coverage:
      - service_health
      - workflow_execution
      - script_execution
      - ui_app_functionality
      - multi_language_support
    fixtures:
      - sample_workflows
      - test_scripts
      - ui_components
    integration_tests:
      - windmill_postgres_integration
      - windmill_minio_storage
      - multi_language_execution
  
  # Documentation and examples
  documentation:
    readme: "scripts/resources/automation/windmill/README.md"
    api_reference: "scripts/resources/automation/windmill/docs/API.md"
    examples_dir: "scripts/resources/automation/windmill/examples/"
    configuration: "scripts/resources/automation/windmill/docs/CONFIGURATION.md"
    architecture: "scripts/resources/automation/windmill/docs/ARCHITECTURE.md"
    installation: "scripts/resources/automation/windmill/docs/INSTALLATION.md"
  
  # Version and compatibility
  version_info:
    min_version: "1.0.0"
    tested_version: "latest"
    api_version: "v1"
    compatibility_matrix:
      docker: ">=20.10.0"
      postgres: ">=14.0"
      node: ">=18.0"
      python: ">=3.8"
      go: ">=1.18"
      architecture: [amd64, arm64]

# Metadata for resource discovery and automation
labels:
  resource.vrooli.com/category: "automation"
  resource.vrooli.com/type: "workflow"
  resource.vrooli.com/maturity: "stable"
  resource.vrooli.com/business-value: "very-high"
  resource.vrooli.com/ai-friendly: "true"
  resource.vrooli.com/developer-focused: "true"