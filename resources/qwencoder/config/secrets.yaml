# QwenCoder Resource Secrets Declaration
# Follows Vrooli Secrets Standard v1.0

version: "1.0"
resource: "qwencoder"
description: "Registry credentials and optional enterprise endpoints for QwenCoder model downloads"

secrets:
  model_registry:
    - name: "huggingface_token"
      path: "secret/resources/qwencoder/registry/huggingface"
      description: "Hugging Face access token used when downloading gated or rate-limited QwenCoder checkpoints"
      required: false
      format: "string"
      default_env: "HUGGINGFACEHUB_API_TOKEN"
      fallback: "env:HF_HUB_TOKEN"
      ttl: "180d"
      renewable: true
      example: "hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
      links:
        - label: "Create Hugging Face token"
          url: "https://huggingface.co/settings/tokens"
  enterprise:
    - name: "private_model_endpoint"
      path: "secret/resources/qwencoder/registry/endpoint"
      description: "Optional private endpoint for mirroring QwenCoder weights (used behind corporate firewalls)"
      required: false
      format: "url"
      default_env: "QWENCODER_MODEL_ENDPOINT"
      example: "https://huggingface.co/my-org/mirrors/qwencoder"

initialization:
  prompt_user:
    - name: "huggingface_token"
      prompt: |
        Provide a Hugging Face access token if you need to download models that require authentication or want to avoid anonymous rate limits.
        Generate a token at https://huggingface.co/settings/tokens ("Read" scope is sufficient).
      validation: "Token should begin with hf_ and contain at least 32 characters"
      optional: true
    - name: "private_model_endpoint"
      prompt: |
        (Optional) Supply an internal HTTPS endpoint if your organization mirrors QwenCoder checkpoints behind a firewall.
        Leave blank to use the public Hugging Face registry.
      validation: "Must be a valid HTTPS URL or blank"
      optional: true

health_check:
  endpoint: "/health"
  port: 11452
  required_secrets: []
  optional_secrets: ["huggingface_token", "private_model_endpoint"]

dependencies:
  - resource: "vault"
    secrets: ["token"]
    purpose: "Secure distribution of Hugging Face access tokens"
    required: false
  - resource: "openrouter"
    secrets: ["api_key"]
    purpose: "Optional: alternative remote LLM provider if QwenCoder models are unavailable"
    required: false

security:
  recommendations:
    - "Store Hugging Face tokens in Vault rather than committing them to disk"
    - "Rotate registry tokens every 180 days"
    - "Limit token scope to read-only model downloads"
    - "Use private endpoints when mirroring models inside regulated environments"

