# Cline Resource Secrets Declaration
version: "1.0"
resource: "cline"
description: "API keys and credentials for AI provider integrations"

secrets:
  # API credentials for different providers
  api_keys:
    - name: "openrouter_api_key"
      path: "secret/resources/cline/api/openrouter"
      description: "OpenRouter API key for multi-model access"
      required: false
      format: "string"
      validation:
        pattern: "^sk-or-v1-[a-f0-9]{64}$"
      default_env: "OPENROUTER_API_KEY"
      example: "sk-or-v1-abc123..."
      fallback: "env:OPENROUTER_API_KEY"
      
    - name: "anthropic_api_key"
      path: "secret/resources/cline/api/anthropic"
      description: "Anthropic API key for Claude models"
      required: false
      format: "string"
      validation:
        pattern: "^sk-ant-[a-zA-Z0-9-]{40,}$"
      default_env: "ANTHROPIC_API_KEY"
      example: "sk-ant-api03-abc123..."
      fallback: "env:ANTHROPIC_API_KEY"
      
    - name: "openai_api_key"
      path: "secret/resources/cline/api/openai"
      description: "OpenAI API key for GPT models"
      required: false
      format: "string"
      validation:
        pattern: "^sk-[a-zA-Z0-9]{32,}$"
      default_env: "OPENAI_API_KEY"
      example: "sk-proj-abc123..."
      fallback: "env:OPENAI_API_KEY"
      
    - name: "google_api_key"
      path: "secret/resources/cline/api/google"
      description: "Google API key for Gemini models"
      required: false
      format: "string"
      default_env: "GOOGLE_API_KEY"
      example: "AIza..."
      fallback: "env:GOOGLE_API_KEY"
      
  # Provider endpoints (for custom/enterprise deployments)
  endpoints:
    - name: "custom_endpoint"
      path: "secret/resources/cline/endpoints/custom"
      description: "Custom API endpoint for enterprise deployments"
      required: false
      format: "url"
      fields:
        - url: "endpoint_url"
        - key: "api_key"
        - model: "default_model"
      default_env: "CLINE_CUSTOM_ENDPOINT"
      
  # Usage limits and quotas
  quotas:
    - name: "monthly_limit"
      path: "secret/resources/cline/quotas/monthly"
      description: "Monthly token/cost limits per provider"
      required: false
      format: "json"
      default_env: "CLINE_MONTHLY_LIMIT"
      example: '{"openrouter": 1000000, "anthropic": 500000}'
      
# Dependencies on other resources
dependencies:
  - resource: "ollama"
    secrets: []
    purpose: "Local model inference (no secrets required)"
    
  - resource: "vault"
    secrets: []
    purpose: "Secure storage of API keys"
    
# Initialization hints
initialization:
  prompt_user:
    - name: "openrouter_api_key"
      prompt: "Enter your OpenRouter API key from https://openrouter.ai/keys"
      validation: "Test connection to OpenRouter API"
      optional: true
      
    - name: "anthropic_api_key"
      prompt: "Enter your Anthropic API key from https://console.anthropic.com/api-keys"
      validation: "Test connection to Anthropic API"
      optional: true
      
    - name: "openai_api_key"
      prompt: "Enter your OpenAI API key from https://platform.openai.com/api-keys"
      validation: "Test connection to OpenAI API"
      optional: true
      
  auto_detect:
    - name: "ollama_available"
      check: "curl -s http://localhost:11434/api/version"
      purpose: "Detect if Ollama is running locally"
      
# Health check for secrets validation
health_check:
  endpoint: "/health/secrets"
  checks:
    - name: "provider_configured"
      description: "At least one provider must be configured"
      condition: "openrouter_api_key OR anthropic_api_key OR openai_api_key OR ollama_available"
      
    - name: "api_reachable"
      description: "Configured provider must be reachable"
      test_endpoint: true
      
  required_secrets: []  # No specific secret required, just one provider