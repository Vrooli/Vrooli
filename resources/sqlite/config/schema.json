{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "SQLite Resource Configuration Schema",
  "type": "object",
  "properties": {
    "database_path": {
      "type": "string",
      "description": "Path where SQLite databases are stored",
      "default": "${VROOLI_DATA}/sqlite/databases"
    },
    "backup_path": {
      "type": "string",
      "description": "Path where database backups are stored",
      "default": "${VROOLI_DATA}/sqlite/backups"
    },
    "max_connections": {
      "type": "integer",
      "description": "Maximum number of concurrent connections",
      "minimum": 1,
      "maximum": 100,
      "default": 10
    },
    "journal_mode": {
      "type": "string",
      "description": "SQLite journal mode",
      "enum": [
        "DELETE",
        "TRUNCATE",
        "PERSIST",
        "MEMORY",
        "WAL",
        "OFF"
      ],
      "default": "WAL"
    },
    "busy_timeout": {
      "type": "integer",
      "description": "Busy timeout in milliseconds",
      "minimum": 0,
      "maximum": 60000,
      "default": 5000
    },
    "cache_size": {
      "type": "integer",
      "description": "Cache size in pages",
      "minimum": -2000000,
      "maximum": 2000000,
      "default": 2000
    },
    "page_size": {
      "type": "integer",
      "description": "Database page size in bytes",
      "enum": [
        512,
        1024,
        2048,
        4096,
        8192,
        16384,
        32768,
        65536
      ],
      "default": 4096
    },
    "synchronous": {
      "type": "string",
      "description": "Synchronous mode for durability",
      "enum": [
        "OFF",
        "NORMAL",
        "FULL",
        "EXTRA"
      ],
      "default": "NORMAL"
    },
    "temp_store": {
      "type": "string",
      "description": "Temporary storage location",
      "enum": [
        "DEFAULT",
        "FILE",
        "MEMORY"
      ],
      "default": "MEMORY"
    },
    "mmap_size": {
      "type": "integer",
      "description": "Memory-mapped I/O size in bytes",
      "minimum": 0,
      "default": 268435456
    },
    "backup_retention_days": {
      "type": "integer",
      "description": "Number of days to retain backups",
      "minimum": 1,
      "maximum": 365,
      "default": 7
    },
    "file_permissions": {
      "type": "string",
      "description": "Unix file permissions for database files",
      "pattern": "^[0-7]{3}$",
      "default": "600"
    }
  },
  "required": [
    "database_path"
  ],
  "additionalProperties": false,
  "$id": "https://vrooli.com/resources/sqlite/schema.json"
}
