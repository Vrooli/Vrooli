{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ElectionGuard Configuration Schema",
  "type": "object",
  "properties": {
    "port": {
      "type": "integer",
      "description": "API server port",
      "minimum": 1024,
      "maximum": 65535,
      "default": 18250
    },
    "vault": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable Vault integration for secrets",
          "default": true
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "Vault server URL",
          "default": "http://localhost:8200"
        },
        "path": {
          "type": "string",
          "description": "Vault path for ElectionGuard secrets",
          "default": "/electionguard"
        }
      }
    },
    "database": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable database export",
          "default": false
        },
        "type": {
          "type": "string",
          "enum": [
            "postgres",
            "sqlite"
          ],
          "description": "Database type",
          "default": "postgres"
        },
        "connection": {
          "type": "string",
          "description": "Database connection string"
        }
      }
    },
    "election": {
      "type": "object",
      "properties": {
        "default_guardians": {
          "type": "integer",
          "description": "Default number of guardians",
          "minimum": 1,
          "maximum": 10,
          "default": 5
        },
        "default_threshold": {
          "type": "integer",
          "description": "Default threshold for key ceremonies",
          "minimum": 1,
          "default": 3
        },
        "key_size": {
          "type": "integer",
          "enum": [
            2048,
            4096,
            8192
          ],
          "description": "Encryption key size in bits",
          "default": 4096
        }
      }
    },
    "performance": {
      "type": "object",
      "properties": {
        "workers": {
          "type": "integer",
          "description": "Number of worker threads",
          "minimum": 1,
          "maximum": 16,
          "default": 4
        },
        "max_batch_size": {
          "type": "integer",
          "description": "Maximum ballot batch size",
          "minimum": 1,
          "maximum": 1000,
          "default": 100
        },
        "cache_enabled": {
          "type": "boolean",
          "description": "Enable computation caching",
          "default": true
        }
      }
    },
    "security": {
      "type": "object",
      "properties": {
        "require_auth": {
          "type": "boolean",
          "description": "Require authentication for API",
          "default": false
        },
        "cors_enabled": {
          "type": "boolean",
          "description": "Enable CORS",
          "default": true
        },
        "cors_origins": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Allowed CORS origins",
          "default": [
            "*"
          ]
        }
      }
    },
    "logging": {
      "type": "object",
      "properties": {
        "level": {
          "type": "string",
          "enum": [
            "debug",
            "info",
            "warning",
            "error"
          ],
          "description": "Log level",
          "default": "info"
        },
        "format": {
          "type": "string",
          "enum": [
            "text",
            "json"
          ],
          "description": "Log format",
          "default": "text"
        }
      }
    }
  },
  "required": [
    "port"
  ],
  "$id": "https://vrooli.com/resources/electionguard/schema.json"
}
