# Audio Test Fixture Metadata
# This file provides metadata for audio test files to enable data-driven testing

version: 1.0
type: audio
description: "Test audio files for speech recognition and audio processing tests"

# Metadata schema
schema:
  commonProperties:
    - path           # Relative path from audio directory
    - tags           # Test categories this file is suitable for
    - testData       # Optional test-specific data
  typeProperties:
    - format         # File format (wav, mp3, ogg, txt)
    - duration       # Duration in seconds (0 for non-audio)
    - fileSize       # Size in bytes
    - sampleRate     # Sample rate in Hz
    - bitRate        # Bit rate in kbps (for compressed formats)
    - channels       # Number of audio channels (1=mono, 2=stereo)
    - contentType    # Type of audio content

# Audio file entries organized by category
audio:
  # Edge cases
  edge_cases:
    - path: empty.txt
      format: txt
      duration: 0
      fileSize: 0
      sampleRate: 0
      bitRate: 0
      channels: 0
      contentType: non-audio
      tags: [edge-case, invalid-format, error-handling]
      testData:
        isValid: false
        expectedError: "Invalid audio format"
    
    - path: silent_5sec.wav
      format: wav
      duration: 5
      fileSize: 882588
      sampleRate: 44100
      bitRate: 1411  # Uncompressed PCM
      channels: 2
      contentType: silence
      tags: [edge-case, silence-detection, valid-audio]
      testData:
        isValid: true
        isSilent: true
        expectedTranscription: ""

  # Speech content
  speech:
    - path: speech_mlk_dream.mp3
      format: mp3
      duration: 60
      fileSize: 963020
      sampleRate: 44100
      bitRate: 128
      channels: 1
      contentType: speech
      tags: [speech, transcription, historical, long-form]
      testData:
        isValid: true
        language: "en"
        speaker: "Martin Luther King Jr."
        expectedTranscription: "I have a dream"
        transcriptionQuality: "high"
    
    - path: speech_test_short.mp3
      format: mp3
      duration: 5
      fileSize: 103424
      sampleRate: 44100
      bitRate: 160
      channels: 1
      contentType: speech
      tags: [speech, transcription, short-form, quick-test]
      testData:
        isValid: true
        language: "en"
        transcriptionQuality: "medium"
    
    - path: speech_sample.ogg
      format: ogg
      duration: 90
      fileSize: 1678336
      sampleRate: 44100
      bitRate: 149
      channels: 1
      contentType: speech
      tags: [speech, transcription, ogg-format, political]
      testData:
        isValid: true
        language: "en"
        speaker: "George W. Bush"
        transcriptionQuality: "high"

  # Music and non-speech audio
  music:
    - path: music_classical.mp3
      format: mp3
      duration: 360
      fileSize: 9019392
      sampleRate: 44100
      bitRate: 192
      channels: 2
      contentType: music
      tags: [music, non-speech, stereo, classical]
      testData:
        isValid: true
        genre: "electronic/synthesized"
        hasVocals: false
        expectedTranscription: null
    
    - path: music_kalimba.mp3
      format: mp3
      duration: 340
      fileSize: 8503296
      sampleRate: 44100
      bitRate: 192
      channels: 2
      contentType: music
      tags: [music, non-speech, instrumental, stereo]
      testData:
        isValid: true
        instrument: "kalimba"
        hasVocals: false
        expectedTranscription: null

  # Sound effects
  sound_effects:
    - path: sound_bell.wav
      format: wav
      duration: 3.7
      fileSize: 671788
      sampleRate: 44100
      bitRate: 1411  # Uncompressed PCM
      channels: 2
      contentType: sound-effect
      tags: [sound-effect, short-audio, wav-format]
      testData:
        isValid: true
        soundType: "bell"
        expectedTranscription: null
    
    - path: sound_sample.ogg
      format: ogg
      duration: 95
      fileSize: 1785856
      sampleRate: 44100
      bitRate: 150
      channels: 2
      contentType: sound-effect
      tags: [sound-effect, ogg-format, stereo]
      testData:
        isValid: true
        expectedTranscription: null

# Test suite mappings - which files to use for specific test types
testSuites:
  formatSupport:
    - empty.txt              # Edge case - should fail
    - silent_5sec.wav        # WAV format
    - speech_mlk_dream.mp3   # MP3 format
    - speech_sample.ogg      # OGG format
  
  transcriptionAccuracy:
    - speech_mlk_dream.mp3   # Clear speech, known content
    - speech_test_short.mp3  # Short speech clip
    - speech_sample.ogg      # Different format, clear speech
    - silent_5sec.wav        # Should return empty
  
  musicDetection:
    - music_classical.mp3    # Pure music
    - music_kalimba.mp3      # Instrumental
    - speech_mlk_dream.mp3   # Pure speech (for contrast)
  
  performanceTest:
    - speech_test_short.mp3  # Quick test (5 seconds)
    - speech_mlk_dream.mp3   # Medium test (1 minute)
    - music_classical.mp3    # Long test (6 minutes)
  
  edgeCases:
    - empty.txt              # Invalid format
    - silent_5sec.wav        # Valid but silent
    - sound_bell.wav         # Very short audio
  
  qualityLevels:
    - speech_mlk_dream.mp3   # 128kbps mono
    - speech_test_short.mp3  # 160kbps mono
    - music_classical.mp3    # 192kbps stereo

# Transcription expectations for validation
transcriptionExpectations:
  speech_mlk_dream.mp3:
    contains:
      - "I have a dream"
      - "freedom"
      - "justice"
    minWordCount: 50
    confidence: "high"
  
  speech_sample.ogg:
    contains:
      - "America"
      - "freedom"
    minWordCount: 100
    confidence: "high"
  
  speech_test_short.mp3:
    minWordCount: 10
    confidence: "medium"
  
  silent_5sec.wav:
    exactMatch: ""
    confidence: "high"