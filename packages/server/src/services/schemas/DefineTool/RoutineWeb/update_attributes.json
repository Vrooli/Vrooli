{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MCP Routine Web Update Attributes",
  "description": "Defines the properties for updating a Web routine through the MCP.",
  "type": "object",
  "properties": {
    "config": {
      "description": "Updated configuration object for the routine.",
      "type": "object",
      "properties": {
        "__version": {
          "type": "string",
          "const": "1.0"
        },
        "formInput": {
          "type": "object",
          "properties": {
            "__version": {
              "type": "string",
              "const": "1.0"
            },
            "schema": {
              "type": "object",
              "properties": {
                "elements": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/FormElement"
                  }
                }
              },
              "required": [
                "elements"
              ]
            }
          },
          "required": [
            "__version",
            "schema"
          ]
        },
        "formOutput": {
          "type": "object",
          "properties": {
            "__version": {
              "type": "string",
              "const": "1.0"
            },
            "schema": {
              "type": "object",
              "properties": {
                "elements": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/FormElement"
                  }
                }
              },
              "required": [
                "elements"
              ]
            }
          },
          "required": [
            "__version",
            "schema"
          ]
        },
        "callDataWeb": {
          "description": "Web search specific config",
          "type": "object",
          "properties": {
            "__version": {
              "type": "string"
            },
            "schema": {
              "$ref": "#/definitions/ConfigCallDataWeb"
            }
          },
          "required": [
            "__version",
            "schema"
          ]
        }
      },
      "required": [
        "__version",
        "callDataWeb",
        "formInput",
        "formOutput"
      ]
    },
    "rootUpdate": {
      "description": "Root resource information",
      "type": "object",
      "properties": {
        "isPrivate": {
          "default": false,
          "type": "boolean"
        },
        "tagsConnect": {
          "description": "Tags to associate with the resource.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "tagsDisconnect": {
          "description": "Tag IDs to remove from the resource.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "resourceType": {
          "type": "string",
          "const": "Routine"
        }
      },
      "required": [
        "isPrivate",
        "resourceType"
      ]
    },
    "isPrivate": {
      "default": false,
      "type": "boolean"
    },
    "isComplete": {
      "default": false,
      "type": "boolean"
    },
    "versionLabel": {
      "type": "string"
    }
  },
  "required": [
    "isPrivate",
    "rootUpdate",
    "versionLabel"
  ],
  "definitions": {
    "FormElement": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "enum": [
                "CheckboxInput",
                "CodeInput",
                "DropzoneInput",
                "IntegerInput",
                "LinkUrlInput",
                "RadioInput",
                "SelectorInput",
                "SliderInput",
                "SwitchInput",
                "TextInput"
              ],
              "type": "string"
            },
            "id": {
              "description": "ID for field",
              "type": "string"
            },
            "fieldName": {
              "description": "The name of the field, as will be used by formik",
              "type": "string"
            },
            "label": {
              "description": "The label to display for the field",
              "type": "string"
            },
            "helpText": {
              "description": "Longer help text. Markdown OK",
              "type": "string"
            },
            "isRequired": {
              "description": "If the field is required. Defaults to false.",
              "type": "boolean"
            },
            "props": {
              "description": "Type-specific props",
              "anyOf": [
                {
                  "$ref": "#/definitions/CheckboxInputProps"
                },
                {
                  "$ref": "#/definitions/CodeInputProps"
                },
                {
                  "$ref": "#/definitions/DropzoneInputProps"
                },
                {
                  "$ref": "#/definitions/IntegerInputProps"
                },
                {
                  "$ref": "#/definitions/LinkUrlInputProps"
                },
                {
                  "$ref": "#/definitions/RadioInputProps"
                },
                {
                  "$ref": "#/definitions/SelectorInputProps"
                },
                {
                  "$ref": "#/definitions/SliderInputProps"
                },
                {
                  "$ref": "#/definitions/SwitchInputProps"
                },
                {
                  "$ref": "#/definitions/TextInputProps"
                }
              ]
            }
          },
          "required": [
            "fieldName",
            "id",
            "label",
            "props",
            "type"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "enum": [
                "Divider",
                "Header",
                "Image",
                "QrCode",
                "Tip",
                "Video"
              ],
              "type": "string"
            },
            "id": {
              "description": "ID for field",
              "type": "string"
            },
            "label": {
              "description": "The label to display for the field",
              "type": "string"
            },
            "helpText": {
              "description": "Longer help text. Markdown OK",
              "type": "string"
            },
            "tag": {
              "description": "Header tag if type is Header",
              "enum": [
                "h1",
                "h2",
                "h3",
                "h4",
                "h5",
                "h6"
              ],
              "type": "string"
            },
            "icon": {
              "description": "Icon type if type is Tip",
              "enum": [
                "Error",
                "Info",
                "Warning"
              ],
              "type": "string"
            },
            "link": {
              "description": "URL if type is Tip",
              "type": "string"
            },
            "url": {
              "description": "URL of type is Image, QrCode, or Video",
              "type": "string"
            }
          },
          "required": [
            "id",
            "label",
            "type"
          ]
        }
      ]
    },
    "CheckboxInputProps": {
      "type": "object",
      "properties": {
        "options": {
          "description": "Array of checkbox options",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "label": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            },
            "required": [
              "label",
              "value"
            ]
          }
        },
        "allowCustomValues": {
          "description": "Allow users to input custom values",
          "type": "boolean"
        },
        "defaultValue": {
          "description": "Array of booleans. One for each option in props",
          "type": "array",
          "items": {
            "type": "boolean"
          }
        },
        "maxCustomValues": {
          "description": "Maximum number of custom values allowed",
          "type": "number"
        },
        "maxSelection": {
          "description": "The maximum number of checkboxes that can be selected. \nIf 0 or not set, there is no limit.",
          "type": "number"
        },
        "minSelection": {
          "description": "The minimum number of checkboxes that must be selected.\nIf 0 or not set, there is no minimum.",
          "type": "number"
        }
      },
      "required": [
        "options"
      ]
    },
    "CodeInputProps": {
      "type": "object",
      "properties": {
        "defaultValue": {
          "type": "string"
        },
        "limitTo": {
          "description": "Limit the languages that can be selected in the language dropdown.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/CodeLanguage"
          }
        }
      }
    },
    "CodeLanguage": {
      "type": "string",
      "enum": [
        "angular",
        "cpp",
        "css",
        "dockerfile",
        "go",
        "graphql",
        "groovy",
        "haskell",
        "html",
        "java",
        "javascript",
        "json",
        "jsonStandard",
        "nginx",
        "nix",
        "php",
        "powershell",
        "protobuf",
        "puppet",
        "python",
        "r",
        "ruby",
        "rust",
        "sass",
        "shell",
        "solidity",
        "spreadsheet",
        "sql",
        "svelte",
        "swift",
        "typescript",
        "vb",
        "vbscript",
        "verilog",
        "vhdl",
        "vue",
        "xml",
        "yacas",
        "yaml"
      ]
    },
    "DropzoneInputProps": {
      "type": "object",
      "properties": {
        "acceptedFileTypes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "maxFiles": {
          "type": "number"
        }
      }
    },
    "IntegerInputProps": {
      "type": "object",
      "properties": {
        "max": {
          "type": "number"
        },
        "min": {
          "type": "number"
        },
        "defaultValue": {
          "type": "number"
        },
        "allowDecimal": {
          "type": "boolean"
        },
        "initial": {
          "type": "number"
        },
        "offset": {
          "type": "number"
        },
        "step": {
          "type": "number"
        }
      }
    },
    "LinkUrlInputProps": {
      "type": "object",
      "properties": {
        "defaultValue": {
          "type": "string"
        },
        "acceptedHosts": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "RadioInputProps": {
      "type": "object",
      "properties": {
        "options": {
          "description": "Radio button options.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "label": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            },
            "required": [
              "label",
              "value"
            ]
          }
        },
        "defaultValue": {
          "description": "The initial value of the radio button. Must be one of the values in the `options` prop.",
          "type": [
            "null",
            "string"
          ]
        }
      },
      "required": [
        "options"
      ]
    },
    "SelectorInputProps": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string"
        },
        "isRequired": {
          "type": "boolean"
        },
        "options": {
          "type": "array",
          "items": {}
        },
        "defaultValue": {},
        "addOption": {
          "type": "object",
          "properties": {
            "label": {
              "type": "string"
            },
            "onSelect": {
              "type": "object"
            }
          },
          "required": [
            "label",
            "onSelect"
          ]
        },
        "multiple": {
          "type": "boolean"
        },
        "noneOption": {
          "type": "boolean"
        }
      },
      "required": [
        "options"
      ]
    },
    "SliderInputProps": {
      "type": "object",
      "properties": {
        "max": {
          "type": "number"
        },
        "min": {
          "type": "number"
        },
        "defaultValue": {
          "type": "number"
        },
        "step": {
          "type": "number"
        }
      }
    },
    "SwitchInputProps": {
      "type": "object",
      "properties": {
        "defaultValue": {
          "type": "boolean"
        }
      }
    },
    "TextInputProps": {
      "type": "object",
      "properties": {
        "defaultValue": {
          "description": "Initial value of the text field.",
          "type": "string"
        },
        "placeholder": {
          "type": "string"
        },
        "autoComplete": {
          "description": "Autocomplete attribute for auto-filling the text field (e.g. 'username', 'current-password')",
          "type": "string"
        },
        "isMarkdown": {
          "description": "If true, displays RichInput instead of TextInput",
          "type": "boolean"
        },
        "maxChars": {
          "description": "Maximum number of characters for the text field. Defaults to 1000",
          "type": "number"
        }
      }
    },
    "ConfigCallDataWeb": {
      "description": "Represents how to perform a web search.",
      "type": "object",
      "properties": {
        "queryTemplate": {
          "description": "Template for the search query. Allows dynamic query generation using routine inputs.\ne.g., \"latest news about {{input.topic}}\"",
          "type": "string"
        },
        "searchEngine": {
          "description": "Optional: specify the search engine (e.g., \"google\", \"bing\", \"duckduckgo\"). Defaults to a generic provider if not specified.",
          "type": "string"
        },
        "maxResults": {
          "description": "Optional: maximum number of search results to return.",
          "type": "number"
        },
        "timeRange": {
          "description": "Optional: filter results by a time range. \nExamples: \"past_hour\", \"past_day\", \"past_week\", \"past_month\", \"past_year\".\nSpecific supported values may depend on the search provider.",
          "type": "string"
        },
        "region": {
          "description": "Optional: specify the search region or country code (e.g., \"US\", \"GB\").",
          "type": "string"
        },
        "outputMapping": {
          "$ref": "#/definitions/Record<string,string>",
          "description": "Mapping from routine output names to search result fields.\nSearch results are expected to be an array of objects.\nExample: { \"titles\": \"results[*].title\", \"links\": \"results[*].url\", \"firstSnippet\": \"results[0].snippet\" }\n\nAvailable fields from a typical search result item:\n- `title`: The title of the search result.\n- `link`: The URL of the search result.\n- `snippet`: A short description or snippet from the page.\n- `source`: The source website or domain.\n- `publishedDate`: The publication date, if available.\nThe structure is generally `results: Array<{ title: string; link: string; snippet?: string; ... }>`\nUse dot notation and array indexing to access specific parts. `[*]` denotes all items in an array."
        }
      },
      "required": [
        "outputMapping",
        "queryTemplate"
      ]
    },
    "Record<string,string>": {
      "type": "object"
    }
  }
}