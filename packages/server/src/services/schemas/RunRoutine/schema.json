{
  "name": "run_routine",
  "description": "Start or manage a routine run.",
  "inputSchema": {
    "anyOf": [
      {
        "type": "object",
        "properties": {
          "mode": {
            "description": "sync (blocking) | async (background); default = sync",
            "enum": [
              "async",
              "sync"
            ],
            "type": "string"
          },
          "schedule": {
            "description": "Only when mode===\"async\": ISO-8601 instant OR cron pattern",
            "type": "object",
            "properties": {
              "at": {
                "type": "string"
              },
              "cron": {
                "type": "string"
              },
              "timezone": {
                "type": "string"
              }
            }
          },
          "priority": {
            "description": "Normal vs high-priority routing or QoS level (default: normal). \n\nNOTE: High-priority runs may jump the queue, but will cost slightly more.",
            "enum": [
              "high",
              "low",
              "normal"
            ],
            "type": "string"
          },
          "actorId": {
            "type": "string"
          },
          "action": {
            "type": "string",
            "const": "start"
          },
          "routineId": {
            "description": "Routine to execute",
            "type": "string"
          },
          "inputs": {
            "description": "Inputs to pass to the routine",
            "type": "object"
          }
        },
        "required": [
          "action",
          "actorId",
          "routineId"
        ]
      },
      {
        "type": "object",
        "properties": {
          "mode": {
            "description": "sync (blocking) | async (background); default = sync",
            "enum": [
              "async",
              "sync"
            ],
            "type": "string"
          },
          "schedule": {
            "description": "Only when mode===\"async\": ISO-8601 instant OR cron pattern",
            "type": "object",
            "properties": {
              "at": {
                "type": "string"
              },
              "cron": {
                "type": "string"
              },
              "timezone": {
                "type": "string"
              }
            }
          },
          "priority": {
            "description": "Normal vs high-priority routing or QoS level (default: normal). \n\nNOTE: High-priority runs may jump the queue, but will cost slightly more.",
            "enum": [
              "high",
              "low",
              "normal"
            ],
            "type": "string"
          },
          "actorMap": {
            "type": "object"
          },
          "action": {
            "type": "string",
            "const": "start"
          },
          "routineId": {
            "description": "Routine to execute",
            "type": "string"
          },
          "inputs": {
            "description": "Inputs to pass to the routine",
            "type": "object"
          }
        },
        "required": [
          "action",
          "actorMap",
          "routineId"
        ]
      },
      {
        "description": "Manage an existing run",
        "type": "object",
        "properties": {
          "mode": {
            "description": "sync (blocking) | async (background); default = sync",
            "enum": [
              "async",
              "sync"
            ],
            "type": "string"
          },
          "schedule": {
            "description": "Only when mode===\"async\": ISO-8601 instant OR cron pattern",
            "type": "object",
            "properties": {
              "at": {
                "type": "string"
              },
              "cron": {
                "type": "string"
              },
              "timezone": {
                "type": "string"
              }
            }
          },
          "priority": {
            "description": "Normal vs high-priority routing or QoS level (default: normal). \n\nNOTE: High-priority runs may jump the queue, but will cost slightly more.",
            "enum": [
              "high",
              "low",
              "normal"
            ],
            "type": "string"
          },
          "action": {
            "enum": [
              "cancel",
              "pause",
              "resume",
              "status"
            ],
            "type": "string"
          },
          "runId": {
            "description": "Existing run identifier - NOT the routine ID",
            "type": "string"
          }
        },
        "required": [
          "action",
          "runId"
        ]
      }
    ],
    "additionalProperties": false
  },
  "annotations": {
    "title": "Run Routine",
    "readOnlyHint": false,
    "openWorldHint": true
  }
}