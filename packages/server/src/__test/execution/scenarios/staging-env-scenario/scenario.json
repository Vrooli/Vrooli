{
  "swarmConfig": {
    "name": "staging-env-scenario",
    "description": "Staging environment development where agents coordinate feature development, testing, and deployment validation before production release",
    "maxCredits": 1600000000,
    "maxDuration": 840000,
    "resourceQuota": {
      "maxCPU": 6,
      "maxRAM": 18,
      "maxGPU": 35
    },
    "bots": [
      {
        "id": "environment-manager",
        "name": "Environment Manager",
        "agentSpec": {
          "goal": "Manage staging environment infrastructure, deployments, and synchronization with production",
          "subscriptions": [
            "swarm/started",
            "staging/environment_setup_requested",
            "staging/deployment_requested",
            "staging/environment_sync_needed",
            "staging/rollback_required"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "swarm/started"
              },
              "action": {
                "type": "routine",
                "label": "environment-setup-routine",
                "inputMap": {
                  "environmentConfig": "blackboard.staging_environment_config",
                  "deploymentPipeline": "blackboard.deployment_pipeline"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/environment_setup_requested"
              },
              "action": {
                "type": "routine",
                "label": "infrastructure-provisioning-routine",
                "inputMap": {
                  "infraConfig": "event.data.infrastructure_config",
                  "scalingRequirements": "event.data.scaling_requirements"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/deployment_requested"
              },
              "action": {
                "type": "routine",
                "label": "staging-deployment-routine",
                "inputMap": {
                  "deploymentArtifacts": "event.data.artifacts",
                  "deploymentStrategy": "event.data.strategy"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/environment_sync_needed"
              },
              "action": {
                "type": "routine",
                "label": "environment-sync-routine",
                "inputMap": {
                  "syncScope": "event.data.scope",
                  "productionState": "blackboard.production_state"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/rollback_required"
              },
              "action": {
                "type": "routine",
                "label": "rollback-routine",
                "inputMap": {
                  "rollbackTarget": "event.data.target_version",
                  "rollbackReason": "event.data.reason"
                }
              }
            }
          ],
          "outputOperations": {
            "set": [
              {
                "routineOutput": "result.environment_status",
                "blackboardId": "environment_status"
              },
              {
                "routineOutput": "result.deployment_status",
                "blackboardId": "deployment_status"
              },
              {
                "routineOutput": "result.sync_status",
                "blackboardId": "sync_status"
              }
            ],
            "append": [
              {
                "routineOutput": "result.deployment_history",
                "blackboardId": "deployment_history"
              },
              {
                "routineOutput": "result.environment_events",
                "blackboardId": "environment_events"
              }
            ]
          }
        }
      },
      {
        "id": "feature-developer",
        "name": "Feature Developer",
        "agentSpec": {
          "goal": "Develop and deploy features in staging environment with proper testing and validation",
          "subscriptions": [
            "staging/development_requested",
            "staging/feature_assigned",
            "staging/integration_testing_needed",
            "staging/deployment_approved"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "staging/development_requested"
              },
              "action": {
                "type": "routine",
                "label": "feature-development-routine",
                "inputMap": {
                  "featureRequirements": "event.data.requirements",
                  "developmentEnvironment": "blackboard.staging_environment_config"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/feature_assigned"
              },
              "action": {
                "type": "routine",
                "label": "feature-implementation-routine",
                "inputMap": {
                  "featureSpec": "event.data.feature_spec",
                  "stagingConfig": "blackboard.staging_configuration"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/integration_testing_needed"
              },
              "action": {
                "type": "routine",
                "label": "integration-testing-routine",
                "inputMap": {
                  "testingScope": "event.data.scope",
                  "testingEnvironment": "blackboard.staging_environment_config"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/deployment_approved"
              },
              "action": {
                "type": "emit",
                "eventType": "staging/deployment_requested",
                "dataMapping": {
                  "artifacts": "blackboard.feature_artifacts",
                  "strategy": "'blue_green_deployment'"
                }
              }
            }
          ],
          "outputOperations": {
            "set": [
              {
                "routineOutput": "result.feature_development_complete",
                "blackboardId": "feature_development_complete"
              },
              {
                "routineOutput": "result.integration_test_results",
                "blackboardId": "integration_test_results"
              }
            ],
            "append": [
              {
                "routineOutput": "result.feature_artifacts",
                "blackboardId": "feature_artifacts"
              },
              {
                "routineOutput": "result.development_changes",
                "blackboardId": "development_changes"
              }
            ]
          }
        }
      },
      {
        "id": "qa-tester",
        "name": "QA Tester",
        "agentSpec": {
          "goal": "Perform comprehensive testing in staging environment including functional, performance, and regression testing",
          "subscriptions": [
            "staging/testing_requested",
            "staging/smoke_testing_needed",
            "staging/regression_testing_needed",
            "staging/performance_testing_needed"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "staging/testing_requested"
              },
              "action": {
                "type": "routine",
                "label": "comprehensive-testing-routine",
                "inputMap": {
                  "testingScope": "event.data.scope",
                  "testSuite": "blackboard.staging_test_suite"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/smoke_testing_needed"
              },
              "action": {
                "type": "routine",
                "label": "smoke-testing-routine",
                "inputMap": {
                  "smokeTestSuite": "blackboard.smoke_test_suite",
                  "criticalPaths": "blackboard.critical_user_paths"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/regression_testing_needed"
              },
              "action": {
                "type": "routine",
                "label": "regression-testing-routine",
                "inputMap": {
                  "regressionSuite": "blackboard.regression_test_suite",
                  "baselineResults": "blackboard.baseline_test_results"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/performance_testing_needed"
              },
              "action": {
                "type": "routine",
                "label": "performance-testing-routine",
                "inputMap": {
                  "performanceTargets": "blackboard.performance_targets",
                  "loadTestingConfig": "blackboard.load_testing_config"
                }
              }
            }
          ],
          "outputOperations": {
            "set": [
              {
                "routineOutput": "result.testing_complete",
                "blackboardId": "testing_complete"
              },
              {
                "routineOutput": "result.performance_results",
                "blackboardId": "performance_results"
              }
            ],
            "append": [
              {
                "routineOutput": "result.test_results",
                "blackboardId": "test_results"
              },
              {
                "routineOutput": "result.test_failures",
                "blackboardId": "test_failures"
              }
            ]
          }
        }
      },
      {
        "id": "deployment-validator",
        "name": "Deployment Validator",
        "agentSpec": {
          "goal": "Validate deployments in staging environment and approve for production promotion",
          "subscriptions": [
            "staging/deployment_requested",
            "staging/validation_requested",
            "staging/production_readiness_check",
            "staging/deployment_gate_evaluation"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "staging/deployment_requested"
              },
              "action": {
                "type": "emit",
                "eventType": "staging/validation_requested",
                "dataMapping": {
                  "deployment": "event.data.artifacts",
                  "validation_type": "'pre_deployment'"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/validation_requested"
              },
              "action": {
                "type": "routine",
                "label": "deployment-validation-routine",
                "inputMap": {
                  "deployment": "event.data.deployment",
                  "validationType": "event.data.validation_type"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/production_readiness_check"
              },
              "action": {
                "type": "routine",
                "label": "production-readiness-routine",
                "inputMap": {
                  "stagingResults": "blackboard.staging_results",
                  "productionCriteria": "blackboard.production_criteria"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/deployment_gate_evaluation"
              },
              "action": {
                "type": "routine",
                "label": "deployment-gate-routine",
                "inputMap": {
                  "gateType": "event.data.gate_type",
                  "evaluationCriteria": "blackboard.deployment_gates"
                }
              }
            }
          ],
          "outputOperations": {
            "set": [
              {
                "routineOutput": "result.validation_status",
                "blackboardId": "validation_status"
              },
              {
                "routineOutput": "result.production_ready",
                "blackboardId": "production_ready"
              },
              {
                "routineOutput": "result.deployment_approved",
                "blackboardId": "deployment_approved"
              }
            ],
            "append": [
              {
                "routineOutput": "result.validation_results",
                "blackboardId": "validation_results"
              },
              {
                "routineOutput": "result.gate_evaluations",
                "blackboardId": "gate_evaluations"
              }
            ]
          }
        }
      },
      {
        "id": "monitoring-specialist",
        "name": "Monitoring Specialist",
        "agentSpec": {
          "goal": "Monitor staging environment health, performance, and detect issues during testing and deployment",
          "subscriptions": [
            "staging/monitoring_requested",
            "staging/health_check_needed",
            "staging/performance_monitoring",
            "staging/alert_triggered"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "staging/monitoring_requested"
              },
              "action": {
                "type": "routine",
                "label": "monitoring-setup-routine",
                "inputMap": {
                  "monitoringConfig": "blackboard.monitoring_configuration",
                  "alertingRules": "blackboard.alerting_rules"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/health_check_needed"
              },
              "action": {
                "type": "routine",
                "label": "health-check-routine",
                "inputMap": {
                  "healthCheckConfig": "blackboard.health_check_config",
                  "serviceDependencies": "blackboard.service_dependencies"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/performance_monitoring"
              },
              "action": {
                "type": "routine",
                "label": "performance-monitoring-routine",
                "inputMap": {
                  "performanceMetrics": "blackboard.performance_metrics",
                  "thresholds": "blackboard.performance_thresholds"
                }
              }
            },
            {
              "trigger": {
                "topic": "staging/alert_triggered"
              },
              "action": {
                "type": "routine",
                "label": "alert-response-routine",
                "inputMap": {
                  "alertDetails": "event.data.alert",
                  "responsePlaybook": "blackboard.response_playbook"
                }
              }
            }
          ],
          "outputOperations": {
            "set": [
              {
                "routineOutput": "result.monitoring_status",
                "blackboardId": "monitoring_status"
              },
              {
                "routineOutput": "result.health_status",
                "blackboardId": "health_status"
              }
            ],
            "append": [
              {
                "routineOutput": "result.monitoring_data",
                "blackboardId": "monitoring_data"
              },
              {
                "routineOutput": "result.performance_metrics",
                "blackboardId": "performance_metrics"
              }
            ]
          }
        }
      }
    ]
  },
  "initialBlackboard": {
    "staging_environment_config": {
      "infrastructure": "kubernetes_cluster",
      "scaling": "auto_scaling_enabled",
      "database": "postgresql_staging",
      "cache": "redis_staging",
      "monitoring": "prometheus_grafana",
      "logging": "elk_stack"
    },
    "deployment_pipeline": {
      "source_control": "git",
      "ci_cd": "github_actions",
      "deployment_strategy": "blue_green",
      "rollback_strategy": "automated",
      "approval_gates": ["security_scan", "performance_test", "integration_test"]
    },
    "staging_test_suite": [
      "unit_tests",
      "integration_tests",
      "api_tests",
      "ui_tests",
      "performance_tests",
      "security_tests"
    ],
    "critical_user_paths": [
      "user_registration",
      "user_authentication",
      "data_submission",
      "report_generation",
      "payment_processing"
    ],
    "performance_targets": {
      "response_time": "< 200ms",
      "throughput": "> 1000 rps",
      "error_rate": "< 0.1%",
      "uptime": "> 99.9%"
    },
    "deployment_gates": [
      "security_scan_passed",
      "performance_targets_met",
      "integration_tests_passed",
      "regression_tests_passed",
      "smoke_tests_passed"
    ],
    "production_criteria": {
      "stability": "24_hours_stable",
      "performance": "meets_production_targets",
      "security": "no_critical_vulnerabilities",
      "functionality": "all_features_working"
    }
  },
  "mockRoutineResponses": {
    "environment-setup-routine": {
      "result": {
        "environment_status": "staging_environment_ready",
        "infrastructure_provisioned": {
          "kubernetes_cluster": "3_nodes_ready",
          "postgresql_database": "initialized",
          "redis_cache": "configured",
          "monitoring_stack": "deployed",
          "logging_system": "operational"
        },
        "deployment_pipeline_ready": true
      }
    },
    "feature-development-routine": {
      "result": {
        "feature_development_complete": true,
        "feature_artifacts": [
          {
            "feature": "user_profile_enhancement",
            "components": ["profile_service", "profile_ui", "profile_api"],
            "tests": ["unit_tests", "integration_tests"],
            "documentation": "updated"
          },
          {
            "feature": "notification_system",
            "components": ["notification_service", "email_templates", "push_notifications"],
            "tests": ["unit_tests", "integration_tests", "performance_tests"],
            "documentation": "complete"
          }
        ],
        "development_changes": [
          {
            "type": "feature_addition",
            "impact": "low_risk",
            "testing_required": ["integration", "regression"]
          },
          {
            "type": "api_enhancement",
            "impact": "medium_risk",
            "testing_required": ["api_tests", "performance_tests"]
          }
        ]
      }
    },
    "comprehensive-testing-routine": {
      "result": {
        "testing_complete": true,
        "test_results": [
          {
            "test_suite": "integration_tests",
            "total_tests": 156,
            "passed": 154,
            "failed": 2,
            "skipped": 0,
            "success_rate": 98.7
          },
          {
            "test_suite": "api_tests",
            "total_tests": 89,
            "passed": 89,
            "failed": 0,
            "skipped": 0,
            "success_rate": 100
          },
          {
            "test_suite": "ui_tests",
            "total_tests": 67,
            "passed": 65,
            "failed": 2,
            "skipped": 0,
            "success_rate": 97.0
          }
        ],
        "test_failures": [
          {
            "test_suite": "integration_tests",
            "test_name": "notification_email_delivery",
            "failure_reason": "smtp_connection_timeout",
            "severity": "medium"
          },
          {
            "test_suite": "ui_tests",
            "test_name": "profile_image_upload",
            "failure_reason": "file_size_validation_issue",
            "severity": "low"
          }
        ]
      }
    },
    "performance-testing-routine": {
      "result": {
        "performance_results": {
          "response_time": {
            "average": "145ms",
            "p95": "280ms",
            "p99": "450ms",
            "target": "< 200ms",
            "status": "meets_target"
          },
          "throughput": {
            "current": "1250 rps",
            "target": "> 1000 rps",
            "status": "exceeds_target"
          },
          "error_rate": {
            "current": "0.05%",
            "target": "< 0.1%",
            "status": "meets_target"
          },
          "resource_utilization": {
            "cpu": "65%",
            "memory": "72%",
            "disk": "45%",
            "network": "32%"
          }
        }
      }
    },
    "deployment-validation-routine": {
      "result": {
        "validation_status": "deployment_validated",
        "validation_results": [
          {
            "validation_type": "security_scan",
            "status": "passed",
            "critical_issues": 0,
            "high_issues": 0,
            "medium_issues": 2,
            "low_issues": 5
          },
          {
            "validation_type": "performance_test",
            "status": "passed",
            "response_time": "within_targets",
            "throughput": "exceeds_targets",
            "error_rate": "below_threshold"
          },
          {
            "validation_type": "integration_test",
            "status": "passed",
            "test_coverage": "98.7%",
            "critical_path_tests": "all_passed"
          }
        ],
        "deployment_approved": true
      }
    },
    "production-readiness-routine": {
      "result": {
        "production_ready": true,
        "readiness_checklist": {
          "stability": {
            "status": "passed",
            "uptime": "99.95%",
            "stable_duration": "48_hours"
          },
          "performance": {
            "status": "passed",
            "response_time": "meets_targets",
            "throughput": "exceeds_targets",
            "error_rate": "below_threshold"
          },
          "security": {
            "status": "passed",
            "vulnerability_scan": "clean",
            "penetration_test": "passed",
            "compliance_check": "compliant"
          },
          "functionality": {
            "status": "passed",
            "feature_tests": "all_passed",
            "regression_tests": "all_passed",
            "user_acceptance": "approved"
          }
        }
      }
    },
    "staging-deployment-routine": {
      "result": {
        "deployment_status": "deployment_successful",
        "deployment_details": {
          "strategy": "blue_green_deployment",
          "duration": "12_minutes",
          "rollback_capability": "ready",
          "health_checks": "all_passed",
          "smoke_tests": "all_passed"
        },
        "deployment_history": [
          {
            "deployment_id": "deploy_001",
            "timestamp": "2024-01-15T14:30:00Z",
            "version": "v2.1.0",
            "status": "successful",
            "duration": "12_minutes"
          }
        ]
      }
    },
    "health-check-routine": {
      "result": {
        "health_status": "healthy",
        "service_health": {
          "api_service": "healthy",
          "database": "healthy",
          "cache": "healthy",
          "message_queue": "healthy",
          "monitoring": "healthy"
        },
        "dependency_health": {
          "external_api": "healthy",
          "third_party_services": "healthy",
          "cdn": "healthy"
        }
      }
    }
  },
  "eventSequence": [
    {
      "event": "swarm/started",
      "expectedResponses": [
        "environment-setup-routine execution"
      ]
    },
    {
      "event": "staging/development_requested",
      "expectedResponses": [
        "feature-development-routine execution"
      ]
    },
    {
      "event": "staging/testing_requested",
      "expectedResponses": [
        "comprehensive-testing-routine execution"
      ]
    },
    {
      "event": "staging/deployment_requested",
      "expectedResponses": [
        "staging/validation_requested",
        "staging-deployment-routine execution"
      ]
    },
    {
      "event": "staging/validation_requested",
      "expectedResponses": [
        "deployment-validation-routine execution"
      ]
    },
    {
      "event": "staging/production_readiness_check",
      "expectedResponses": [
        "production-readiness-routine execution"
      ]
    }
  ]
}