{
  "identity": {
    "name": "mobile-app-dev-scenario",
    "description": "Director coordinating parallel native mobile app development across iOS and Android platforms",
    "category": "multi-agent",
    "complexity": "advanced"
  },

  "agents": [
    {
      "name": "mobile-director",
      "role": "coordinator",
      "botConfig": {
        "__version": "1.0",
        "model": "claude-3-5-sonnet-20241022",
        "maxTokens": 2000,
        "agentSpec": {
          "goal": "Orchestrate parallel mobile app development across iOS, Android, and shared backend",
          "subscriptions": [
            "swarm/started",
            "platform/development_complete",
            "platform/feature_ready",
            "platform/synchronization_needed",
            "app/deployment_ready"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "swarm/started"
              },
              "action": {
                "type": "routine",
                "label": "project-analysis-routine",
                "inputMap": {
                  "requirements": "blackboard.app_requirements",
                  "platforms": "blackboard.target_platforms"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "development_plan", "blackboardId": "project_plan"},
                    {"routineOutput": "platform_allocation", "blackboardId": "resource_allocation"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "swarm/started"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/development_requested",
                "dataMapping": {
                  "platforms": "['ios', 'android', 'backend', 'design']",
                  "requirements": "blackboard.app_requirements",
                  "coordination_mode": "'parallel'"
                },
                "outputOperations": {
                  "set": [
                    {"emitOutput": "eventId", "blackboardId": "platform_kickoff_id"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/feature_ready",
                "when": "blackboard.completed_features.ios.length > 0 && blackboard.completed_features.android.length > 0"
              },
              "action": {
                "type": "routine",
                "label": "feature-synchronization-routine",
                "inputMap": {
                  "iosFeatures": "blackboard.completed_features.ios",
                  "androidFeatures": "blackboard.completed_features.android",
                  "backendAPIs": "blackboard.completed_features.backend"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "sync_result", "blackboardId": "synchronization_status"},
                    {"routineOutput": "feature_parity", "blackboardId": "cross_platform_parity"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/synchronization_needed"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/alignment_requested",
                "dataMapping": {
                  "misalignedFeatures": "event.data.misaligned_features",
                  "targetPlatform": "event.data.behind_platform",
                  "referenceFeatures": "event.data.reference_features"
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/development_complete",
                "when": "blackboard.completed_platforms.length >= 3"
              },
              "action": {
                "type": "routine",
                "label": "deployment-readiness-routine",
                "inputMap": {
                  "platformStatus": "blackboard.completed_platforms",
                  "featureParity": "blackboard.cross_platform_parity"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "deployment_status", "blackboardId": "ready_for_deployment"},
                    {"routineOutput": "app_packages", "blackboardId": "final_deliverables"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/development_complete",
                "when": "blackboard.ready_for_deployment.ready == true"
              },
              "action": {
                "type": "emit",
                "eventType": "app/deployment_ready",
                "dataMapping": {
                  "platforms": "blackboard.completed_platforms",
                  "packages": "blackboard.final_deliverables",
                  "feature_count": "blackboard.cross_platform_parity.total_features"
                },
                "outputOperations": {
                  "set": [
                    {"constantValue": true, "blackboardId": "development_complete"}
                  ]
                }
              },
              "qos": 1
            }
          ],
          "prompt": {
            "mode": "supplement",
            "source": "direct",
            "content": "You coordinate parallel mobile app development across iOS, Android, and backend teams. Ensure feature parity, synchronize development, and manage resource allocation while maintaining native performance on each platform."
          }
        }
      }
    },
    {
      "name": "ios-team-lead",
      "role": "specialist",
      "botConfig": {
        "__version": "1.0",
        "model": "gpt-4",
        "maxTokens": 4000,
        "agentSpec": {
          "goal": "Develop native iOS application using Swift/SwiftUI with platform-specific optimizations",
          "subscriptions": [
            "platform/development_requested",
            "platform/alignment_requested"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('ios')"
              },
              "action": {
                "type": "routine",
                "label": "ios-development-routine",
                "inputMap": {
                  "requirements": "event.data.requirements",
                  "designSystem": "blackboard.design_system",
                  "backendSpecs": "blackboard.backend_apis"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "ios_app", "blackboardId": "ios_development_result"}
                  ],
                  "append": [
                    {"routineOutput": "completed_features", "blackboardId": "completed_features.ios"},
                    {"routineOutput": "development_log", "blackboardId": "ios_development_history"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('ios')"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/feature_ready",
                "dataMapping": {
                  "platform": "'ios'",
                  "features": "blackboard.completed_features.ios",
                  "native_optimizations": "blackboard.ios_development_result.optimizations"
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/alignment_requested",
                "when": "event.data.targetPlatform == 'ios'"
              },
              "action": {
                "type": "routine",
                "label": "ios-alignment-routine",
                "inputMap": {
                  "misalignedFeatures": "event.data.misalignedFeatures",
                  "referenceFeatures": "event.data.referenceFeatures"
                },
                "outputOperations": {
                  "append": [
                    {"routineOutput": "aligned_features", "blackboardId": "completed_features.ios"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/alignment_requested",
                "when": "event.data.targetPlatform == 'ios'"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/development_complete",
                "dataMapping": {
                  "platform": "'ios'",
                  "status": "'aligned'"
                },
                "outputOperations": {
                  "append": [
                    {"constantValue": "ios", "blackboardId": "completed_platforms"}
                  ]
                }
              },
              "qos": 1
            }
          ],
          "prompt": {
            "mode": "supplement",
            "source": "direct",
            "content": "You lead iOS development using Swift/SwiftUI. Focus on native performance, iOS-specific features (Core Data, push notifications, App Store guidelines), and maintaining consistency with the design system."
          }
        }
      }
    },
    {
      "name": "android-team-lead",
      "role": "specialist",
      "botConfig": {
        "__version": "1.0",
        "model": "gpt-4",
        "maxTokens": 4000,
        "agentSpec": {
          "goal": "Develop native Android application using Kotlin/Jetpack Compose with platform-specific optimizations",
          "subscriptions": [
            "platform/development_requested",
            "platform/alignment_requested"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('android')"
              },
              "action": {
                "type": "routine",
                "label": "android-development-routine",
                "inputMap": {
                  "requirements": "event.data.requirements",
                  "designSystem": "blackboard.design_system",
                  "backendSpecs": "blackboard.backend_apis"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "android_app", "blackboardId": "android_development_result"}
                  ],
                  "append": [
                    {"routineOutput": "completed_features", "blackboardId": "completed_features.android"},
                    {"routineOutput": "development_log", "blackboardId": "android_development_history"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('android')"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/feature_ready",
                "dataMapping": {
                  "platform": "'android'",
                  "features": "blackboard.completed_features.android",
                  "native_optimizations": "blackboard.android_development_result.optimizations"
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/alignment_requested",
                "when": "event.data.targetPlatform == 'android'"
              },
              "action": {
                "type": "routine",
                "label": "android-alignment-routine",
                "inputMap": {
                  "misalignedFeatures": "event.data.misalignedFeatures",
                  "referenceFeatures": "event.data.referenceFeatures"
                },
                "outputOperations": {
                  "append": [
                    {"routineOutput": "aligned_features", "blackboardId": "completed_features.android"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/alignment_requested",
                "when": "event.data.targetPlatform == 'android'"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/development_complete",
                "dataMapping": {
                  "platform": "'android'",
                  "status": "'aligned'"
                },
                "outputOperations": {
                  "append": [
                    {"constantValue": "android", "blackboardId": "completed_platforms"}
                  ]
                }
              },
              "qos": 1
            }
          ],
          "prompt": {
            "mode": "supplement",
            "source": "direct",
            "content": "You lead Android development using Kotlin/Jetpack Compose. Focus on Material Design, Android-specific features (Room database, Firebase integration, Play Store requirements), and performance optimization."
          }
        }
      }
    },
    {
      "name": "backend-team-lead",
      "role": "specialist",
      "botConfig": {
        "__version": "1.0",
        "model": "gpt-3.5-turbo",
        "maxTokens": 3000,
        "agentSpec": {
          "goal": "Develop GraphQL API backend that serves both iOS and Android applications",
          "subscriptions": [
            "platform/development_requested",
            "platform/api_requirements_updated"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('backend')"
              },
              "action": {
                "type": "routine",
                "label": "backend-development-routine",
                "inputMap": {
                  "requirements": "event.data.requirements",
                  "apiSpecs": "blackboard.api_specifications"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "backend_api", "blackboardId": "backend_apis"},
                    {"routineOutput": "graphql_schema", "blackboardId": "api_schema"}
                  ],
                  "append": [
                    {"routineOutput": "completed_endpoints", "blackboardId": "completed_features.backend"},
                    {"routineOutput": "development_log", "blackboardId": "backend_development_history"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('backend')"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/feature_ready",
                "dataMapping": {
                  "platform": "'backend'",
                  "features": "blackboard.completed_features.backend",
                  "api_endpoints": "blackboard.backend_apis.endpoints"
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/api_requirements_updated"
              },
              "action": {
                "type": "routine",
                "label": "api-extension-routine",
                "inputMap": {
                  "newRequirements": "event.data.additional_apis",
                  "existingSchema": "blackboard.api_schema"
                },
                "outputOperations": {
                  "append": [
                    {"routineOutput": "new_endpoints", "blackboardId": "completed_features.backend"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/api_requirements_updated"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/development_complete",
                "dataMapping": {
                  "platform": "'backend'",
                  "status": "'extended'"
                },
                "outputOperations": {
                  "append": [
                    {"constantValue": "backend", "blackboardId": "completed_platforms"}
                  ]
                }
              },
              "qos": 1
            }
          ],
          "prompt": {
            "mode": "supplement",
            "source": "direct",
            "content": "You develop the GraphQL backend API that serves both iOS and Android clients. Focus on efficient data fetching, real-time subscriptions, and consistent API contracts across platforms."
          }
        }
      }
    },
    {
      "name": "design-system-lead",
      "role": "specialist",
      "botConfig": {
        "__version": "1.0",
        "model": "gpt-3.5-turbo",
        "maxTokens": 2000,
        "agentSpec": {
          "goal": "Create platform-aware design system and component library for consistent UX",
          "subscriptions": [
            "platform/development_requested",
            "platform/design_updates_needed"
          ],
          "behaviors": [
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('design')"
              },
              "action": {
                "type": "routine",
                "label": "design-system-routine",
                "inputMap": {
                  "requirements": "event.data.requirements",
                  "platforms": "event.data.platforms"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "design_system", "blackboardId": "design_system"},
                    {"routineOutput": "component_library", "blackboardId": "ui_components"}
                  ],
                  "append": [
                    {"routineOutput": "design_tokens", "blackboardId": "completed_features.design"},
                    {"routineOutput": "design_log", "blackboardId": "design_development_history"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/development_requested",
                "when": "event.data.platforms.includes('design')"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/feature_ready",
                "dataMapping": {
                  "platform": "'design'",
                  "features": "blackboard.completed_features.design",
                  "design_tokens": "blackboard.design_system.tokens"
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/design_updates_needed"
              },
              "action": {
                "type": "routine",
                "label": "design-iteration-routine",
                "inputMap": {
                  "feedback": "event.data.platform_feedback",
                  "currentDesign": "blackboard.design_system"
                },
                "outputOperations": {
                  "set": [
                    {"routineOutput": "updated_design", "blackboardId": "design_system"}
                  ]
                }
              },
              "qos": 1
            },
            {
              "trigger": {
                "topic": "platform/design_updates_needed"
              },
              "action": {
                "type": "emit",
                "eventType": "platform/development_complete",
                "dataMapping": {
                  "platform": "'design'",
                  "status": "'updated'"
                },
                "outputOperations": {
                  "append": [
                    {"constantValue": "design", "blackboardId": "completed_platforms"}
                  ]
                }
              },
              "qos": 1
            }
          ],
          "prompt": {
            "mode": "supplement",
            "source": "direct",
            "content": "You create the design system and component library. Ensure visual consistency across iOS and Android while respecting each platform's design guidelines (iOS Human Interface Guidelines, Android Material Design)."
          }
        }
      }
    }
  ],

  "routines": [
    {
      "name": "project-analysis-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Analyze mobile app requirements and create development plan. Determine platform-specific features, shared components, API needs, and resource allocation strategy for parallel development."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "requirements": "{{input.requirements}}",
              "platforms": "{{input.platforms}}"
            },
            "outputMapping": {
              "development_plan": "analysis.plan",
              "platform_allocation": "analysis.allocation"
            }
          }
        }
      }
    },
    {
      "name": "ios-development-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Develop iOS application using Swift/SwiftUI. Implement native iOS features, integrate with backend APIs, follow iOS Human Interface Guidelines, and optimize for App Store submission."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "requirements": "{{input.requirements}}",
              "design": "{{input.designSystem}}",
              "backend": "{{input.backendSpecs}}"
            },
            "outputMapping": {
              "ios_app": "ios.app",
              "completed_features": "ios.features",
              "development_log": "ios.log"
            }
          }
        }
      }
    },
    {
      "name": "android-development-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Develop Android application using Kotlin/Jetpack Compose. Implement Material Design, integrate with backend APIs, follow Android design guidelines, and optimize for Play Store submission."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "requirements": "{{input.requirements}}",
              "design": "{{input.designSystem}}",
              "backend": "{{input.backendSpecs}}"
            },
            "outputMapping": {
              "android_app": "android.app",
              "completed_features": "android.features",
              "development_log": "android.log"
            }
          }
        }
      }
    },
    {
      "name": "backend-development-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Develop GraphQL API backend for mobile applications. Create efficient queries, implement real-time subscriptions, ensure data consistency, and provide consistent API contracts for both platforms."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "requirements": "{{input.requirements}}",
              "specs": "{{input.apiSpecs}}"
            },
            "outputMapping": {
              "backend_api": "backend.api",
              "graphql_schema": "backend.schema",
              "completed_endpoints": "backend.endpoints",
              "development_log": "backend.log"
            }
          }
        }
      }
    },
    {
      "name": "design-system-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Create platform-aware design system. Define design tokens, create component library, ensure consistency across iOS and Android while respecting platform-specific design guidelines."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "requirements": "{{input.requirements}}",
              "platforms": "{{input.platforms}}"
            },
            "outputMapping": {
              "design_system": "design.system",
              "component_library": "design.components",
              "design_tokens": "design.tokens",
              "design_log": "design.log"
            }
          }
        }
      }
    },
    {
      "name": "feature-synchronization-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Analyze feature parity across iOS and Android platforms. Identify misaligned features, ensure consistent functionality, and coordinate feature releases for synchronized launch."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "ios": "{{input.iosFeatures}}",
              "android": "{{input.androidFeatures}}",
              "backend": "{{input.backendAPIs}}"
            },
            "outputMapping": {
              "sync_result": "sync.result",
              "feature_parity": "sync.parity"
            }
          }
        }
      }
    },
    {
      "name": "deployment-readiness-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Evaluate deployment readiness across all platforms. Verify feature parity, test integration, ensure app store compliance, and prepare deployment packages."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "platforms": "{{input.platformStatus}}",
              "parity": "{{input.featureParity}}"
            },
            "outputMapping": {
              "deployment_status": "deployment.status",
              "app_packages": "deployment.packages"
            }
          }
        }
      }
    },
    {
      "name": "ios-alignment-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Align iOS features with Android implementation. Implement missing features, ensure consistent behavior, and maintain native iOS performance and design patterns."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "misaligned": "{{input.misalignedFeatures}}",
              "reference": "{{input.referenceFeatures}}"
            },
            "outputMapping": {
              "aligned_features": "alignment.features"
            }
          }
        }
      }
    },
    {
      "name": "android-alignment-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Align Android features with iOS implementation. Implement missing features, ensure consistent behavior, and maintain native Android performance and Material Design."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "misaligned": "{{input.misalignedFeatures}}",
              "reference": "{{input.referenceFeatures}}"
            },
            "outputMapping": {
              "aligned_features": "alignment.features"
            }
          }
        }
      }
    },
    {
      "name": "api-extension-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Extend GraphQL API with additional requirements from mobile platforms. Add new endpoints, update schema, ensure backward compatibility."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "requirements": "{{input.newRequirements}}",
              "schema": "{{input.existingSchema}}"
            },
            "outputMapping": {
              "new_endpoints": "extension.endpoints"
            }
          }
        }
      }
    },
    {
      "name": "design-iteration-routine",
      "type": "generate",
      "config": {
        "resourceSubType": "RoutineGenerate",
        "instructions": [
          {
            "type": "text",
            "text": "Iterate on design system based on platform feedback. Update components, refine design tokens, ensure platform-specific guidelines are followed."
          }
        ],
        "callDataGenerate": {
          "schema": {
            "inputTemplate": {
              "feedback": "{{input.feedback}}",
              "current": "{{input.currentDesign}}"
            },
            "outputMapping": {
              "updated_design": "iteration.design"
            }
          }
        }
      }
    }
  ],

  "expectedFlow": [
    {
      "step": 1,
      "agent": "mobile-director",
      "trigger": "swarm/started",
      "action": "project-analysis-routine",
      "blackboardUpdates": {
        "project_plan": "Parallel development strategy",
        "resource_allocation": "Platform-specific resource allocation"
      }
    },
    {
      "step": 2,
      "agent": "mobile-director",
      "trigger": "swarm/started",
      "action": "emit",
      "emittedEvents": ["platform/development_requested"]
    },
    {
      "step": 3,
      "description": "All platform teams receive development request and begin parallel work"
    },
    {
      "step": 4,
      "agent": "ios-team-lead",
      "trigger": "platform/development_requested",
      "action": "ios-development-routine",
      "blackboardUpdates": {
        "ios_development_result": "Native iOS app with optimizations",
        "completed_features.ios": ["user_auth", "social_feed", "messaging"]
      }
    },
    {
      "step": 5,
      "agent": "android-team-lead",
      "trigger": "platform/development_requested",
      "action": "android-development-routine",
      "blackboardUpdates": {
        "android_development_result": "Native Android app with Material Design",
        "completed_features.android": ["user_auth", "social_feed", "messaging"]
      }
    },
    {
      "step": 6,
      "agent": "backend-team-lead",
      "trigger": "platform/development_requested",
      "action": "backend-development-routine",
      "blackboardUpdates": {
        "backend_apis": "GraphQL API with real-time subscriptions",
        "completed_features.backend": ["auth_api", "feed_api", "messaging_api"]
      }
    },
    {
      "step": 7,
      "agent": "design-system-lead",
      "trigger": "platform/development_requested",
      "action": "design-system-routine",
      "blackboardUpdates": {
        "design_system": "Cross-platform design system",
        "completed_features.design": ["design_tokens", "components", "guidelines"]
      }
    },
    {
      "step": 8,
      "description": "Platform teams emit feature_ready events"
    },
    {
      "step": 9,
      "agent": "mobile-director",
      "trigger": "platform/feature_ready",
      "action": "feature-synchronization-routine",
      "blackboardUpdates": {
        "synchronization_status": "Feature parity analysis",
        "cross_platform_parity": "95% feature parity achieved"
      }
    },
    {
      "step": 10,
      "agent": "mobile-director",
      "trigger": "platform/development_complete",
      "action": "deployment-readiness-routine",
      "blackboardUpdates": {
        "ready_for_deployment": {"ready": true},
        "final_deliverables": ["ios_app", "android_app", "backend_api"]
      }
    },
    {
      "step": 11,
      "agent": "mobile-director",
      "trigger": "platform/development_complete",
      "action": "emit",
      "emittedEvents": ["app/deployment_ready"],
      "blackboardUpdates": {
        "development_complete": true
      }
    }
  ],

  "resources": {
    "maxCredits": "2000000000",
    "maxDurationMs": 900000,
    "quotas": {
      "gpuPercentage": 40,
      "ramGB": 24,
      "cpuCores": 6,
      "storageGB": 150
    }
  },

  "success": {
    "requiredEvents": [
      "platform/development_requested",
      "platform/feature_ready",
      "platform/development_complete",
      "app/deployment_ready"
    ],
    "blackboardState": {
      "development_complete": "true",
      "completed_platforms": "length>=3",
      "cross_platform_parity": "exists",
      "ready_for_deployment": "exists",
      "completed_features.ios": "length>0",
      "completed_features.android": "length>0",
      "completed_features.backend": "length>0"
    },
    "platformCoordination": {
      "parallelDevelopment": true,
      "featureParity": true,
      "resourceAllocation": true
    },
    "routineCallsMin": 8,
    "agentCoordination": true
  },

  "initialConditions": {
    "triggerEvent": {
      "topic": "swarm/started",
      "data": {
        "task": "develop-social-media-app",
        "timestamp": "2024-01-17T10:00:00Z"
      }
    },
    "blackboardState": {
      "app_requirements": {
        "type": "social_media_app",
        "features": ["user_authentication", "social_feed", "messaging", "media_sharing", "notifications"],
        "platforms": ["ios", "android"],
        "backend": "graphql_api",
        "realtime": true
      },
      "target_platforms": ["ios", "android"],
      "api_specifications": {
        "auth": "JWT with refresh tokens",
        "data": "GraphQL with subscriptions",
        "media": "CDN with image optimization",
        "notifications": "Push notifications"
      },
      "completed_features": {
        "ios": [],
        "android": [],
        "backend": [],
        "design": []
      },
      "completed_platforms": []
    }
  },

  "mocks": {
    "routineResponses": [
      {
        "routineName": "project-analysis-routine",
        "response": {
          "analysis": {
            "plan": {
              "development_strategy": "parallel_platform_development",
              "phases": ["design_system", "backend_api", "ios_app", "android_app", "integration"],
              "timeline": "8 weeks",
              "coordination_points": ["feature_parity_check", "integration_testing", "deployment_prep"]
            },
            "allocation": {
              "ios_team": "35% resources",
              "android_team": "35% resources",
              "backend_team": "20% resources",
              "design_team": "10% resources"
            }
          }
        }
      },
      {
        "routineName": "ios-development-routine",
        "response": {
          "ios": {
            "app": {
              "framework": "SwiftUI",
              "architecture": "MVVM",
              "features_implemented": ["user_auth", "social_feed", "messaging", "media_sharing"],
              "native_features": ["Core Data", "Push Notifications", "App Store compliance"],
              "performance": "60fps maintained"
            },
            "features": [
              {"name": "user_auth", "status": "complete", "native_optimizations": ["Keychain", "Face ID"]},
              {"name": "social_feed", "status": "complete", "native_optimizations": ["UICollectionView", "Prefetching"]},
              {"name": "messaging", "status": "complete", "native_optimizations": ["MessageKit", "Background sync"]},
              {"name": "media_sharing", "status": "complete", "native_optimizations": ["AVFoundation", "Photo Library"]}
            ],
            "log": "iOS app developed with SwiftUI, following iOS Human Interface Guidelines"
          }
        }
      },
      {
        "routineName": "android-development-routine",
        "response": {
          "android": {
            "app": {
              "framework": "Jetpack Compose",
              "architecture": "MVVM",
              "features_implemented": ["user_auth", "social_feed", "messaging", "media_sharing"],
              "native_features": ["Room Database", "Firebase Integration", "Material Design"],
              "performance": "Smooth 60fps"
            },
            "features": [
              {"name": "user_auth", "status": "complete", "native_optimizations": ["Biometric API", "Credential Manager"]},
              {"name": "social_feed", "status": "complete", "native_optimizations": ["RecyclerView", "Paging 3"]},
              {"name": "messaging", "status": "complete", "native_optimizations": ["FCM", "Background processing"]},
              {"name": "media_sharing", "status": "complete", "native_optimizations": ["Camera2 API", "Scoped Storage"]}
            ],
            "log": "Android app developed with Jetpack Compose, following Material Design guidelines"
          }
        }
      },
      {
        "routineName": "backend-development-routine",
        "response": {
          "backend": {
            "api": {
              "type": "GraphQL",
              "features": ["Queries", "Mutations", "Subscriptions", "Real-time updates"],
              "authentication": "JWT with refresh tokens",
              "database": "PostgreSQL with Redis cache",
              "deployment": "Kubernetes with auto-scaling"
            },
            "schema": {
              "types": ["User", "Post", "Message", "Media", "Notification"],
              "queries": ["user", "posts", "messages", "media"],
              "mutations": ["createPost", "sendMessage", "uploadMedia"],
              "subscriptions": ["newMessage", "postUpdated", "userOnline"]
            },
            "endpoints": [
              {"name": "auth_api", "status": "complete", "features": ["login", "register", "refresh"]},
              {"name": "feed_api", "status": "complete", "features": ["posts", "comments", "likes"]},
              {"name": "messaging_api", "status": "complete", "features": ["send", "receive", "real-time"]},
              {"name": "media_api", "status": "complete", "features": ["upload", "optimize", "cdn"]}
            ],
            "log": "GraphQL API developed with real-time subscriptions and efficient data fetching"
          }
        }
      },
      {
        "routineName": "design-system-routine",
        "response": {
          "design": {
            "system": {
              "platforms": ["ios", "android"],
              "tokens": {
                "colors": {"primary": "#007AFF", "secondary": "#34C759", "background": "#F2F2F7"},
                "typography": {"heading": "SF Pro Display", "body": "SF Pro Text"},
                "spacing": {"unit": 8, "sizes": [4, 8, 16, 24, 32, 48]}
              },
              "guidelines": ["iOS HIG compliance", "Material Design principles", "Accessibility standards"]
            },
            "components": {
              "buttons": ["Primary", "Secondary", "Icon"],
              "inputs": ["Text Field", "Search Bar", "Date Picker"],
              "navigation": ["Tab Bar", "Navigation Bar", "Bottom Sheet"],
              "cards": ["Post Card", "User Card", "Message Bubble"]
            },
            "tokens": [
              {"name": "design_tokens", "status": "complete", "platforms": ["ios", "android"]},
              {"name": "components", "status": "complete", "count": 24},
              {"name": "guidelines", "status": "complete", "compliance": "100%"}
            ],
            "log": "Design system created with platform-aware components and consistent tokens"
          }
        }
      },
      {
        "routineName": "feature-synchronization-routine",
        "response": {
          "sync": {
            "result": {
              "parity_analysis": "95% feature parity achieved",
              "misaligned_features": ["notifications_ios_ahead"],
              "synchronized_features": ["user_auth", "social_feed", "messaging", "media_sharing"],
              "platform_specific_optimizations": "maintained"
            },
            "parity": {
              "total_features": 4,
              "ios_features": 4,
              "android_features": 4,
              "backend_apis": 4,
              "parity_percentage": 95,
              "remaining_work": "iOS notification enhancements need Android equivalent"
            }
          }
        }
      },
      {
        "routineName": "deployment-readiness-routine",
        "response": {
          "deployment": {
            "status": {
              "ready": true,
              "ios_ready": true,
              "android_ready": true,
              "backend_ready": true,
              "feature_parity": 95,
              "compliance": "App Store and Play Store ready"
            },
            "packages": {
              "ios_app": "SocialApp.ipa",
              "android_app": "SocialApp.apk",
              "backend_api": "GraphQL API v1.0"
            }
          }
        }
      }
    ]
  }
}