{
  "$schema": "schemas/service.schema.json",
  "version": "2.0.2",
  "service": {
    "name": "vrooli-dev",
    "displayName": "Vrooli Development Environment",
    "description": "Development environment for building and testing Vrooli scenarios - self-contained apps that extend the intelligence system",
    "version": "2.0.2",
    "tags": [
      "development-environment",
      "infrastructure",
      "ai-platform",
      "agent-swarms",
      "recursive-improvement",
      "automation",
      "intelligence-system",
      "self-improving",
      "vrooli-core",
      "ecosystem-manager",
      "capability-builder",
      "semantic-search",
      "multi-resource"
    ],
    "maintainers": [
      {
        "name": "Vrooli Team",
        "email": "team@vrooli.com",
        "url": "https://github.com/Vrooli"
      }
    ],
    "repository": {
      "type": "git",
      "url": "https://github.com/Vrooli/Vrooli",
      "directory": "/"
    },
    "license": "AGPL-3.0-only",
    "homepage": "https://github.com/Vrooli/Vrooli",
    "documentation": "./docs/README.md",
    "support": {
      "email": "team@vrooli.com",
      "issues": "https://github.com/Vrooli/Vrooli/issues"
    }
  },
  "ports": {
    "api": {
      "env_var": "VROOLI_API_PORT",
      "port": 8092,
      "description": "Vrooli unified API server for orchestration and resource management"
    },
    "health": {
      "env_var": "HEALTH_PORT",
      "port": 3001,
      "description": "Health check and monitoring endpoint"
    },
    "orchestrator": {
      "env_var": "ORCHESTRATOR_PORT",
      "port": 9500,
      "description": "Scenario orchestrator API for managing running scenarios"
    }
  },
  "resources": {
    "postgres": {
      "enabled": true,
      "required": true,
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "redis": {
      "enabled": true,
      "version": "7",
      "required": true,
      "description": "Event bus and caching layer"
    },
    "qdrant": {
      "enabled": true,
      "required": true,
      "container_name": "qdrant",
      "data_directory": "${HOME}/.qdrant/data",
      "version": "unknown",
      "status": "installed",
      "last_updated": "2025-08-13 14:23:53",
      "description": "Vector database for embeddings and semantic search"
    },
    "minio": {
      "enabled": true,
      "required": false,
      "description": "S3-compatible object storage service"
    },
    "questdb": {
      "enabled": true,
      "required": false,
      "description": "High-performance time series database"
    },
    "vault": {
      "enabled": true,
      "required": true,
      "description": "Secrets management and secure storage"
    },
    "neo4j": {
      "enabled": true,
      "required": false,
      "description": "Native property graph database for knowledge graphs and recommendations",
      "docker_image": "neo4j:5.24.0",
      "ports": {
        "http": 7474,
        "bolt": 7687
      }
    },
    "postgis": {
      "enabled": true,
      "required": false,
      "description": "Spatial database extension for PostgreSQL - enables geographic queries and location-based analysis",
      "container_name": "postgis-main",
      "data_directory": "${HOME}/.vrooli/postgis",
      "version": "16-3.4",
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "ollama": {
      "enabled": true,
      "required": true,
      "status": {
        "running": true
      },
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "unstructured-io": {
      "enabled": true,
      "required": false,
      "description": "Document processing and parsing service"
    },
    "openrouter": {
      "enabled": true,
      "required": false,
      "description": "Unified API to many model providers for AI access"
    },
    "whisper": {
      "enabled": true,
      "required": false,
      "description": "Speech-to-text processing service"
    },
    "gemini": {
      "enabled": true,
      "required": false,
      "description": "Google Gemini AI API integration"
    },
    "n8n": {
      "enabled": true,
      "required": true,
      "description": "Workflow automation platform"
    },
    "windmill": {
      "enabled": true,
      "required": true,
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "node-red": {
      "enabled": true,
      "required": false,
      "description": "Visual programming for IoT and automation"
    },
    "comfyui": {
      "enabled": true,
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "huginn": {
      "enabled": true,
      "required": false,
      "description": "Agent-based automation and monitoring platform"
    },
    "erpnext": {
      "enabled": true,
      "required": false,
      "description": "Complete open-source ERP with accounting, inventory, HR, CRM, and project management"
    },
    "agent-s2": {
      "enabled": true,
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "browserless": {
      "enabled": true,
      "required": true,
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "claude-code": {
      "enabled": true,
      "required": true,
      "description": "Claude Code development assistant"
    },
    "cline": {
      "enabled": true,
      "required": false,
      "description": "VS Code AI coding assistant powered by Claude"
    },
    "searxng": {
      "enabled": true,
      "required": true,
      "description": "Privacy-respecting search engine"
    },
    "judge0": {
      "enabled": true,
      "required": false,
      "description": "Code execution and testing platform"
    },
    "tars-desktop": {
      "enabled": true,
      "required": false,
      "description": "GUI automation agent for desktop UI control via natural language"
    },
    "llamaindex": {
      "enabled": true,
      "description": "Data framework for LLM applications with RAG capabilities",
      "data_dir": "~/.vrooli/llamaindex"
    },
    "twilio": {
      "enabled": true,
      "required": false,
      "description": "SMS, voice, and messaging automation via Twilio API",
      "credentials_file": "~/.vrooli/twilio-credentials.json",
      "data_dir": "~/.vrooli/twilio"
    },
    "pandas-ai": {
      "enabled": true,
      "required": false,
      "description": "AI-powered data analysis and manipulation framework",
      "data_dir": "~/.vrooli/pandas-ai"
    },
    "crewai": {
      "enabled": true,
      "required": false,
      "description": "Framework for orchestrating role-playing autonomous AI agents",
      "data_dir": "~/.crewai",
      "venv_dir": "~/.crewai/venv"
    },
    "haystack": {
      "enabled": true,
      "required": false,
      "description": "End-to-end framework for question answering and search",
      "data_dir": "~/.vrooli/haystack"
    },
    "obs-studio": {
      "enabled": true,
      "required": false,
      "description": "Professional streaming and recording software with programmatic control via WebSocket API",
      "websocket_port": 4455,
      "recording_path": "~/Videos/obs-recordings",
      "data_dir": "~/.vrooli/obs-studio"
    },
    "home-assistant": {
      "enabled": true,
      "required": false,
      "description": "Open source home automation platform for IoT device control and automation",
      "config_dir": "~/.vrooli/home-assistant/config",
      "timezone": "America/New_York"
    },
    "pushover": {
      "enabled": true,
      "required": false,
      "description": "Real-time mobile and desktop notification service for instant alerts and messaging",
      "credentials_file": "~/.vrooli/pushover-credentials.json",
      "data_dir": "~/.vrooli/pushover"
    },
    "keycloak": {
      "enabled": true,
      "required": false,
      "description": "Identity and access management solution for securing applications and services",
      "admin_port": 9990,
      "data_dir": "~/.vrooli/keycloak"
    },
    "ffmpeg": {
      "enabled": true,
      "required": false,
      "description": "Universal media processing framework for video/audio conversion, streaming, and analysis",
      "temp_dir": "~/.vrooli/ffmpeg/temp",
      "output_dir": "~/.vrooli/ffmpeg/output"
    },
    "vocr": {
      "enabled": true,
      "description": "Vision OCR - Advanced screen recognition and AI-powered image analysis",
      "healthCheck": {
        "intervalMs": 60000,
        "timeoutMs": 5000
      }
    },
    "simpy": {
      "enabled": true,
      "required": false,
      "description": "Discrete event simulation framework for modeling complex systems",
      "data_dir": "~/.vrooli/simpy"
    },
    "blender": {
      "enabled": true,
      "required": false,
      "description": "Professional 3D creation suite with Python API"
    },
    "kicad": {
      "enabled": true,
      "order": 52
    },
    "sagemath": {
      "enabled": true
    },
    "codex": {
      "enabled": true,
      "required": false,
      "description": "AI-powered code generation and completion via OpenAI GPT models"
    },
    "langchain": {
      "enabled": true,
      "description": "Framework for developing applications with LLMs",
      "api_port": 8101,
      "data_dir": "~/.langchain"
    },
    "k6": {
      "enabled": true,
      "description": "Modern load testing tool with JavaScript scripting",
      "healthy": false,
      "health_check": {
        "command": "resource-k6 status --json",
        "interval": 30,
        "timeout": 10
      }
    },
    "openscad": {
      "enabled": true,
      "description": "Programmatic 3D CAD modeler"
    },
    "wikijs": {
      "enabled": true
    },
    "musicgen": {
      "enabled": true
    },
    "automation": {
      "windmill": {
        "enabled": true,
        "healthCheck": {
          "intervalMs": 60000,
          "timeoutMs": 5000
        }
      }
    }
  },
  "deployment": {
    "target": "docker",
    "strategy": "rolling-update",
    "urls": {
      "application": "http://localhost:3000",
      "api": "http://localhost:3000/api",
      "health": "http://localhost:3000/api/health"
    },
    "monitoring": {
      "enabled": true,
      "healthChecks": {
        "application": {
          "type": "http",
          "endpoint": "http://localhost:3000/api/health",
          "interval": "30s",
          "timeout": "5s",
          "threshold": 3
        },
        "database": {
          "type": "tcp",
          "interval": "30s"
        },
        "redis": {
          "type": "tcp",
          "interval": "30s"
        }
      }
    }
  },
  "lifecycle": {
    "version": "2.0.2",
    "setup": {
      "description": "Initialize system for scenario development",
      "condition": {
        "checks": [
          {
            "type": "data",
            "path": "data"
          }
        ]
      },
      "steps": [
        {
          "name": "base-setup",
          "run": "VROOLI_SETUP_MODE=true bash scripts/lib/setup.sh",
          "description": "Execute generic setup (e.g. network, system, git)",
          "timeout": "15m"
        },
        {
          "name": "install-cli",
          "run": "if [[ -f cli/install.sh ]]; then cli/install.sh; else echo '‚ö†Ô∏è  CLI installer not found, skipping'; fi",
          "description": "Install Vrooli CLI command"
        },
        {
          "name": "add-data",
          "run": "echo '[INFO] Skipping resource population during setup - resources are ready for manual population when needed'",
          "description": "Add app data to resources (skipped during setup)"
        }
      ]
    },
    "develop": {
      "description": "Prepare development environment",
      "steps": [
        {
          "name": "load-env",
          "run": "if [[ -f .env ]]; then echo 'Loading .env file' && set -a && source .env && set +a; else echo 'No .env file found'; fi",
          "description": "Load environment variables from .env if exists"
        },
        {
          "name": "start-api",
          "run": "if [[ -f api/start.sh ]]; then (PORT=$VROOLI_API_PORT api/start.sh >/dev/null 2>&1 &) && echo 'üöÄ Vrooli API started on port $VROOLI_API_PORT with native scenario management' || echo '‚ö†Ô∏è  Failed to start API'; else echo '‚ö†Ô∏è  API not found'; fi; true",
          "description": "Start the Vrooli unified API server with built-in scenario management"
        },
        {
          "name": "start-all-scenarios",
          "run": "sleep 5 && echo 'üé¨ Starting all scenarios...' && curl -s -X POST http://localhost:${VROOLI_API_PORT:-8092}/scenarios/start-all | jq -r '.data.message // .error // \"Failed to start scenarios\"' || echo '‚ö†Ô∏è  Could not start scenarios - API may not be ready yet. Use: vrooli scenario start-all'",
          "description": "Start all available scenarios after API is ready",
          "background": false
        }
      ]
    },
    "build": {
      "description": "Prepare build environment",
      "steps": [
        {
          "name": "create-directories",
          "run": "mkdir -p build dist",
          "description": "Create build and dist directories"
        },
        {
          "name": "set-build-env",
          "run": "export BUILD_TIME=\"$(date -u +'%Y-%m-%dT%H:%M:%SZ')\" && export BUILD_ENV=\"${ENVIRONMENT:-development}\" && echo \"Build environment: $BUILD_ENV at $BUILD_TIME\"",
          "description": "Set build environment variables"
        }
      ]
    },
    "test": {
      "description": "Run comprehensive test suite",
      "steps": [
        {
          "name": "set-test-env",
          "run": "export NODE_ENV=test CI=${CI:-false} && echo \"Test environment: NODE_ENV=$NODE_ENV, CI=$CI\"",
          "description": "Set test environment variables"
        },
        {
          "name": "run-shell-tests",
          "run": "__test/run-tests.sh all",
          "description": "Execute comprehensive shell test suite (static, resources, scenarios, bats)",
          "timeout": "10m"
        }
      ]
    },
    "deploy": {
      "description": "Deployment preparation",
      "steps": [
        {
          "name": "show-deploy-info",
          "run": "echo 'Scenarios should be deployed individually from their directories'",
          "description": "Deployment information"
        }
      ]
    },
    "clean": {
      "description": "Clean build artifacts and dependencies",
      "steps": [
        {
          "name": "run-clean",
          "run": "rm -rf packages/*/dist packages/*/build packages/*/.next node_modules packages/*/node_modules || true",
          "description": "Remove build artifacts and dependencies"
        }
      ]
    }
  },
  "services": {
    "storage": {
      "redis": {
        "enabled": true,
        "port": 6380,
        "instances": {
          "default": {
            "port": 6380,
            "maxMemory": "2gb",
            "persistence": "rdb",
            "password": ""
          }
        }
      }
    }
  }
}